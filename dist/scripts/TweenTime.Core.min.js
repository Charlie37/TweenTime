!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("signals"),require("gsap"),require("lodash")):"function"==typeof define&&define.amd?define(["signals","TweenMax","lodash"],t):"object"==typeof exports?exports.Core=t(require("signals"),require("gsap"),require("lodash")):(e.TweenTime=e.TweenTime||{},e.TweenTime.Core=t(e.signals,e.TweenMax,e._))}(this,function(e,t,n){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),u=i(o),l=n(2),c=i(l),f=n(6),h=i(f),m=n(8),d=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r(this,e),this.data=t,this.options=n,this.timer=new c["default"](n),this.orchestrator=new h["default"](this.timer,this.data)}return s(e,[{key:"getItem",value:function(e){return e&&"object"===("undefined"==typeof e?"undefined":a(e))?e:m.find(this.data,function(t){return t.id===e})}},{key:"getProperty",value:function(e,t){var n=this.getItem(t);return n?m.find(n.properties,function(t){return t.name===e}):!1}},{key:"getValues",value:function(e){var t=this.getItem(e);return t?t.values:void 0}},{key:"getValue",value:function(e,t){var n=this.getValues(t);return n&&void 0!==n[e]?n[e]:void 0}},{key:"getKeyAt",value:function(e,t){return m.find(e.keys,function(e){return e.time===t})}},{key:"setValue",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],i=n;i===!1&&(i=this.timer.getCurrentTime()/1e3);var r=this.getKeyAt(e,i);r?r.val=t:(r={val:t,time:i,_property:e},this.options.defaultEase&&(r.ease=this.options.defaultEase),e.keys.push(r),e.keys=u["default"].sortKeys(e.keys))}},{key:"getTotalDuration",value:function(){return this.orchestrator.getTotalDuration()}},{key:"addOnEventListener",value:function(e){this.orchestrator.onEvent.add(e)}},{key:"removeOnEventListener",value:function(e){this.orchestrator.onEvent.remove(e)}}]),e}();e.exports=d},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){n(this,e)}return i(e,null,[{key:"formatMinutes",value:function(e){var t=e/1e3,n=Math.floor(t/3600),i=Math.floor((t-3600*n)/60);t-=60*i;var r=t+"s";return i&&(r=i+"m "+r),n&&(r=n+"h "+r),r}},{key:"getClosestTime",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],i=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],r=arguments.length<=4||void 0===arguments[4]?!1:arguments[4],a=arguments.length<=5||void 0===arguments[5]?.1:arguments[5];if(r){var s=r.getCurrentTime()/1e3;if(Math.abs(s-t)<=a)return s}if(n||i)for(var o=0;o<e.length;o++){var u=e[o];if(u.id!==n||i){if(Math.abs(u.start-t)<=a)return u.start;if(Math.abs(u.end-t)<=a)return u.end}for(var l=0;l<u.properties.length;l++){var c=u.properties[l];if(c.keys&&(u.id!==n||c.name!==i))for(var f=0;f<c.keys.length;f++){var h=c.keys[f];if(Math.abs(h.time-t)<=a)return h.time}}}return!1}},{key:"getPreviousKey",value:function(e,t){for(var n=!1,i=0;i<e.length;i++){var r=e[i];if(!(r.time<t))return n;n=r}return n}},{key:"sortKeys",value:function(e){var t=function(e,t){return e.time<t.time?-1:e.time>t.time?1:0};return e.sort(t)}},{key:"guid",value:function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}]),e}();t["default"]=r},function(e,t,n){(function(e){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(5),s=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,t),this.totalDuration=e.totalDuration||24e4,this.time=[0],this.is_playing=!1,this.last_timeStamp=-1,this.last_time=-1,this.updated=new a.Signal,this.preStatusChanged=new a.Signal,this.statusChanged=new a.Signal,this.durationChanged=new a.Signal,this.seeked=new a.Signal,this.update=this.update.bind(this),window.requestAnimationFrame(this.update)}return r(t,[{key:"getCurrentTime",value:function(){return this.time[0]}},{key:"getDuration",value:function(){return this.totalDuration/1e3}},{key:"setDuration",value:function(e){this.totalDuration=1e3*e,this.durationChanged.dispatch(e)}},{key:"play",value:function(){var t=this;this.is_playing=!0,this.preStatusChanged.dispatch(this.is_playing),e(function(){t.statusChanged.dispatch(t.is_playing)})}},{key:"stop",value:function(){var t=this;this.is_playing=!1,this.preStatusChanged.dispatch(this.is_playing),e(function(){t.statusChanged.dispatch(t.is_playing)})}},{key:"toggle",value:function(){var t=this;this.is_playing=!this.is_playing,this.preStatusChanged.dispatch(this.is_playing),e(function(){t.statusChanged.dispatch(t.is_playing)})}},{key:"seek",value:function(e){this.time[0]=e[0],this.seeked.dispatch(this.time[0])}},{key:"update",value:function(e){-1===this.last_timeStamp&&(this.last_timeStamp=e);var t=e-this.last_timeStamp;this.is_playing&&(this.time[0]+=t),this.time[0]>=this.totalDuration&&(this.time[0]=this.totalDuration,this.stop()),this.updated.dispatch(this.time[0],this.is_playing?t:0),this.last_timeStamp=e,this.last_time=this.time[0],window.requestAnimationFrame(this.update)}}]),t}();t["default"]=s}).call(t,n(3).setImmediate)},function(e,t,n){(function(e,i){function r(e,t){this._id=e,this._clearFn=t}var a=n(4).nextTick,s=Function.prototype.apply,o=Array.prototype.slice,u={},l=0;t.setTimeout=function(){return new r(s.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(s.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=l++,i=arguments.length<2?!1:o.call(arguments,1);return u[n]=!0,a(function(){u[n]&&(i?e.apply(null,i):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof i?i:function(e){delete u[e]}}).call(t,n(3).setImmediate,n(3).clearImmediate)},function(e,t){function n(){l=!1,s.length?u=s.concat(u):c=-1,u.length&&i()}function i(){if(!l){var e=setTimeout(n);l=!0;for(var t=u.length;t;){for(s=u,u=[];++c<t;)s&&s[c].run();c=-1,t=u.length}s=null,l=!1,clearTimeout(e)}}function r(e,t){this.fun=e,this.array=t}function a(){}var s,o=e.exports={},u=[],l=!1,c=-1;o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new r(e,t)),1!==u.length||l||setTimeout(i,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=a,o.addListener=a,o.once=a,o.off=a,o.removeListener=a,o.removeAllListeners=a,o.emit=a,o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,n){t.exports=e},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(5),s=n(7),o=function(){function e(t,n){i(this,e),this.update=this.update.bind(this),this.timer=t,this.data=n,this.mainTimeline=new TimelineMax({paused:!0}),this.onUpdate=new a.Signal,this.timer.updated.add(this.update),this.update(0),this.onEvent=new a.Signal}return r(e,[{key:"getTotalDuration",value:function(){return this.mainTimeline.totalDuration()}},{key:"getEasing",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];if(e&&e.ease){var t=e.ease.split(".");if(2===t.length&&window[t[0]]&&window[t[0]][t[1]])return window[t[0]][t[1]]}return Quad.easeOut}},{key:"initSpecialProperties",value:function(e){e._domHelper=document.createElement("div");for(var t=0;t<e.properties.length;t++){var n=e.properties[t];n.type&&"color"===n.type&&(n.css=!0),n.css&&(e._domHelper.style[n.name]=n.val)}}},{key:"initItemValues",value:function(e){e.values={};for(var t=0;t<e.properties.length;t++){var n=e.properties[t];n.keys.length&&(n.val=n.keys[0].val),e.values[n.name]=n.val}}},{key:"update",value:function(e,t){for(var n=e/1e3,i=t/1e3,r=!1,a=0;a<this.data.length;a++){var o=this.data[a];if(o._domHelper||this.initSpecialProperties(o),o.values||this.initItemValues(o),o._timeline||(o._timeline=new TimelineMax,this.mainTimeline.add(o._timeline,0),o._isDirty=!0),o._isDirty&&(r=!0),o._timeline&&o._isDirty&&o.properties){o._isDirty=!1;for(var u=0;u<o.properties.length;u++){var l=o.properties[u];l._timeline?l._timeline.clear():(l._timeline=new TimelineMax,o._timeline.add(l._timeline,0));var c=l._timeline,f=l.name;if(l.keys.length){var h=o.values,m=l.keys[0],d=0;m&&(d=Math.min(-1,m.time-.1));var p=0,v={},g=this.getEasing();v.ease=g,l.css?(h=o._domHelper,v.css={},v.css[f]=m?m.val:l.val):v[f]=m?m.val:l.val;var y=s.to(h,p,v);c.add(y,d);for(var _=0;_<l.keys.length;_++){var k=l.keys[_];if(_<l.keys.length-1){var w=l.keys[_+1];p=w.time-k.time,v={},g=this.getEasing(w),v.ease=g,l.css?(v.css={},v.css[f]=w.val):v[f]=w.val,y=s.to(h,p,v),c.add(y,k.time)}}c.seek(n)}else o.values[l.name]=l.val}n>0?n-=1e-7:n+=1e-7}}this.mainTimeline.seek(n);for(var T=0;T<this.data.length;T++)for(var b=this.data[T],S=0;S<b.properties.length;S++){var x=b.properties[S];if("event"===x.type)for(var C=0;C<x.keys.length;C++){var I=x.keys[C];i>0&&I.time<=n&&I.time>n-i&&this.onEvent.dispatch(x.name,I.val)}}for(var M=0;M<this.data.length;M++)for(var E=this.data[M],D=0;D<E.properties.length;D++){var j=E.properties[D];j.css&&j.keys.length&&(E.values[j.name]=E._domHelper.style[j.name])}r&&this.onUpdate.dispatch()}}]),e}();t["default"]=o},function(e,n){e.exports=t},function(e,t){e.exports=n}])});
//# sourceMappingURL=TweenTime.Core.min.js.map