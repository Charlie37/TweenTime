!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("signals"),require("gsap"),require("lodash")):"function"==typeof define&&define.amd?define(["signals","TweenMax","lodash"],t):"object"==typeof exports?exports.Core=t(require("signals"),require("gsap"),require("lodash")):(e.TweenTime=e.TweenTime||{},e.TweenTime.Core=t(e.signals,e.TweenMax,e._))}(this,function(e,t,n){return function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),u=i(o),l=n(2),h=i(l),f=n(4),m=i(f),c=n(6),v=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];a(this,e),this.data=t,this.options=n,this.timer=new h["default"](n),this.orchestrator=new m["default"](this.timer,this.data)}return s(e,[{key:"getItem",value:function(e){return e&&"object"===("undefined"==typeof e?"undefined":r(e))?e:c.find(this.data,function(t){return t.id===e})}},{key:"getProperty",value:function(e,t){var n=this.getItem(t);return n?c.find(n.properties,function(t){return t.name===e}):!1}},{key:"getValues",value:function(e){var t=this.getItem(e);return t?t.values:void 0}},{key:"getValue",value:function(e,t){var n=this.getValues(t);return n&&void 0!==n[e]?n[e]:void 0}},{key:"getKeyAt",value:function(e,t){return c.find(e.keys,function(e){return e.time===t})}},{key:"setValue",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],i=n;i===!1&&(i=this.timer.getCurrentTime()/1e3);var a=this.getKeyAt(e,i);a?a.val=t:(a={val:t,time:i,_property:e},this.options.defaultEase&&(a.ease=this.options.defaultEase),e.keys.push(a),e.keys=u["default"].sortKeys(e.keys))}},{key:"getTotalDuration",value:function(){return this.orchestrator.getTotalDuration()}},{key:"addOnEventListener",value:function(e){this.orchestrator.onEvent.add(e)}},{key:"removeOnEventListener",value:function(e){this.orchestrator.onEvent.remove(e)}}]),e}();e.exports=v},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){n(this,e)}return i(e,null,[{key:"formatMinutes",value:function(e){var t=e/1e3,n=Math.floor(t/3600),i=Math.floor((t-3600*n)/60);t-=60*i;var a=t+"s";return i&&(a=i+"m "+a),n&&(a=n+"h "+a),a}},{key:"getClosestTime",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],i=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],a=arguments.length<=4||void 0===arguments[4]?!1:arguments[4],r=arguments.length<=5||void 0===arguments[5]?.1:arguments[5];if(a){var s=a.getCurrentTime()/1e3;if(Math.abs(s-t)<=r)return s}if(n||i)for(var o=0;o<e.length;o++){var u=e[o];if(u.id!==n||i){if(Math.abs(u.start-t)<=r)return u.start;if(Math.abs(u.end-t)<=r)return u.end}for(var l=0;l<u.properties.length;l++){var h=u.properties[l];if(h.keys&&(u.id!==n||h.name!==i))for(var f=0;f<h.keys.length;f++){var m=h.keys[f];if(Math.abs(m.time-t)<=r)return m.time}}}return!1}},{key:"getPreviousKey",value:function(e,t){for(var n=!1,i=0;i<e.length;i++){var a=e[i];if(!(a.time<t))return n;n=a}return n}},{key:"sortKeys",value:function(e){var t=function(e,t){return e.time<t.time?-1:e.time>t.time?1:0};return e.sort(t)}},{key:"guid",value:function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}]),e}();t["default"]=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(3),s=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),this.totalDuration=t.totalDuration||24e4,this.time=[0],this.is_playing=!1,this.last_timeStamp=-1,this.last_time=-1,this.updated=new r.Signal,this.statusChanged=new r.Signal,this.durationChanged=new r.Signal,this.seeked=new r.Signal,this.update=this.update.bind(this),window.requestAnimationFrame(this.update)}return a(e,[{key:"getCurrentTime",value:function(){return this.time[0]}},{key:"getDuration",value:function(){return this.totalDuration/1e3}},{key:"setDuration",value:function(e){this.totalDuration=1e3*e,this.durationChanged.dispatch(e)}},{key:"play",value:function(){this.is_playing=!0,this.statusChanged.dispatch(this.is_playing)}},{key:"stop",value:function(){this.is_playing=!1,this.statusChanged.dispatch(this.is_playing)}},{key:"toggle",value:function(){this.is_playing=!this.is_playing,this.statusChanged.dispatch(this.is_playing)}},{key:"seek",value:function(e){this.time[0]=e[0],this.seeked.dispatch(this.time[0])}},{key:"update",value:function(e){-1===this.last_timeStamp&&(this.last_timeStamp=e);var t=e-this.last_timeStamp;this.is_playing&&(this.time[0]+=t),this.time[0]>=this.totalDuration&&(this.time[0]=this.totalDuration,this.stop()),this.updated.dispatch(this.time[0],this.is_playing?t:0),this.last_timeStamp=e,this.last_time=this.time[0],window.requestAnimationFrame(this.update)}}]),e}();t["default"]=s},function(t,n){t.exports=e},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(3),s=n(5),o=function(){function e(t,n){i(this,e),this.update=this.update.bind(this),this.timer=t,this.data=n,this.mainTimeline=new TimelineMax({paused:!0}),this.onUpdate=new r.Signal,this.timer.updated.add(this.update),this.update(0),this.onEvent=new r.Signal}return a(e,[{key:"getTotalDuration",value:function(){return this.mainTimeline.totalDuration()}},{key:"getEasing",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];if(e&&e.ease){var t=e.ease.split(".");if(2===t.length&&window[t[0]]&&window[t[0]][t[1]])return window[t[0]][t[1]]}return Quad.easeOut}},{key:"initSpecialProperties",value:function(e){e._domHelper=document.createElement("div");for(var t=0;t<e.properties.length;t++){var n=e.properties[t];n.type&&"color"===n.type&&(n.css=!0),n.css&&(e._domHelper.style[n.name]=n.val)}}},{key:"initItemValues",value:function(e){e.values={};for(var t=0;t<e.properties.length;t++){var n=e.properties[t];n.keys.length&&(n.val=n.keys[0].val),e.values[n.name]=n.val}}},{key:"update",value:function(e,t){for(var n=e/1e3,i=t/1e3,a=!1,r=0;r<this.data.length;r++){var o=this.data[r];if(o._domHelper||this.initSpecialProperties(o),o.values||this.initItemValues(o),o._timeline||(o._timeline=new TimelineMax,this.mainTimeline.add(o._timeline,0),o._isDirty=!0),o._isDirty&&(a=!0),o._timeline&&o._isDirty&&o.properties){o._isDirty=!1;for(var u=0;u<o.properties.length;u++){var l=o.properties[u];l._timeline?l._timeline.clear():(l._timeline=new TimelineMax,o._timeline.add(l._timeline,0));var h=l._timeline,f=l.name;if(l.keys.length){var m=o.values,c=l.keys[0],v=0;c&&(v=Math.min(-1,c.time-.1));var d=0,p={},g=this.getEasing();p.ease=g,l.css?(m=o._domHelper,p.css={},p.css[f]=c?c.val:l.val):p[f]=c?c.val:l.val;var y=s.to(m,d,p);h.add(y,v);for(var k=0;k<l.keys.length;k++){var _=l.keys[k];if(k<l.keys.length-1){var b=l.keys[k+1];d=b.time-_.time,p={},g=this.getEasing(b),p.ease=g,l.css?(p.css={},p.css[f]=b.val):p[f]=b.val,y=s.to(m,d,p),h.add(y,_.time)}}h.seek(n)}else o.values[l.name]=l.val}n>0?n-=1e-7:n+=1e-7}}this.mainTimeline.seek(n);for(var w=0;w<this.data.length;w++)for(var T=this.data[w],M=0;M<T.properties.length;M++){var x=T.properties[M];if("event"===x.type)for(var S=0;S<x.keys.length;S++){var C=x.keys[S];i>0&&C.time<=n&&C.time>n-i&&this.onEvent.dispatch(x.name,C.val)}}for(var D=0;D<this.data.length;D++)for(var E=this.data[D],j=0;j<E.properties.length;j++){var P=E.properties[j];P.css&&P.keys.length&&(E.values[P.name]=E._domHelper.style[P.name])}a&&this.onUpdate.dispatch()}}]),e}();t["default"]=o},function(e,n){e.exports=t},function(e,t){e.exports=n}])});
//# sourceMappingURL=TweenTime.Core.min.js.map