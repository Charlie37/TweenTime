!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("lodash"),require(void 0),require("TweenMax")):"function"==typeof define&&define.amd?define(["lodash","signals","TweenMax"],e):"object"==typeof exports?exports.Core=e(require("lodash"),require("./signals"),require("TweenMax")):(t.TweenTime=t.TweenTime||{},t.TweenTime.Core=e(t._,t.signals,t.TweenMax))}(this,function(t,e,i){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var n,r,s,o,a,u=function(t,e){return function(){return t.apply(e,arguments)}};a=i(1),o=i(2),s=i(3),r=i(4),n=function(){function t(t){this.data=t,this.getTotalDuration=u(this.getTotalDuration,this),this.setValue=u(this.setValue,this),this.getKeyAt=u(this.getKeyAt,this),this.getValue=u(this.getValue,this),this.getValues=u(this.getValues,this),this.getProperty=u(this.getProperty,this),this.getItem=u(this.getItem,this),this.timer=new s,this.orchestrator=new r(this.timer,this.data)}return t.prototype.getItem=function(t){return null!==t&&"object"==typeof t?t:a.find(this.data,function(e){return e.id===t})},t.prototype.getProperty=function(t,e){return e=this.getItem(e),e?a.find(e.properties,function(e){return e.name===t}):!1},t.prototype.getValues=function(t){return t=this.getItem(t),t?t.values:void 0},t.prototype.getValue=function(t,e){var i;return i=this.getValues(e),i&&null!=i[t]?i[t]:void 0},t.prototype.getKeyAt=function(t,e){return a.find(t.keys,function(t){return t.time===e})},t.prototype.setValue=function(t,e,i){var n;return null==i&&(i=!1),i===!1&&(i=this.timer.getCurrentTime()/1e3),n=this.getKeyAt(t,i),n?n.val=e:(n={val:e,time:i},t.keys.push(n),t.keys=o.sortKeys(t.keys))},t.prototype.getTotalDuration=function(){return this.orchestrator.getTotalDuration()},t}(),t.exports=n},function(e){e.exports=t},function(t){var e;e=function(){function t(){}return t.formatMinutes=function(t){var e,i,n,r;return t/=1e3,e=Math.floor(t/3600),i=Math.floor((t-3600*e)/60),r=t-60*i,n=r+"s",i&&(n=i+"m "+n),e&&(n=e+"h "+n),n},t.getClosestTime=function(t,e,i,n,r,s){var o,a,u,h,l,p,m,d,f,c,g,y;if(null==i&&(i=!1),null==n&&(n=!1),null==r&&(r=!1),null==s&&(s=.1),r&&(h=r.getCurrentTime()/1e3,Math.abs(h-e)<=s))return h;if(i||n)for(l=0,d=t.length;d>l;l++){if(o=t[l],o.id!==i||n){if(Math.abs(o.start-e)<=s)return o.start;if(Math.abs(o.end-e)<=s)return o.end}for(g=o.properties,p=0,f=g.length;f>p;p++)if(u=g[p],u.keys&&(o.id!==i||u.name!==n))for(y=u.keys,m=0,c=y.length;c>m;m++)if(a=y[m],Math.abs(a.time-e)<=s)return a.time}return!1},t.getPreviousKey=function(t,e){var i,n,r,s;for(n=!1,r=0,s=t.length;s>r;r++){if(i=t[r],!(i.time<e))return n;n=i}return n},t.sortKeys=function(t){var e;return e=function(t,e){return t.time<e.time?-1:t.time>e.time?1:0},t.sort(e)},t.guid=function(){var t;return t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},t}(),t.exports=e},function(t,e,i){var n,r,s=function(t,e){return function(){return t.apply(e,arguments)}};n=i(13),r=function(){function t(){this.update=s(this.update,this),this.getCurrentTime=s(this.getCurrentTime,this),this.totalDuration=24e4,this.time=[0],this.is_playing=!1,this.last_timeStamp=-1,this.last_time=-1,this.updated=new n.Signal,this.statusChanged=new n.Signal,this.durationChanged=new n.Signal,this.seeked=new n.Signal,window.requestAnimationFrame(this.update)}return t.prototype.getCurrentTime=function(){return this.time[0]},t.prototype.getDuration=function(){return this.totalDuration/1e3},t.prototype.setDuration=function(t){return this.totalDuration=1e3*t,this.durationChanged.dispatch(t)},t.prototype.play=function(){return this.is_playing=!0,this.statusChanged.dispatch(this.is_playing)},t.prototype.stop=function(){return this.is_playing=!1,this.statusChanged.dispatch(this.is_playing)},t.prototype.toggle=function(){return this.is_playing=!this.is_playing,this.statusChanged.dispatch(this.is_playing)},t.prototype.seek=function(t){return this.time[0]=t[0],this.seeked.dispatch(this.time[0])},t.prototype.update=function(t){var e;return-1===this.last_timeStamp&&(this.last_timeStamp=t),e=t-this.last_timeStamp,this.is_playing&&(this.time[0]+=e),this.time[0]>=this.totalDuration&&(this.time[0]=this.totalDuration,this.stop()),this.updated.dispatch(this.time[0]),this.last_timeStamp=t,this.last_time=this.time[0],window.requestAnimationFrame(this.update)},t}(),t.exports=r},function(t,e,i){var n,r,s,o=function(t,e){return function(){return t.apply(e,arguments)}};r=i(13),s=i(14),n=function(){function t(t,e){this.timer=t,this.data=e,this.update=o(this.update,this),this.getTotalDuration=o(this.getTotalDuration,this),this.mainTimeline=new TimelineMax({paused:!0}),this.onUpdate=new r.Signal,this.timer.updated.add(this.update),this.update(0)}return t.prototype.getTotalDuration=function(){return this.mainTimeline.totalDuration()},t.prototype.getEasing=function(t){var e;return null==t&&(t=!1),t&&t.ease&&(e=t.ease.split("."),2===e.length&&window[e[0]]&&window[e[0]][e[1]])?window[e[0]][e[1]]:Quad.easeOut},t.prototype.initSpecialProperties=function(t){var e,i,n,r;t._domHelper=document.createElement("div"),n=t.properties,r=[];for(e in n)i=n[e],i.type&&"color"===i.type&&(i.css=!0),r.push(i.css?t._domHelper.style[i.name]=i.val:void 0);return r},t.prototype.initItemValues=function(t){var e,i,n,r;t.values={},n=t.properties,r=[];for(e in n)i=n[e],i.keys.length&&(i.val=i.keys[0].val),r.push(t.values[i.name]=i.val);return r},t.prototype.update=function(t){var e,i,n,r,o,a,u,h,l,p,m,d,f,c,g,y,v,_,T,w,x,D,k,M,C,S,V,b,q,I,K;for(d=t/1e3,r=!1,V=this.data,v=0,x=V.length;x>v;v++)if(o=V[v],o._domHelper||this.initSpecialProperties(o),o.values||this.initItemValues(o),o._timeline||(o._timeline=new TimelineMax,this.mainTimeline.add(o._timeline,0),o._isDirty=!0),o._isDirty&&(r=!0),o._timeline&&o._isDirty&&o.properties){for(o._isDirty=!1,b=o.properties,_=0,D=b.length;D>_;_++){for(p=b[_],p._timeline?p._timeline.clear():(p._timeline=new TimelineMax,o._timeline.add(p._timeline,0)),m=p._timeline,l=p.name,n=p.keys.length>0?p.keys[0]:!1,g=0,n&&(g=Math.min(-1,n.time-.1)),c=0,y={},i=this.getEasing(),y.ease=i,e=o.values,p.css?(y.css={},y.css[l]=n?n.val:p.val,e=o._domHelper):y[l]=n?n.val:p.val,f=s.to(e,c,y),m.add(f,g),q=p.keys,u=T=0,k=q.length;k>T;u=++T)a=q[u],u<p.keys.length-1&&(h=p.keys[u+1],c=h.time-a.time,y={},i=this.getEasing(h),y.ease=i,p.css?(y.css={},y.css[l]=h.val):y[l]=h.val,f=s.to(e,c,y),m.add(f,a.time));m.seek(d)}d>0?d-=1e-7:d+=1e-7}for(this.mainTimeline.seek(d),I=this.data,w=0,M=I.length;M>w;w++)for(o=I[w],K=o.properties,S=0,C=K.length;C>S;S++)p=K[S],p.css&&(o.values[p.name]=o._domHelper.style[p.name]);return r?this.onUpdate.dispatch():void 0},t}(),t.exports=n},,,,,,,,,function(t){t.exports=e},function(t){t.exports=i}])});
//# sourceMappingURL=TweenTime.Core.js.map