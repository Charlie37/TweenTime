{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///TweenTime.Editor.js","webpack:///webpack/bootstrap 63566c7c88ac5fd100de?4396","webpack:///./Editor.coffee","webpack:///external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}?55d0","webpack:///./core/Utils.coffee?8ec4","webpack:///./graph/Timeline.coffee","webpack:///./editor/PropertiesEditor.coffee","webpack:///./editor/EditorMenu.coffee","webpack:///./editor/EditorControls.coffee","webpack:///./editor/SelectionManager.coffee","webpack:///./editor/Exporter.coffee","webpack:///./editor/UndoManager.coffee","webpack:///./templates/timeline.tpl.html","webpack:///external {\"root\":\"signals\",\"commonjs\":\"./signals\",\"amd\":\"signals\"}?71f5","webpack:///external {\"root\":\"$\",\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\"}","webpack:///external \"d3\"","webpack:///./graph/Header.coffee","webpack:///./graph/TimeIndicator.coffee","webpack:///./graph/Items.coffee","webpack:///./graph/KeysPreview.coffee","webpack:///./graph/Properties.coffee","webpack:///./graph/Keys.coffee","webpack:///./graph/Errors.coffee","webpack:///./graph/Selection.coffee","webpack:///./editor/Property.coffee","webpack:///./templates/propertiesEditor.tpl.html","webpack:///./editor/PropertyNumber.coffee","webpack:///./editor/PropertyColor.coffee","webpack:///./editor/PropertyTween.coffee","webpack:///./bower_components/FileSaver/FileSaver.js","webpack:///external {\"root\":\"DraggableNumber\",\"commonjs\":\"DraggableNumber\",\"commonjs2\":\"DraggableNumber\",\"amd\":\"DraggableNumber\"}","webpack:///external {\"root\":\"Mustache\",\"commonjs\":\"mustache\",\"commonjs2\":\"mustache\",\"amd\":\"mustache\"}","webpack:///external \"spectrum\"","webpack:///./editor/PropertyBase.coffee","webpack:///./templates/propertyNumber.tpl.html","webpack:///./templates/propertyColor.tpl.html","webpack:///(webpack)/buildin/amd-define.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///(webpack)/buildin/module.js"],"names":["root","factory","exports","module","require","undefined","define","amd","this","__WEBPACK_EXTERNAL_MODULE_1__","__WEBPACK_EXTERNAL_MODULE_13__","__WEBPACK_EXTERNAL_MODULE_15__","__WEBPACK_EXTERNAL_MODULE_16__","__WEBPACK_EXTERNAL_MODULE_31__","__WEBPACK_EXTERNAL_MODULE_32__","__WEBPACK_EXTERNAL_MODULE_33__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","Editor","EditorControls","EditorMenu","Exporter","PropertiesEditor","SelectionManager","Timeline","UndoManager","tpl_timeline","__bind","fn","me","apply","arguments","tweenTime","options","update","render","onKeyRemoved","onKeyAdded","timer","lastTime","$timeline","$","append","addClass","selectionManager","exporter","timeline","propertiesEditor","keyAdded","add","keyRemoved","menu","onMenuCreated","find","controls","undoManager","window","editorEnabled","dispatchEvent","Event","requestAnimationFrame","prototype","addState","item","removeItem","selection","length","triggerSelect","time","force","_isDirty","time_changed","Utils","formatMinutes","d","hours","minutes","output","seconds","Math","floor","getClosestTime","data","objectId","property_name","tolerance","key","prop","timer_time","_i","_j","_k","_len","_len1","_len2","_ref","_ref1","getCurrentTime","abs","start","end","properties","keys","name","getPreviousKey","prevKey","sortKeys","compare","a","b","sort","guid","s4","random","toString","substring","Errors","Header","Items","Keys","KeysPreview","Properties","Selection","TimeIndicator","d3","extend","object","val","editor","height","margin","width","onUpdate","currentTime","initialDomain","top","right","bottom","left","innerWidth","lineHeight","label_position_x","x","scale","range","domain","xAxis","svg","axis","orient","tickSize","tickFormat","select","attr","svgContainer","svgContainerTime","linesContainer","header","timeIndicator","items","keysPreview","_this","newKey","keyContainer","selectNewKey","errors","onKeyUpdated","xAxisGrid","ticks","dy","xGrid","xAxisElement","onBrush","extent","onresize","INNER_WIDTH","selectAll","resize","bar","domainLength","margin_ms","setDomain","max","Property","Signals","tpl_propertiesEditor","_","addProperty","onSelect","$el","$container","Signal","keypress","e","stopPropagation","console","log","dispatch","domElement","element","empty","Array","removeClass","push","_results","saveAs","initExport","initToggle","$toggleLink","$toggleLinkSide","timelineClosed","click","preventDefault","toggleClass","propertiesClosed","hasClass","self","blob","getJSON","Blob","type","playPause","$time","$time_end","initControls","getDuration","document","charCode","$play_pause","toggle","is_playing","$bt_first","$bt_last","seek","total","getTotalDuration","change","parseFloat","setDuration","toFixed","getSelection","reset","sortSelection","removeDuplicates","found","item2","result","isEqualNode","index","indexOf","splice","__data__","highlightItems","addToSelection","el","d3item","classed","getData","domain_end","domain_start","settings","duration","getTime","json","json_replacer","JSON","stringify","setState","redo","undo","history_max","history","current_index","keydown","keyCode","metaKey","ctrlKey","shiftKey","parse","shift","item_key","key_key","prop_key","state","ease","createTimeHandle","createBrushHandle","onDurationChanged","adaptDomainToDuration","totalDuration","xDisplayed","durationChanged","ms","new_domain","min","brush","extent0","on","gBrush","timeSelection","dragTime","dragTimeMove","timeClicker","timeGrp","dx","event","event_x","timeMatch","sourceEvent","clientX","invert","behavior","drag","origin","enter","mouse","container","barContainerRight","barEnter","barWithStartAndEnd","bar_border","dragLeft","dragRight","dragmove","dragmoveLeft","dragmoveRight","selectBar","diff","t","y","numProperties","visibleProperties","collapsed","filter","text","label","exit","remove","keyKey","keyValue","key_item","propKey","propVal","setItemStyle","subGrp","bar_data","parentNode","datum","parseInt","i","sub_height","def","lineObject","lineValue","dragend","grp_in","grp_inout","grp_linear","grp_out","key_grp","propValue","selectKey","currentDomainStart","is_first","key_scale","lineData","old_time","propertyData","propertyObject","selection_first_time","selection_last_time","time_offset","updateKeyItem","itemLineData","itemLineObject","itemPropertyData","itemPropertyObject","altKey","_id","cls","split","errorTime","errorsGrp","errorsValue","propertiesWithError","insert","onMouseUp","init","css","user-select","class","containerBounding","key_width","move","s","timeStart","timeEnd","getBoundingClientRect","each","state_data","itemBounding","item_data","PropertyColor","PropertyNumber","PropertyTween","$grp_container","$tween_container","d3Object","instance_prop","key_val","numberProp","tweenProp","addTweenProperty","addNumberProperty","createGroupContainer","getContainer","getGroupContainer","$existing","$grp","grp_class","group","propClass","tween","DraggableNumber","Mustache","PropertyBase","tpl_property","__hasProp","hasOwnProperty","__extends","child","parent","ctor","constructor","__super__","_super","instance_property","getInputVal","$input","draggable","onChangeEnd","view","getCurrentVal","onKeyClick","get","changeCallback","onInputChange","endCallback","set","spectrum","allowEmpty","showAlpha","clickoutFiresChange","preferredFormat","color","_a","toHexString","toRgbString","Error","code","onChange","updateKeyTime","tweens","selected","blur","execCommand","isNaN","html","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","navigator","msSaveOrOpenBlob","bind","test","userAgent","doc","get_URL","URL","webkitURL","save_link","createElementNS","can_use_save_link","node","createEvent","initMouseEvent","webkit_req_fs","webkitRequestFileSystem","req_fs","requestFileSystem","mozRequestFileSystem","throw_outside","ex","setImmediate","setTimeout","force_saveable_type","fs_min_size","arbitrary_revoke_timeout","revoke","file","revoker","revokeObjectURL","chrome","filesaver","event_types","concat","listener","FileSaver","object_url","target_view","slice","blob_changed","dispatch_all","fs_error","createObjectURL","location","href","new_tab","open","safari","readyState","DONE","abortable","func","create_if_not_found","create","exclusive","INIT","download","webkitSlice","size","TEMPORARY","fs","getDirectory","dir","save","getFile","createWriter","writer","onwriteend","toURL","onerror","error","ABORT_ERR","forEach","write","abort","WRITING","NOT_FOUND_ERR","FS_proto","onwritestart","onprogress","onwrite","onabort","content","addKey","getCurrentKey","$key","currentValue","prop_name","values","current_key","current_value","__webpack_amd_options__","webpackPolyfill","deprecate","paths","children"],"mappings":"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","file":"TweenTime.Editor.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(undefined), require(\"jquery\"), require(\"d3\"), require(\"DraggableNumber\"), require(\"mustache\"), require(\"spectrum\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\", \"signals\", \"jquery\", \"d3\", \"DraggableNumber\", \"mustache\", \"spectrum\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Editor\"] = factory(require(\"lodash\"), require(\"./signals\"), require(\"jquery\"), require(\"d3\"), require(\"DraggableNumber\"), require(\"mustache\"), require(\"spectrum\"));\n\telse\n\t\troot[\"TweenTime\"] = root[\"TweenTime\"] || {}, root[\"TweenTime\"][\"Editor\"] = factory(root[\"_\"], root[\"signals\"], root[\"$\"], root[\"d3\"], root[\"DraggableNumber\"], root[\"Mustache\"], root[\"spectrum\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_13__, __WEBPACK_EXTERNAL_MODULE_15__, __WEBPACK_EXTERNAL_MODULE_16__, __WEBPACK_EXTERNAL_MODULE_31__, __WEBPACK_EXTERNAL_MODULE_32__, __WEBPACK_EXTERNAL_MODULE_33__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(undefined), require(\"jquery\"), require(\"d3\"), require(\"DraggableNumber\"), require(\"mustache\"), require(\"spectrum\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\", \"signals\", \"jquery\", \"d3\", \"DraggableNumber\", \"mustache\", \"spectrum\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Editor\"] = factory(require(\"lodash\"), require(\"./signals\"), require(\"jquery\"), require(\"d3\"), require(\"DraggableNumber\"), require(\"mustache\"), require(\"spectrum\"));\n\telse\n\t\troot[\"TweenTime\"] = root[\"TweenTime\"] || {}, root[\"TweenTime\"][\"Editor\"] = factory(root[\"_\"], root[\"signals\"], root[\"$\"], root[\"d3\"], root[\"DraggableNumber\"], root[\"Mustache\"], root[\"spectrum\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_13__, __WEBPACK_EXTERNAL_MODULE_15__, __WEBPACK_EXTERNAL_MODULE_16__, __WEBPACK_EXTERNAL_MODULE_31__, __WEBPACK_EXTERNAL_MODULE_32__, __WEBPACK_EXTERNAL_MODULE_33__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar Editor, EditorControls, EditorMenu, Exporter, PropertiesEditor, SelectionManager, Timeline, UndoManager, tpl_timeline,\n\t  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\t\n\ttpl_timeline = __webpack_require__(12);\n\t\n\tTimeline = __webpack_require__(5);\n\t\n\tPropertiesEditor = __webpack_require__(6);\n\t\n\tEditorMenu = __webpack_require__(7);\n\t\n\tEditorControls = __webpack_require__(8);\n\t\n\tSelectionManager = __webpack_require__(9);\n\t\n\tExporter = __webpack_require__(10);\n\t\n\tUndoManager = __webpack_require__(11);\n\t\n\tEditor = (function() {\n\t  function Editor(tweenTime, options) {\n\t    this.tweenTime = tweenTime;\n\t    this.options = options != null ? options : {};\n\t    this.update = __bind(this.update, this);\n\t    this.render = __bind(this.render, this);\n\t    this.onKeyRemoved = __bind(this.onKeyRemoved, this);\n\t    this.onKeyAdded = __bind(this.onKeyAdded, this);\n\t    this.timer = this.tweenTime.timer;\n\t    this.lastTime = -1;\n\t    this.$timeline = $(tpl_timeline);\n\t    $('body').append(this.$timeline);\n\t    $('body').addClass('has-editor');\n\t    this.selectionManager = new SelectionManager(this.tweenTime);\n\t    this.exporter = new Exporter(this);\n\t    this.timeline = new Timeline(this);\n\t    this.propertiesEditor = new PropertiesEditor(this, this.selectionManager);\n\t    this.propertiesEditor.keyAdded.add(this.onKeyAdded);\n\t    this.propertiesEditor.keyRemoved.add(this.onKeyRemoved);\n\t    this.menu = new EditorMenu(this.tweenTime, this.$timeline, this);\n\t    if (this.options.onMenuCreated != null) {\n\t      this.options.onMenuCreated(this.$timeline.find('.timeline__menu'));\n\t    }\n\t    this.controls = new EditorControls(this.tweenTime, this.$timeline);\n\t    this.undoManager = new UndoManager(this);\n\t    window.editorEnabled = true;\n\t    window.dispatchEvent(new Event('resize'));\n\t    window.requestAnimationFrame(this.update);\n\t  }\n\t\n\t  Editor.prototype.onKeyAdded = function() {\n\t    this.undoManager.addState();\n\t    return this.render(false, true);\n\t  };\n\t\n\t  Editor.prototype.onKeyRemoved = function(item) {\n\t    this.selectionManager.removeItem(item);\n\t    this.undoManager.addState();\n\t    if (this.selectionManager.selection.length) {\n\t      this.selectionManager.triggerSelect();\n\t    }\n\t    return this.render(false, true);\n\t  };\n\t\n\t  Editor.prototype.render = function(time, force) {\n\t    if (time == null) {\n\t      time = false;\n\t    }\n\t    if (force == null) {\n\t      force = false;\n\t    }\n\t    if (time === false) {\n\t      time = this.timer.time[0];\n\t    }\n\t    if (force) {\n\t      this.timeline._isDirty = true;\n\t    }\n\t    this.timeline.render(time, force);\n\t    this.controls.render(time, force);\n\t    return this.propertiesEditor.render(time, force);\n\t  };\n\t\n\t  Editor.prototype.update = function() {\n\t    var time, time_changed;\n\t    time = this.timer.time[0];\n\t    time_changed = this.lastTime === time ? false : true;\n\t    this.render(time, time_changed);\n\t    this.lastTime = this.timer.time[0];\n\t    return window.requestAnimationFrame(this.update);\n\t  };\n\t\n\t  return Editor;\n\t\n\t})();\n\t\n\tmodule.exports = Editor;\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar Utils;\n\t\n\tUtils = (function() {\n\t  function Utils() {}\n\t\n\t  Utils.formatMinutes = function(d) {\n\t    var hours, minutes, output, seconds;\n\t    d = d / 1000;\n\t    hours = Math.floor(d / 3600);\n\t    minutes = Math.floor((d - (hours * 3600)) / 60);\n\t    seconds = d - (minutes * 60);\n\t    output = seconds + \"s\";\n\t    if (minutes) {\n\t      output = minutes + \"m \" + output;\n\t    }\n\t    if (hours) {\n\t      output = hours + \"h \" + output;\n\t    }\n\t    return output;\n\t  };\n\t\n\t  Utils.getClosestTime = function(data, time, objectId, property_name, timer, tolerance) {\n\t    var item, key, prop, timer_time, _i, _j, _k, _len, _len1, _len2, _ref, _ref1;\n\t    if (objectId == null) {\n\t      objectId = false;\n\t    }\n\t    if (property_name == null) {\n\t      property_name = false;\n\t    }\n\t    if (timer == null) {\n\t      timer = false;\n\t    }\n\t    if (tolerance == null) {\n\t      tolerance = 0.1;\n\t    }\n\t    if (timer) {\n\t      timer_time = timer.getCurrentTime() / 1000;\n\t      if (Math.abs(timer_time - time) <= tolerance) {\n\t        return timer_time;\n\t      }\n\t    }\n\t    if (objectId || property_name) {\n\t      for (_i = 0, _len = data.length; _i < _len; _i++) {\n\t        item = data[_i];\n\t        if (item.id !== objectId || property_name) {\n\t          if (Math.abs(item.start - time) <= tolerance) {\n\t            return item.start;\n\t          }\n\t          if (Math.abs(item.end - time) <= tolerance) {\n\t            return item.end;\n\t          }\n\t        }\n\t        _ref = item.properties;\n\t        for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {\n\t          prop = _ref[_j];\n\t          if (prop.keys && (item.id !== objectId || prop.name !== property_name)) {\n\t            _ref1 = prop.keys;\n\t            for (_k = 0, _len2 = _ref1.length; _k < _len2; _k++) {\n\t              key = _ref1[_k];\n\t              if (Math.abs(key.time - time) <= tolerance) {\n\t                return key.time;\n\t              }\n\t            }\n\t          }\n\t        }\n\t      }\n\t    }\n\t    return false;\n\t  };\n\t\n\t  Utils.getPreviousKey = function(keys, time) {\n\t    var key, prevKey, _i, _len;\n\t    prevKey = false;\n\t    for (_i = 0, _len = keys.length; _i < _len; _i++) {\n\t      key = keys[_i];\n\t      if (key.time < time) {\n\t        prevKey = key;\n\t      } else {\n\t        return prevKey;\n\t      }\n\t    }\n\t    return prevKey;\n\t  };\n\t\n\t  Utils.sortKeys = function(keys) {\n\t    var compare;\n\t    compare = function(a, b) {\n\t      if (a.time < b.time) {\n\t        return -1;\n\t      }\n\t      if (a.time > b.time) {\n\t        return 1;\n\t      }\n\t      return 0;\n\t    };\n\t    return keys.sort(compare);\n\t  };\n\t\n\t  Utils.guid = function() {\n\t    var s4;\n\t    s4 = function() {\n\t      return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n\t    };\n\t    return s4() + s4() + \"-\" + s4() + \"-\" + s4() + \"-\" + s4() + \"-\" + s4() + s4() + s4();\n\t  };\n\t\n\t  return Utils;\n\t\n\t})();\n\t\n\tmodule.exports = Utils;\n\n\n/***/ },\n/* 3 */,\n/* 4 */,\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $, Errors, Header, Items, Keys, KeysPreview, Properties, Selection, TimeIndicator, Timeline, Utils, d3, extend,\n\t  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\t\n\t$ = __webpack_require__(15);\n\t\n\td3 = __webpack_require__(16);\n\t\n\tUtils = __webpack_require__(2);\n\t\n\tHeader = __webpack_require__(17);\n\t\n\tTimeIndicator = __webpack_require__(18);\n\t\n\tItems = __webpack_require__(19);\n\t\n\tKeysPreview = __webpack_require__(20);\n\t\n\tProperties = __webpack_require__(21);\n\t\n\tKeys = __webpack_require__(22);\n\t\n\tErrors = __webpack_require__(23);\n\t\n\tSelection = __webpack_require__(24);\n\t\n\textend = function(object, properties) {\n\t  var key, val;\n\t  for (key in properties) {\n\t    val = properties[key];\n\t    object[key] = val;\n\t  }\n\t  return object;\n\t};\n\t\n\tTimeline = (function() {\n\t  function Timeline(editor) {\n\t    var height, margin, width;\n\t    this.editor = editor;\n\t    this.render = __bind(this.render, this);\n\t    this.onUpdate = __bind(this.onUpdate, this);\n\t    this.tweenTime = this.editor.tweenTime;\n\t    this.timer = this.tweenTime.timer;\n\t    this.selectionManager = this.editor.selectionManager;\n\t    this._isDirty = true;\n\t    this.timer = this.tweenTime.timer;\n\t    this.currentTime = this.timer.time;\n\t    this.initialDomain = [0, 20 * 1000];\n\t    margin = {\n\t      top: 6,\n\t      right: 20,\n\t      bottom: 0,\n\t      left: 265\n\t    };\n\t    this.margin = margin;\n\t    width = window.innerWidth - margin.left - margin.right;\n\t    height = 270 - margin.top - margin.bottom - 40;\n\t    this.lineHeight = 20;\n\t    this.label_position_x = -margin.left + 20;\n\t    this.x = d3.time.scale().range([0, width]);\n\t    this.x.domain(this.initialDomain);\n\t    this.xAxis = d3.svg.axis().scale(this.x).orient(\"top\").tickSize(-height, 0).tickFormat(Utils.formatMinutes);\n\t    this.svg = d3.select('.timeline__main').append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", 600);\n\t    this.svgContainer = this.svg.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\t    this.svgContainerTime = this.svg.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",0)\");\n\t    this.linesContainer = this.svg.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\t    this.header = new Header(this.timer, this.initialDomain, this.tweenTime, width, margin);\n\t    this.timeIndicator = new TimeIndicator(this, this.svgContainerTime);\n\t    this.selection = new Selection(this, this.svg, margin);\n\t    this.items = new Items(this, this.linesContainer);\n\t    this.items.onUpdate.add(this.onUpdate);\n\t    this.keysPreview = new KeysPreview(this, this.linesContainer);\n\t    this.properties = new Properties(this);\n\t    this.properties.onKeyAdded.add((function(_this) {\n\t      return function(newKey, keyContainer) {\n\t        _this._isDirty = true;\n\t        _this.render(0, false);\n\t        return _this.keys.selectNewKey(newKey, keyContainer);\n\t      };\n\t    })(this));\n\t    this.errors = new Errors(this);\n\t    this.keys = new Keys(this);\n\t    this.keys.onKeyUpdated.add(this.onUpdate);\n\t    this.xAxisGrid = d3.svg.axis().scale(this.x).ticks(100).tickSize(-this.items.dy, 0).tickFormat(\"\").orient(\"top\");\n\t    this.xGrid = this.svgContainer.append('g').attr('class', 'x axis grid').attr(\"transform\", \"translate(0,\" + margin.top + \")\").call(this.xAxisGrid);\n\t    this.xAxisElement = this.svgContainer.append(\"g\").attr(\"class\", \"x axis\").attr(\"transform\", \"translate(0,\" + margin.top + \")\").call(this.xAxis);\n\t    this.header.onBrush.add((function(_this) {\n\t      return function(extent) {\n\t        _this.x.domain(extent);\n\t        _this.xGrid.call(_this.xAxisGrid);\n\t        _this.xAxisElement.call(_this.xAxis);\n\t        return _this._isDirty = true;\n\t      };\n\t    })(this));\n\t    window.requestAnimationFrame(this.render);\n\t    window.onresize = (function(_this) {\n\t      return function() {\n\t        var INNER_WIDTH;\n\t        INNER_WIDTH = window.innerWidth;\n\t        width = INNER_WIDTH - margin.left - margin.right;\n\t        _this.svg.attr(\"width\", width + margin.left + margin.right);\n\t        _this.svg.selectAll('.timeline__right-mask').attr('width', INNER_WIDTH);\n\t        _this.x.range([0, width]);\n\t        _this._isDirty = true;\n\t        _this.header.resize(INNER_WIDTH);\n\t        return _this.render();\n\t      };\n\t    })(this);\n\t  }\n\t\n\t  Timeline.prototype.onUpdate = function() {\n\t    return this.editor.render(false, true);\n\t  };\n\t\n\t  Timeline.prototype.render = function(time, time_changed) {\n\t    var bar, domainLength, height, margin_ms, properties;\n\t    if (time_changed) {\n\t      margin_ms = 16;\n\t      if (this.timer.getCurrentTime() > this.initialDomain[1]) {\n\t        domainLength = this.initialDomain[1] - this.initialDomain[0];\n\t        this.initialDomain[0] += domainLength - margin_ms;\n\t        this.initialDomain[1] += domainLength - margin_ms;\n\t        this.header.setDomain(this.initialDomain);\n\t      }\n\t      if (this.timer.getCurrentTime() < this.initialDomain[0]) {\n\t        domainLength = this.initialDomain[1] - this.initialDomain[0];\n\t        this.initialDomain[0] = this.timer.getCurrentTime();\n\t        this.initialDomain[1] = this.initialDomain[0] + domainLength;\n\t        this.header.setDomain(this.initialDomain);\n\t      }\n\t    }\n\t    if (this._isDirty || time_changed) {\n\t      this.header.render();\n\t      this.timeIndicator.render();\n\t    }\n\t    if (this._isDirty) {\n\t      bar = this.items.render();\n\t      this.keysPreview.render(bar);\n\t      properties = this.properties.render(bar);\n\t      this.errors.render(properties);\n\t      this.keys.render(properties);\n\t      this._isDirty = false;\n\t      height = Math.max(this.items.dy + 30, 230);\n\t      this.xAxis.tickSize(-height, 0);\n\t      this.xAxisGrid.tickSize(-height, 0);\n\t      this.xGrid.call(this.xAxisGrid);\n\t      this.xAxisElement.call(this.xAxis);\n\t      return this.svg.attr(\"height\", height);\n\t    }\n\t  };\n\t\n\t  return Timeline;\n\t\n\t})();\n\t\n\tmodule.exports = Timeline;\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $, PropertiesEditor, Property, Signals, tpl_propertiesEditor, _,\n\t  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\t\n\t$ = __webpack_require__(15);\n\t\n\t_ = __webpack_require__(1);\n\t\n\tSignals = __webpack_require__(13);\n\t\n\tProperty = __webpack_require__(25);\n\t\n\ttpl_propertiesEditor = __webpack_require__(26);\n\t\n\tPropertiesEditor = (function() {\n\t  function PropertiesEditor(editor) {\n\t    this.editor = editor;\n\t    this.render = __bind(this.render, this);\n\t    this.addProperty = __bind(this.addProperty, this);\n\t    this.onSelect = __bind(this.onSelect, this);\n\t    this.onKeyAdded = __bind(this.onKeyAdded, this);\n\t    this.timeline = this.editor.timeline;\n\t    this.timer = this.editor.timer;\n\t    this.selectionManager = editor.selectionManager;\n\t    this.$el = $(tpl_propertiesEditor);\n\t    this.$container = this.$el.find('.properties-editor__main');\n\t    this.keyAdded = new Signals.Signal();\n\t    this.keyRemoved = new Signals.Signal();\n\t    this.items = [];\n\t    $('body').addClass('properties-is-closed');\n\t    $('body').append(this.$el);\n\t    this.selectionManager.onSelect.add(this.onSelect);\n\t    this.$el.keypress(function(e) {\n\t      return e.stopPropagation();\n\t    });\n\t  }\n\t\n\t  PropertiesEditor.prototype.onKeyAdded = function() {\n\t    console.log(\"on key added\");\n\t    return this.keyAdded.dispatch();\n\t  };\n\t\n\t  PropertiesEditor.prototype.onSelect = function(domElement) {\n\t    var element, _i, _len;\n\t    if (domElement == null) {\n\t      domElement = false;\n\t    }\n\t    this.items = [];\n\t    this.$container.empty();\n\t    if (domElement instanceof Array) {\n\t      for (_i = 0, _len = domElement.length; _i < _len; _i++) {\n\t        element = domElement[_i];\n\t        this.addProperty(element);\n\t      }\n\t    } else {\n\t      this.addProperty(domElement);\n\t    }\n\t    if (this.items.length) {\n\t      return $('body').removeClass('properties-is-closed');\n\t    }\n\t  };\n\t\n\t  PropertiesEditor.prototype.addProperty = function(domElement) {\n\t    var prop;\n\t    prop = new Property(this.editor, this.$container, domElement);\n\t    prop.keyAdded.add(this.onKeyAdded);\n\t    return this.items.push(prop);\n\t  };\n\t\n\t  PropertiesEditor.prototype.render = function(time, time_changed) {\n\t    var prop, _i, _len, _ref, _results;\n\t    if (!time_changed) {\n\t      return;\n\t    }\n\t    _ref = this.items;\n\t    _results = [];\n\t    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t      prop = _ref[_i];\n\t      _results.push(prop.update());\n\t    }\n\t    return _results;\n\t  };\n\t\n\t  return PropertiesEditor;\n\t\n\t})();\n\t\n\tmodule.exports = PropertiesEditor;\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar EditorMenu, saveAs;\n\t\n\tsaveAs = __webpack_require__(30);\n\t\n\tEditorMenu = (function() {\n\t  function EditorMenu(tweenTime, $timeline, editor) {\n\t    this.tweenTime = tweenTime;\n\t    this.$timeline = $timeline;\n\t    this.editor = editor;\n\t    this.timer = this.tweenTime.timer;\n\t    this.initExport();\n\t    this.initToggle();\n\t  }\n\t\n\t  EditorMenu.prototype.initToggle = function() {\n\t    var $toggleLink, $toggleLinkSide, timelineClosed;\n\t    timelineClosed = false;\n\t    $toggleLink = this.$timeline.find('[data-action=\"toggle\"]');\n\t    $toggleLink.click((function(_this) {\n\t      return function(e) {\n\t        e.preventDefault();\n\t        timelineClosed = !timelineClosed;\n\t        $toggleLink.toggleClass('menu-item--toggle-up', timelineClosed);\n\t        $('body').toggleClass('timeline-is-closed', timelineClosed);\n\t        return window.dispatchEvent(new Event('resize'));\n\t      };\n\t    })(this));\n\t    $toggleLinkSide = $('.properties-editor').find('[data-action=\"toggle\"]');\n\t    return $toggleLinkSide.click((function(_this) {\n\t      return function(e) {\n\t        var propertiesClosed;\n\t        e.preventDefault();\n\t        propertiesClosed = !$('body').hasClass('properties-is-closed');\n\t        $('body').toggleClass('properties-is-closed', propertiesClosed);\n\t        return window.dispatchEvent(new Event('resize'));\n\t      };\n\t    })(this));\n\t  };\n\t\n\t  EditorMenu.prototype.initExport = function() {\n\t    var exporter, self;\n\t    self = this;\n\t    exporter = this.editor.exporter;\n\t    return this.$timeline.find('[data-action=\"export\"]').click(function(e) {\n\t      var blob, data;\n\t      e.preventDefault();\n\t      data = exporter.getJSON();\n\t      blob = new Blob([data], {\n\t        \"type\": \"text/json;charset=utf-8\"\n\t      });\n\t      return saveAs(blob, 'data.json');\n\t    });\n\t  };\n\t\n\t  return EditorMenu;\n\t\n\t})();\n\t\n\tmodule.exports = EditorMenu;\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar EditorControls,\n\t  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\t\n\tEditorControls = (function() {\n\t  function EditorControls(tweenTime, $timeline) {\n\t    this.tweenTime = tweenTime;\n\t    this.$timeline = $timeline;\n\t    this.render = __bind(this.render, this);\n\t    this.playPause = __bind(this.playPause, this);\n\t    this.timer = this.tweenTime.timer;\n\t    this.$time = this.$timeline.find('.control--time');\n\t    this.$time_end = this.$timeline.find('.control--time-end');\n\t    this.initControls();\n\t    this.$time_end.val(this.tweenTime.timer.getDuration());\n\t    $(document).keypress((function(_this) {\n\t      return function(e) {\n\t        console.log(e);\n\t        if (e.charCode === 32) {\n\t          return _this.playPause();\n\t        }\n\t      };\n\t    })(this));\n\t  }\n\t\n\t  EditorControls.prototype.playPause = function() {\n\t    var $play_pause;\n\t    this.timer.toggle();\n\t    $play_pause = this.$timeline.find('.control--play-pause');\n\t    $play_pause.toggleClass('icon-pause', this.timer.is_playing);\n\t    return $play_pause.toggleClass('icon-play', !this.timer.is_playing);\n\t  };\n\t\n\t  EditorControls.prototype.initControls = function() {\n\t    var $bt_first, $bt_last, $play_pause;\n\t    $play_pause = this.$timeline.find('.control--play-pause');\n\t    $play_pause.click((function(_this) {\n\t      return function(e) {\n\t        e.preventDefault();\n\t        return _this.playPause();\n\t      };\n\t    })(this));\n\t    $bt_first = this.$timeline.find('.control--first');\n\t    $bt_first.click((function(_this) {\n\t      return function(e) {\n\t        e.preventDefault();\n\t        return _this.timer.seek([0]);\n\t      };\n\t    })(this));\n\t    $bt_last = this.$timeline.find('.control--last');\n\t    $bt_last.click((function(_this) {\n\t      return function(e) {\n\t        var total;\n\t        e.preventDefault();\n\t        total = _this.tweenTime.getTotalDuration();\n\t        return _this.timer.seek([total * 1000]);\n\t      };\n\t    })(this));\n\t    this.$time.change((function(_this) {\n\t      return function(e) {\n\t        var seconds;\n\t        seconds = parseFloat(_this.$time.val(), 10) * 1000;\n\t        return _this.timer.seek([seconds]);\n\t      };\n\t    })(this));\n\t    return this.$time_end.change((function(_this) {\n\t      return function(e) {\n\t        var seconds;\n\t        seconds = parseFloat(_this.$time_end.val(), 10);\n\t        return _this.timer.setDuration(seconds);\n\t      };\n\t    })(this));\n\t  };\n\t\n\t  EditorControls.prototype.render = function(time, time_changed) {\n\t    var seconds;\n\t    if (time_changed) {\n\t      seconds = time / 1000;\n\t      return this.$time.val(seconds.toFixed(3));\n\t    }\n\t  };\n\t\n\t  return EditorControls;\n\t\n\t})();\n\t\n\tmodule.exports = EditorControls;\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar SelectionManager, Signals, Utils, d3,\n\t  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\t\n\td3 = __webpack_require__(16);\n\t\n\tSignals = __webpack_require__(13);\n\t\n\tUtils = __webpack_require__(2);\n\t\n\tSelectionManager = (function() {\n\t  function SelectionManager(tweenTime) {\n\t    this.tweenTime = tweenTime;\n\t    this.getSelection = __bind(this.getSelection, this);\n\t    this.triggerSelect = __bind(this.triggerSelect, this);\n\t    this.reset = __bind(this.reset, this);\n\t    this.sortSelection = __bind(this.sortSelection, this);\n\t    this.removeItem = __bind(this.removeItem, this);\n\t    this.removeDuplicates = __bind(this.removeDuplicates, this);\n\t    this.selection = [];\n\t    this.onSelect = new Signals.Signal();\n\t  }\n\t\n\t  SelectionManager.prototype.removeDuplicates = function() {\n\t    var found, item, item2, result, _i, _j, _len, _len1, _ref;\n\t    result = [];\n\t    _ref = this.selection;\n\t    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t      item = _ref[_i];\n\t      found = false;\n\t      for (_j = 0, _len1 = result.length; _j < _len1; _j++) {\n\t        item2 = result[_j];\n\t        if (item.isEqualNode(item2)) {\n\t          found = true;\n\t          break;\n\t        }\n\t      }\n\t      if (found === false) {\n\t        result.push(item);\n\t      }\n\t    }\n\t    return this.selection = result;\n\t  };\n\t\n\t  SelectionManager.prototype.removeItem = function(item) {\n\t    var index;\n\t    index = this.selection.indexOf(item);\n\t    if (index > -1) {\n\t      return this.selection.splice(index, 1);\n\t    }\n\t  };\n\t\n\t  SelectionManager.prototype.sortSelection = function() {\n\t    var compare;\n\t    compare = function(a, b) {\n\t      if (!a.__data__ || !b.__data__) {\n\t        return 0;\n\t      }\n\t      if (a.__data__.time < b.__data__.time) {\n\t        return -1;\n\t      }\n\t      if (a.__data__.time > b.__data__.time) {\n\t        return 1;\n\t      }\n\t      return 0;\n\t    };\n\t    return this.selection = this.selection.sort(compare);\n\t  };\n\t\n\t  SelectionManager.prototype.reset = function() {\n\t    this.selection = [];\n\t    this.highlightItems();\n\t    return this.onSelect.dispatch(this.selection, false);\n\t  };\n\t\n\t  SelectionManager.prototype.triggerSelect = function() {\n\t    return this.onSelect.dispatch(this.selection, false);\n\t  };\n\t\n\t  SelectionManager.prototype.select = function(item, addToSelection) {\n\t    var el, _i, _len;\n\t    if (addToSelection == null) {\n\t      addToSelection = false;\n\t    }\n\t    if (!addToSelection) {\n\t      this.selection = [];\n\t    }\n\t    if (item instanceof Array) {\n\t      for (_i = 0, _len = item.length; _i < _len; _i++) {\n\t        el = item[_i];\n\t        this.selection.push(el);\n\t      }\n\t    } else {\n\t      this.selection.push(item);\n\t    }\n\t    this.removeDuplicates();\n\t    this.highlightItems();\n\t    this.sortSelection();\n\t    return this.onSelect.dispatch(this.selection, addToSelection);\n\t  };\n\t\n\t  SelectionManager.prototype.getSelection = function() {\n\t    return this.selection;\n\t  };\n\t\n\t  SelectionManager.prototype.highlightItems = function() {\n\t    var d3item, item, _i, _len, _ref, _results;\n\t    d3.selectAll('.bar--selected').classed('bar--selected', false);\n\t    d3.selectAll('.key--selected').classed('key--selected', false);\n\t    _ref = this.selection;\n\t    _results = [];\n\t    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t      item = _ref[_i];\n\t      d3item = d3.select(item);\n\t      if (d3item.classed('bar')) {\n\t        _results.push(d3item.classed('bar--selected', true));\n\t      } else if (d3item.classed('key')) {\n\t        _results.push(d3item.classed('key--selected', true));\n\t      } else {\n\t        _results.push(void 0);\n\t      }\n\t    }\n\t    return _results;\n\t  };\n\t\n\t  return SelectionManager;\n\t\n\t})();\n\t\n\tmodule.exports = SelectionManager;\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar Exporter,\n\t  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\t\n\tExporter = (function() {\n\t  function Exporter(editor) {\n\t    this.editor = editor;\n\t    this.getJSON = __bind(this.getJSON, this);\n\t    this.getData = __bind(this.getData, this);\n\t  }\n\t\n\t  Exporter.prototype.getData = function() {\n\t    var domain, domain_end, domain_start, tweenTime;\n\t    tweenTime = this.editor.tweenTime;\n\t    domain = this.editor.timeline.x.domain();\n\t    domain_start = domain[0];\n\t    domain_end = domain[1];\n\t    return {\n\t      settings: {\n\t        time: tweenTime.timer.getCurrentTime(),\n\t        duration: tweenTime.timer.getDuration(),\n\t        domain: [domain_start.getTime(), domain_end.getTime()]\n\t      },\n\t      data: tweenTime.data\n\t    };\n\t  };\n\t\n\t  Exporter.prototype.getJSON = function() {\n\t    var data, json, json_replacer, options;\n\t    options = this.editor.options;\n\t    json_replacer = function(key, val) {\n\t      if (key.indexOf('_') === 0) {\n\t        return void 0;\n\t      }\n\t      if (options.json_replacer != null) {\n\t        return options.json_replacer(key, val);\n\t      }\n\t      return val;\n\t    };\n\t    data = this.getData();\n\t    json = JSON.stringify(data, json_replacer, 2);\n\t    return json;\n\t  };\n\t\n\t  return Exporter;\n\t\n\t})();\n\t\n\tmodule.exports = Exporter;\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $, UndoManager,\n\t  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\t\n\t$ = __webpack_require__(15);\n\t\n\tUndoManager = (function() {\n\t  function UndoManager(editor) {\n\t    this.editor = editor;\n\t    this.setState = __bind(this.setState, this);\n\t    this.addState = __bind(this.addState, this);\n\t    this.redo = __bind(this.redo, this);\n\t    this.undo = __bind(this.undo, this);\n\t    this.history_max = 100;\n\t    this.history = [];\n\t    this.current_index = 0;\n\t    this.addState();\n\t    $(document).keydown((function(_this) {\n\t      return function(e) {\n\t        if (e.keyCode === 90) {\n\t          if (e.metaKey || e.ctrlKey) {\n\t            if (!e.shiftKey) {\n\t              return _this.undo();\n\t            } else {\n\t              return _this.redo();\n\t            }\n\t          }\n\t        }\n\t      };\n\t    })(this));\n\t  }\n\t\n\t  UndoManager.prototype.undo = function() {\n\t    if (this.current_index <= 0) {\n\t      return false;\n\t    }\n\t    this.current_index -= 1;\n\t    return this.setState(this.current_index);\n\t  };\n\t\n\t  UndoManager.prototype.redo = function() {\n\t    if (this.current_index >= this.history.length - 1) {\n\t      return false;\n\t    }\n\t    this.current_index += 1;\n\t    return this.setState(this.current_index);\n\t  };\n\t\n\t  UndoManager.prototype.addState = function() {\n\t    var data;\n\t    data = JSON.parse(this.editor.exporter.getJSON());\n\t    if (this.current_index + 1 < this.history.length) {\n\t      this.history.splice(this.current_index + 1, this.history.length - 1);\n\t    }\n\t    this.history.push(data);\n\t    if (this.history.length > this.history_max) {\n\t      this.history.shift();\n\t    }\n\t    return this.current_index = this.history.length - 1;\n\t  };\n\t\n\t  UndoManager.prototype.setState = function(index) {\n\t    var data, item, item_key, key, key_key, keys, prop, prop_key, state, tweenTime, _i, _j, _k, _len, _len1, _len2, _ref, _ref1;\n\t    state = this.history[index];\n\t    data = state.data;\n\t    tweenTime = this.editor.tweenTime;\n\t    for (item_key = _i = 0, _len = data.length; _i < _len; item_key = ++_i) {\n\t      item = data[item_key];\n\t      if (!tweenTime.data[item_key]) {\n\t        tweenTime.data[item_key] = item;\n\t      } else {\n\t        _ref = item.properties;\n\t        for (prop_key = _j = 0, _len1 = _ref.length; _j < _len1; prop_key = ++_j) {\n\t          prop = _ref[prop_key];\n\t          if (!tweenTime.data[item_key].properties[prop_key]) {\n\t            tweenTime.data[item_key].properties[prop_key] = prop;\n\t          } else {\n\t            keys = tweenTime.data[item_key].properties[prop_key].keys;\n\t            _ref1 = prop.keys;\n\t            for (key_key = _k = 0, _len2 = _ref1.length; _k < _len2; key_key = ++_k) {\n\t              key = _ref1[key_key];\n\t              if (!keys[key_key]) {\n\t                keys[key_key] = key;\n\t              } else {\n\t                keys[key_key].time = key.time;\n\t                keys[key_key].val = key.val;\n\t                keys[key_key].ease = key.ease;\n\t              }\n\t            }\n\t          }\n\t        }\n\t      }\n\t      tweenTime.data[item_key]._isDirty = true;\n\t    }\n\t    return this.editor.render(false, true);\n\t  };\n\t\n\t  return UndoManager;\n\t\n\t})();\n\t\n\tmodule.exports = UndoManager;\n\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = \"<div class=timeline><nav class=timeline__menu><a href=# class=menu-item data-action=export>Export</a> <a href=# class=\\\"menu-item menu-item--toggle\\\" data-action=toggle><i class=icon-toggle></i></a></nav><div class=\\\"timeline__controls controls\\\"><a href=# class=\\\"control control--first icon-first\\\"></a> <a href=# class=\\\"control control--play-pause icon-play\\\"></a> <a href=# class=\\\"control control--last icon-last\\\"></a><input class=\\\"control control--input control--time\\\"><span class=control__time-separator>/</span><input class=\\\"control control--input control--time-end\\\"></div><div class=timeline__header></div><div class=timeline__main></div></div>\";\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_13__;\n\n/***/ },\n/* 14 */,\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_15__;\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_16__;\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $, Header, Signals, Utils, d3,\n\t  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\t\n\t$ = __webpack_require__(15);\n\t\n\td3 = __webpack_require__(16);\n\t\n\tSignals = __webpack_require__(13);\n\t\n\tUtils = __webpack_require__(2);\n\t\n\tHeader = (function() {\n\t  function Header(timer, initialDomain, tweenTime, width, margin) {\n\t    this.timer = timer;\n\t    this.initialDomain = initialDomain;\n\t    this.tweenTime = tweenTime;\n\t    this.resize = __bind(this.resize, this);\n\t    this.createTimeHandle = __bind(this.createTimeHandle, this);\n\t    this.render = __bind(this.render, this);\n\t    this.createBrushHandle = __bind(this.createBrushHandle, this);\n\t    this.onDurationChanged = __bind(this.onDurationChanged, this);\n\t    this.setDomain = __bind(this.setDomain, this);\n\t    this.adaptDomainToDuration = __bind(this.adaptDomainToDuration, this);\n\t    this.onBrush = new Signals.Signal();\n\t    this.margin = {\n\t      top: 10,\n\t      right: 20,\n\t      bottom: 0,\n\t      left: margin.left\n\t    };\n\t    this.height = 50 - this.margin.top - this.margin.bottom + 20;\n\t    this.currentTime = this.timer.time;\n\t    this.x = d3.time.scale().range([0, width]);\n\t    this.x.domain([0, this.timer.totalDuration]);\n\t    this.xDisplayed = d3.time.scale().range([0, width]);\n\t    this.xDisplayed.domain(this.initialDomain);\n\t    this.xAxis = d3.svg.axis().scale(this.x).orient(\"top\").tickSize(-5, 0).tickFormat(Utils.formatMinutes);\n\t    this.svg = d3.select('.timeline__header').append(\"svg\").attr(\"width\", width + this.margin.left + this.margin.right).attr(\"height\", 56);\n\t    this.svgContainer = this.svg.append(\"g\").attr(\"transform\", \"translate(\" + this.margin.left + \",\" + this.margin.top + \")\");\n\t    this.createBrushHandle();\n\t    this.createTimeHandle();\n\t    this.timer.durationChanged.add(this.onDurationChanged);\n\t  }\n\t\n\t  Header.prototype.adaptDomainToDuration = function(domain, seconds) {\n\t    var ms, new_domain;\n\t    ms = seconds * 1000;\n\t    new_domain = [domain[0], domain[1]];\n\t    new_domain[0] = Math.min(new_domain[0], ms);\n\t    new_domain[1] = Math.min(new_domain[1], ms);\n\t    new_domain[0] = Math.max(new_domain[0], 0);\n\t    return new_domain;\n\t  };\n\t\n\t  Header.prototype.setDomain = function(domain) {\n\t    this.brush.x(this.x).extent(this.initialDomain);\n\t    this.svgContainer.select('.brush').call(this.brush);\n\t    this.onBrush.dispatch(this.initialDomain);\n\t    this.render();\n\t    return this.xDisplayed.domain(this.initialDomain);\n\t  };\n\t\n\t  Header.prototype.onDurationChanged = function(seconds) {\n\t    this.x.domain([0, this.timer.totalDuration]);\n\t    this.xAxisElement.call(this.xAxis);\n\t    this.initialDomain = this.adaptDomainToDuration(this.initialDomain, seconds);\n\t    return this.setDomain(this.initialDomain);\n\t  };\n\t\n\t  Header.prototype.createBrushHandle = function() {\n\t    var onBrush;\n\t    this.xAxisElement = this.svgContainer.append(\"g\").attr(\"class\", \"x axis\").attr(\"transform\", \"translate(0,\" + (this.margin.top + 7) + \")\").call(this.xAxis);\n\t    onBrush = (function(_this) {\n\t      return function() {\n\t        var end, extent0, start;\n\t        extent0 = _this.brush.extent();\n\t        start = extent0[0].getTime();\n\t        end = extent0[1].getTime();\n\t        _this.initialDomain[0] = start;\n\t        _this.initialDomain[1] = end;\n\t        return _this.setDomain(_this.initialDomain);\n\t      };\n\t    })(this);\n\t    this.brush = d3.svg.brush().x(this.x).extent(this.initialDomain).on(\"brush\", onBrush);\n\t    return this.gBrush = this.svgContainer.append(\"g\").attr(\"class\", \"brush\").call(this.brush).selectAll(\"rect\").attr('height', 20);\n\t  };\n\t\n\t  Header.prototype.render = function() {\n\t    var timeSelection;\n\t    timeSelection = this.svgContainer.selectAll('.time-indicator');\n\t    return timeSelection.attr('transform', 'translate(' + (this.xDisplayed(this.currentTime[0])) + ', 25)');\n\t  };\n\t\n\t  Header.prototype.createTimeHandle = function() {\n\t    var dragTime, dragTimeMove, self, timeClicker, timeGrp, timeSelection;\n\t    self = this;\n\t    dragTimeMove = function(d) {\n\t      var dx, event, event_x, time, timeMatch, tweenTime;\n\t      event = d3.event.sourceEvent;\n\t      event.stopPropagation();\n\t      tweenTime = self.tweenTime;\n\t      event_x = event.x != null ? event.x : event.clientX;\n\t      dx = self.xDisplayed.invert(event_x - self.margin.left);\n\t      dx = dx.getTime();\n\t      dx = Math.max(0, dx);\n\t      timeMatch = false;\n\t      if (event.shiftKey) {\n\t        time = dx / 1000;\n\t        timeMatch = Utils.getClosestTime(tweenTime.data, time, '---non-existant');\n\t        if (timeMatch !== false) {\n\t          timeMatch = timeMatch * 1000;\n\t        }\n\t      }\n\t      if (timeMatch === false) {\n\t        timeMatch = dx;\n\t      }\n\t      return self.timer.seek([timeMatch]);\n\t    };\n\t    dragTime = d3.behavior.drag().origin(function(d) {\n\t      return d;\n\t    }).on(\"drag\", dragTimeMove);\n\t    timeSelection = this.svgContainer.selectAll('.time-indicator').data(this.currentTime);\n\t    timeClicker = timeSelection.enter().append('rect').attr('x', 0).attr('y', 20).attr('width', self.xDisplayed(self.timer.totalDuration)).attr('height', 50).attr('fill-opacity', 0).on('click', function(d) {\n\t      var dx, mouse;\n\t      mouse = d3.mouse(this);\n\t      dx = self.xDisplayed.invert(mouse[0]);\n\t      dx = dx.getTime();\n\t      dx = Math.max(0, dx);\n\t      return self.timer.seek([dx]);\n\t    });\n\t    timeGrp = timeSelection.enter().append(\"g\").attr('class', \"time-indicator\").attr(\"transform\", \"translate(-0.5,\" + 30 + \")\").call(dragTime);\n\t    timeGrp.append('rect').attr('class', 'time-indicator__line').attr('x', -0.5).attr('y', 0).attr('width', 1).attr('height', 1000);\n\t    timeGrp.append('path').attr('class', 'time-indicator__handle').attr('d', 'M -5 -3 L -5 5 L 0 10 L 5 5 L 5 -3 L -5 -3');\n\t    return this.svgContainer.append(\"rect\").attr(\"class\", \"graph-mask\").attr(\"x\", -self.margin.left).attr(\"y\", -self.margin.top).attr(\"width\", self.margin.left - 5).attr(\"height\", self.height);\n\t  };\n\t\n\t  Header.prototype.resize = function(width) {\n\t    width = width - this.margin.left - this.margin.right;\n\t    this.svg.attr(\"width\", width + this.margin.left + this.margin.right);\n\t    this.x.range([0, width]);\n\t    this.xDisplayed.range([0, width]);\n\t    return this.xAxisElement.call(this.xAxis);\n\t  };\n\t\n\t  return Header;\n\t\n\t})();\n\t\n\tmodule.exports = Header;\n\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $, Signals, TimeIndicator, d3,\n\t  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\t\n\t$ = __webpack_require__(15);\n\t\n\td3 = __webpack_require__(16);\n\t\n\tSignals = __webpack_require__(13);\n\t\n\tTimeIndicator = (function() {\n\t  function TimeIndicator(timeline, container) {\n\t    var timeGrp;\n\t    this.timeline = timeline;\n\t    this.container = container;\n\t    this.render = __bind(this.render, this);\n\t    this.timeSelection = this.container.selectAll('.time-indicator').data(this.timeline.currentTime);\n\t    timeGrp = this.timeSelection.enter().append(\"svg\").attr('class', \"time-indicator timeline__right-mask\").attr('width', window.innerWidth - this.timeline.label_position_x).attr('height', 442);\n\t    this.timeSelection = timeGrp.append('rect').attr('class', 'time-indicator__line').attr('x', -1).attr('y', -this.timeline.margin.top - 5).attr('width', 1).attr('height', 1000);\n\t  }\n\t\n\t  TimeIndicator.prototype.render = function() {\n\t    this.timeSelection = this.container.selectAll('.time-indicator rect');\n\t    return this.timeSelection.attr('x', this.timeline.x(this.timeline.currentTime[0]) - 0.5);\n\t  };\n\t\n\t  return TimeIndicator;\n\t\n\t})();\n\t\n\tmodule.exports = TimeIndicator;\n\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar Items, Signals, Utils, d3, _,\n\t  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\t\n\td3 = __webpack_require__(16);\n\t\n\tSignals = __webpack_require__(13);\n\t\n\t_ = __webpack_require__(1);\n\t\n\tUtils = __webpack_require__(2);\n\t\n\tItems = (function() {\n\t  function Items(timeline, container) {\n\t    this.timeline = timeline;\n\t    this.container = container;\n\t    this.render = __bind(this.render, this);\n\t    this.dy = 10 + this.timeline.margin.top;\n\t    this.onUpdate = new Signals.Signal();\n\t  }\n\t\n\t  Items.prototype.render = function() {\n\t    var bar, barContainerRight, barEnter, barWithStartAndEnd, bar_border, drag, dragLeft, dragRight, dragmove, dragmoveLeft, dragmoveRight, selectBar, self, tweenTime;\n\t    self = this;\n\t    tweenTime = self.timeline.tweenTime;\n\t    selectBar = function(d) {\n\t      return self.timeline.selectionManager.select(this);\n\t    };\n\t    dragmove = function(d) {\n\t      var diff, dx, key, prop, _i, _j, _len, _len1, _ref, _ref1;\n\t      dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n\t      diff = dx - d.start;\n\t      d.start += diff;\n\t      d.end += diff;\n\t      if (d.properties) {\n\t        _ref = d.properties;\n\t        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t          prop = _ref[_i];\n\t          _ref1 = prop.keys;\n\t          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n\t            key = _ref1[_j];\n\t            key.time += diff;\n\t          }\n\t        }\n\t      }\n\t      d._isDirty = true;\n\t      return self.onUpdate.dispatch();\n\t    };\n\t    dragmoveLeft = function(d) {\n\t      var diff, dx, sourceEvent, timeMatch;\n\t      d3.event.sourceEvent.stopPropagation();\n\t      sourceEvent = d3.event.sourceEvent;\n\t      dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n\t      timeMatch = false;\n\t      if (sourceEvent.shiftKey) {\n\t        timeMatch = Utils.getClosestTime(tweenTime.data, dx, d.id, false, tweenTime.timer);\n\t      }\n\t      if (!timeMatch) {\n\t        diff = dx - d.start;\n\t        timeMatch = d.start + diff;\n\t      }\n\t      d.start = timeMatch;\n\t      d._isDirty = true;\n\t      return self.onUpdate.dispatch();\n\t    };\n\t    dragmoveRight = function(d) {\n\t      var diff, dx, sourceEvent, timeMatch;\n\t      d3.event.sourceEvent.stopPropagation();\n\t      sourceEvent = d3.event.sourceEvent;\n\t      dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n\t      timeMatch = false;\n\t      if (sourceEvent.shiftKey) {\n\t        timeMatch = Utils.getClosestTime(tweenTime.data, dx, false, false, tweenTime.timer);\n\t      }\n\t      if (!timeMatch) {\n\t        diff = dx - d.end;\n\t        timeMatch = d.end + diff;\n\t      }\n\t      d.end = timeMatch;\n\t      d._isDirty = true;\n\t      return self.onUpdate.dispatch();\n\t    };\n\t    dragLeft = d3.behavior.drag().origin(function(d) {\n\t      var t;\n\t      t = d3.select(this);\n\t      return {\n\t        x: t.attr('x'),\n\t        y: t.attr('y')\n\t      };\n\t    }).on(\"drag\", dragmoveLeft);\n\t    dragRight = d3.behavior.drag().origin(function(d) {\n\t      var t;\n\t      t = d3.select(this);\n\t      return {\n\t        x: t.attr('x'),\n\t        y: t.attr('y')\n\t      };\n\t    }).on(\"drag\", dragmoveRight);\n\t    drag = d3.behavior.drag().origin(function(d) {\n\t      var t;\n\t      t = d3.select(this);\n\t      return {\n\t        x: t.attr('x'),\n\t        y: t.attr('y')\n\t      };\n\t    }).on(\"drag\", dragmove);\n\t    bar_border = 1;\n\t    bar = this.container.selectAll(\".line-grp\").data(this.timeline.tweenTime.data, function(d) {\n\t      return d.id;\n\t    });\n\t    barEnter = bar.enter().append('g').attr('class', 'line-grp');\n\t    barContainerRight = barEnter.append('svg').attr('class', 'timeline__right-mask').attr('width', window.innerWidth - self.timeline.label_position_x).attr('height', self.timeline.lineHeight);\n\t    barContainerRight.append(\"rect\").attr(\"class\", \"bar\").attr('id', function(d) {\n\t      return Utils.guid();\n\t    }).attr(\"y\", 3).attr(\"height\", 14);\n\t    barContainerRight.append(\"rect\").attr(\"class\", \"bar-anchor bar-anchor--left\").attr(\"y\", 2).attr(\"height\", 16).attr(\"width\", 6).call(dragLeft);\n\t    barContainerRight.append(\"rect\").attr(\"class\", \"bar-anchor bar-anchor--right\").attr(\"y\", 2).attr(\"height\", 16).attr(\"width\", 6).call(dragRight);\n\t    self.dy = 10 + this.timeline.margin.top;\n\t    bar.attr(\"transform\", function(d, i) {\n\t      var numProperties, visibleProperties, y;\n\t      y = self.dy;\n\t      self.dy += self.timeline.lineHeight;\n\t      if (!d.collapsed) {\n\t        numProperties = 0;\n\t        if (d.properties) {\n\t          visibleProperties = _.filter(d.properties, function(prop) {\n\t            return prop.keys.length;\n\t          });\n\t          numProperties = visibleProperties.length;\n\t        }\n\t        self.dy += numProperties * self.timeline.lineHeight;\n\t      }\n\t      return \"translate(0,\" + y + \")\";\n\t    });\n\t    barWithStartAndEnd = function(d) {\n\t      if ((d.start != null) && (d.end != null)) {\n\t        return true;\n\t      }\n\t      return false;\n\t    };\n\t    bar.selectAll('.bar-anchor--left').filter(barWithStartAndEnd).attr(\"x\", function(d) {\n\t      return self.timeline.x(d.start * 1000) - 1;\n\t    }).on('mousedown', function() {\n\t      return d3.event.stopPropagation();\n\t    });\n\t    bar.selectAll('.bar-anchor--right').filter(barWithStartAndEnd).attr(\"x\", function(d) {\n\t      return self.timeline.x(d.end * 1000) - 1;\n\t    }).on('mousedown', function() {\n\t      return d3.event.stopPropagation();\n\t    });\n\t    bar.selectAll('.bar').filter(barWithStartAndEnd).attr(\"x\", function(d) {\n\t      return self.timeline.x(d.start * 1000) + bar_border;\n\t    }).attr(\"width\", function(d) {\n\t      return Math.max(0, (self.timeline.x(d.end) - self.timeline.x(d.start)) * 1000 - bar_border);\n\t    }).call(drag).on(\"click\", selectBar).on('mousedown', function() {\n\t      return d3.event.stopPropagation();\n\t    });\n\t    barEnter.append(\"text\").attr(\"class\", \"line-label\").attr(\"x\", self.timeline.label_position_x + 10).attr(\"y\", 16).text(function(d) {\n\t      return d.label;\n\t    }).on('click', selectBar).on('mousedown', function() {\n\t      return d3.event.stopPropagation();\n\t    });\n\t    self = this;\n\t    barEnter.append(\"text\").attr(\"class\", \"line__toggle\").attr(\"x\", self.timeline.label_position_x - 10).attr(\"y\", 16).on('click', function(d) {\n\t      d.collapsed = !d.collapsed;\n\t      return self.onUpdate.dispatch();\n\t    });\n\t    bar.selectAll(\".line__toggle\").text(function(d) {\n\t      if (d.collapsed) {\n\t        return \"▸\";\n\t      } else {\n\t        return \"▾\";\n\t      }\n\t    });\n\t    barEnter.append(\"line\").attr(\"class\", 'line-separator').attr(\"x1\", -self.timeline.margin.left).attr(\"x2\", self.timeline.x(self.timeline.timer.totalDuration + 100)).attr(\"y1\", self.timeline.lineHeight).attr(\"y2\", self.timeline.lineHeight);\n\t    bar.exit().remove();\n\t    return bar;\n\t  };\n\t\n\t  return Items;\n\t\n\t})();\n\t\n\tmodule.exports = Items;\n\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar KeysPreview, d3,\n\t  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\t\n\td3 = __webpack_require__(16);\n\t\n\tKeysPreview = (function() {\n\t  function KeysPreview(timeline, container) {\n\t    this.timeline = timeline;\n\t    this.container = container;\n\t    this.render = __bind(this.render, this);\n\t  }\n\t\n\t  KeysPreview.prototype.render = function(bar) {\n\t    var keyKey, keyValue, key_item, keys, propKey, propVal, properties, self, setItemStyle, subGrp, tweenTime;\n\t    self = this;\n\t    tweenTime = self.timeline.tweenTime;\n\t    propVal = function(d, i) {\n\t      if (d.properties) {\n\t        return d.properties;\n\t      } else {\n\t        return [];\n\t      }\n\t    };\n\t    propKey = function(d) {\n\t      return d.name;\n\t    };\n\t    properties = bar.selectAll('.keys-preview').data(propVal, propKey);\n\t    subGrp = properties.enter().append('svg').attr(\"class\", 'keys-preview timeline__right-mask').attr('width', window.innerWidth - self.timeline.label_position_x).attr('height', self.timeline.lineHeight);\n\t    setItemStyle = function(d) {\n\t      var bar_data, item;\n\t      item = d3.select(this.parentNode.parentNode);\n\t      bar_data = item.datum();\n\t      if (bar_data.collapsed === true) {\n\t        return \"\";\n\t      }\n\t      return \"display: none;\";\n\t    };\n\t    properties.selectAll('.key--preview').attr(\"style\", setItemStyle);\n\t    keyValue = function(d, i, j) {\n\t      return d.keys;\n\t    };\n\t    keyKey = function(d, k) {\n\t      return d.time;\n\t    };\n\t    keys = properties.selectAll('.key--preview').data(keyValue, keyKey);\n\t    key_item = keys.enter().append('path').attr('class', 'key--preview').attr(\"style\", setItemStyle).attr('d', 'M 0 -4 L 4 0 L 0 4 L -4 0');\n\t    keys.attr('transform', function(d) {\n\t      var dx, dy;\n\t      dx = self.timeline.x(d.time * 1000);\n\t      dx = parseInt(dx, 10);\n\t      dy = 11;\n\t      return \"translate(\" + dx + \",\" + dy + \")\";\n\t    });\n\t    return keys.exit().remove();\n\t  };\n\t\n\t  return KeysPreview;\n\t\n\t})();\n\t\n\tmodule.exports = KeysPreview;\n\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar Properties, Signals, Utils, d3;\n\t\n\td3 = __webpack_require__(16);\n\t\n\tSignals = __webpack_require__(13);\n\t\n\tUtils = __webpack_require__(2);\n\t\n\tProperties = (function() {\n\t  function Properties(timeline) {\n\t    this.timeline = timeline;\n\t    this.onKeyAdded = new Signals.Signal();\n\t    this.subGrp = false;\n\t  }\n\t\n\t  Properties.prototype.render = function(bar) {\n\t    var dy, propKey, propVal, properties, self, subGrp, visibleProperties;\n\t    self = this;\n\t    propVal = function(d, i) {\n\t      if (d.properties) {\n\t        return d.properties;\n\t      } else {\n\t        return [];\n\t      }\n\t    };\n\t    propKey = function(d) {\n\t      return d.name;\n\t    };\n\t    visibleProperties = function(d) {\n\t      return d.keys.length;\n\t    };\n\t    properties = bar.selectAll('.line-item').data(propVal, propKey);\n\t    dy = 0;\n\t    subGrp = properties.enter().append('g').filter(visibleProperties).attr(\"class\", 'line-item');\n\t    self.subGrp = subGrp;\n\t    properties.filter(visibleProperties).attr(\"transform\", function(d, i) {\n\t      var sub_height;\n\t      sub_height = (i + 1) * self.timeline.lineHeight;\n\t      return \"translate(0,\" + sub_height + \")\";\n\t    });\n\t    subGrp.append('rect').attr('class', 'click-handler click-handler--property').attr('x', 0).attr('y', 0).attr('width', self.timeline.x(self.timeline.timer.totalDuration + 100)).attr('height', self.timeline.lineHeight).on('dblclick', function(d) {\n\t      var def, dx, keyContainer, lineObject, lineValue, mouse, newKey, prevKey;\n\t      lineObject = this.parentNode.parentNode;\n\t      lineValue = d3.select(lineObject).datum();\n\t      def = d[\"default\"] ? d[\"default\"] : 0;\n\t      mouse = d3.mouse(this);\n\t      dx = self.timeline.x.invert(mouse[0]);\n\t      dx = dx.getTime() / 1000;\n\t      prevKey = Utils.getPreviousKey(d.keys, dx);\n\t      if (prevKey) {\n\t        def = prevKey.val;\n\t      }\n\t      newKey = {\n\t        time: dx,\n\t        val: def\n\t      };\n\t      d.keys.push(newKey);\n\t      d.keys = Utils.sortKeys(d.keys);\n\t      lineValue._isDirty = true;\n\t      keyContainer = this.parentNode;\n\t      return self.onKeyAdded.dispatch(newKey, keyContainer);\n\t    });\n\t    subGrp.append('svg').attr('class', 'line-item__keys timeline__right-mask').attr('width', window.innerWidth - self.timeline.label_position_x).attr('height', self.timeline.lineHeight).attr('fill', '#f00');\n\t    subGrp.append('text').attr(\"class\", \"line-label line-label--small\").attr(\"x\", self.timeline.label_position_x + 10).attr(\"y\", 15).text(function(d) {\n\t      return d.name;\n\t    });\n\t    subGrp.append(\"line\").attr(\"class\", 'line-separator--secondary').attr(\"x1\", -self.timeline.margin.left).attr(\"x2\", self.timeline.x(self.timeline.timer.totalDuration + 100)).attr(\"y1\", self.timeline.lineHeight).attr(\"y2\", self.timeline.lineHeight);\n\t    bar.selectAll('.line-item').attr('display', function(d) {\n\t      var lineObject, lineValue;\n\t      lineObject = this.parentNode;\n\t      lineValue = d3.select(lineObject).datum();\n\t      if (!lineValue.collapsed) {\n\t        return \"block\";\n\t      } else {\n\t        return \"none\";\n\t      }\n\t    });\n\t    return properties;\n\t  };\n\t\n\t  return Properties;\n\t\n\t})();\n\t\n\tmodule.exports = Properties;\n\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar Keys, Signals, Utils, d3, _;\n\t\n\td3 = __webpack_require__(16);\n\t\n\tSignals = __webpack_require__(13);\n\t\n\tUtils = __webpack_require__(2);\n\t\n\t_ = __webpack_require__(1);\n\t\n\tKeys = (function() {\n\t  function Keys(timeline) {\n\t    this.timeline = timeline;\n\t    this.onKeyUpdated = new Signals.Signal();\n\t  }\n\t\n\t  Keys.prototype.selectNewKey = function(data, container) {\n\t    var key, self;\n\t    self = this;\n\t    key = d3.select(container).selectAll('.key').filter(function(item) {\n\t      return item.time === data.time;\n\t    });\n\t    if (key.length) {\n\t      d3.selectAll('.key--selected').classed('key--selected', false);\n\t      key.classed('key--selected', true);\n\t      key = key[0][0];\n\t      return self.timeline.selectionManager.select(key);\n\t    }\n\t  };\n\t\n\t  Keys.prototype.render = function(properties) {\n\t    var drag, dragend, dragmove, grp_in, grp_inout, grp_linear, grp_out, key_grp, keys, propKey, propValue, selectKey, self, tweenTime;\n\t    self = this;\n\t    tweenTime = self.timeline.tweenTime;\n\t    dragmove = function(d) {\n\t      var currentDomainStart, data, dx, is_first, item, key_scale, lineData, lineObject, mouse, old_time, propertyData, propertyObject, selection, selection_first_time, selection_last_time, sourceEvent, timeMatch, time_offset, updateKeyItem, _i, _len;\n\t      sourceEvent = d3.event.sourceEvent;\n\t      propertyObject = this.parentNode;\n\t      lineObject = propertyObject.parentNode.parentNode;\n\t      propertyData = d3.select(propertyObject).datum();\n\t      lineData = d3.select(lineObject).datum();\n\t      currentDomainStart = self.timeline.x.domain()[0];\n\t      mouse = d3.mouse(this);\n\t      old_time = d.time;\n\t      dx = self.timeline.x.invert(mouse[0]);\n\t      dx = dx.getTime();\n\t      dx = dx / 1000 - currentDomainStart / 1000;\n\t      dx = d.time + dx;\n\t      selection = self.timeline.selectionManager.getSelection();\n\t      selection_first_time = false;\n\t      selection_last_time = false;\n\t      if (selection.length) {\n\t        selection_first_time = d3.select(selection[0]).datum().time;\n\t        selection_last_time = d3.select(selection[selection.length - 1]).datum().time;\n\t      }\n\t      selection = _.filter(selection, (function(_this) {\n\t        return function(item) {\n\t          return item.isEqualNode(_this) === false;\n\t        };\n\t      })(this));\n\t      timeMatch = false;\n\t      if (sourceEvent.shiftKey) {\n\t        timeMatch = Utils.getClosestTime(tweenTime.data, dx, lineData.id, propertyData.name, tweenTime.timer);\n\t      }\n\t      if (timeMatch === false) {\n\t        timeMatch = dx;\n\t      }\n\t      d.time = timeMatch;\n\t      propertyData.keys = Utils.sortKeys(propertyData.keys);\n\t      time_offset = d.time - old_time;\n\t      updateKeyItem = function(item) {\n\t        var itemLineData, itemLineObject, itemPropertyData, itemPropertyObject;\n\t        itemPropertyObject = item.parentNode;\n\t        itemPropertyData = d3.select(itemPropertyObject).datum();\n\t        itemLineObject = itemPropertyObject.parentNode.parentNode;\n\t        itemLineData = d3.select(itemLineObject).datum();\n\t        itemLineData._isDirty = true;\n\t        return itemPropertyData.keys = Utils.sortKeys(itemPropertyData.keys);\n\t      };\n\t      key_scale = false;\n\t      is_first = false;\n\t      if (selection.length) {\n\t        if (sourceEvent.altKey && (selection_first_time != null) && (selection_last_time != null)) {\n\t          is_first = selection_first_time === old_time;\n\t          if (is_first) {\n\t            key_scale = (selection_last_time - d.time) / (selection_last_time - old_time);\n\t          } else {\n\t            key_scale = (d.time - selection_first_time) / (old_time - selection_first_time);\n\t          }\n\t        }\n\t        for (_i = 0, _len = selection.length; _i < _len; _i++) {\n\t          item = selection[_i];\n\t          data = d3.select(item).datum();\n\t          if (key_scale === false) {\n\t            data.time += time_offset;\n\t          } else {\n\t            if (is_first) {\n\t              data.time = selection_last_time - (selection_last_time - data.time) * key_scale;\n\t            } else {\n\t              data.time = selection_first_time + (data.time - selection_first_time) * key_scale;\n\t            }\n\t          }\n\t          updateKeyItem(item);\n\t        }\n\t      }\n\t      lineData._isDirty = true;\n\t      return self.onKeyUpdated.dispatch();\n\t    };\n\t    propValue = function(d, i, j) {\n\t      return d.keys;\n\t    };\n\t    propKey = function(d, k) {\n\t      if (!d._id) {\n\t        d._id = Utils.guid();\n\t      }\n\t      return d._id;\n\t    };\n\t    keys = properties.select('.line-item__keys').selectAll('.key').data(propValue, propKey);\n\t    selectKey = function(d) {\n\t      var addToSelection, event;\n\t      event = d3.event;\n\t      if (event.sourceEvent) {\n\t        event = event.sourceEvent;\n\t      }\n\t      addToSelection = event.shiftKey;\n\t      if (d3.event.type && d3.event.type === \"dragstart\") {\n\t        if (d3.select(this).classed('key--selected')) {\n\t          return;\n\t        }\n\t      }\n\t      return self.timeline.selectionManager.select(this, addToSelection);\n\t    };\n\t    dragend = (function(_this) {\n\t      return function(d) {\n\t        return self.timeline.editor.undoManager.addState();\n\t      };\n\t    })(this);\n\t    drag = d3.behavior.drag().origin(function(d) {\n\t      return d;\n\t    }).on(\"drag\", dragmove).on(\"dragstart\", selectKey).on(\"dragend\", dragend);\n\t    key_grp = keys.enter().append('g').attr('class', 'key').attr('id', function(d) {\n\t      return d._id;\n\t    }).on('mousedown', function() {\n\t      return d3.event.stopPropagation();\n\t    }).call(drag);\n\t    properties.selectAll('.key').attr('class', function(d) {\n\t      var cls, ease;\n\t      cls = 'key';\n\t      if (d3.select(this).classed('key--selected')) {\n\t        cls += \" key--selected\";\n\t      }\n\t      if (d.ease) {\n\t        ease = d.ease.split('.');\n\t        if (ease.length === 2) {\n\t          cls += \" \" + ease[1];\n\t        }\n\t      } else {\n\t        cls += ' easeOut';\n\t      }\n\t      return cls;\n\t    });\n\t    grp_linear = key_grp.append('g').attr('class', 'ease-linear');\n\t    grp_linear.append('path').attr('class', 'key__shape-arrow').attr('d', 'M 0 -6 L 6 0 L 0 6');\n\t    grp_linear.append('path').attr('class', 'key__shape-arrow').attr('d', 'M 0 -6 L -6 0 L 0 6');\n\t    grp_in = key_grp.append('g').attr('class', 'ease-in');\n\t    grp_in.append('path').attr('class', 'key__shape-rect').attr('d', 'M 0 -6 L 0 6 L 4 5 L 1 0 L 4 -5');\n\t    grp_in.append('path').attr('class', 'key__shape-arrow').attr('d', 'M 0 -6 L -6 0 L 0 6');\n\t    grp_out = key_grp.append('g').attr('class', 'ease-out');\n\t    grp_out.append('path').attr('class', 'key__shape-rect').attr('d', 'M 0 -6 L 0 6 L -4 5 L -1 0 L -4 -5');\n\t    grp_out.append('path').attr('class', 'key__shape-arrow').attr('d', 'M 0 -6 L 6 0 L 0 6');\n\t    grp_inout = key_grp.append('g').attr('class', 'ease-inout');\n\t    grp_inout.append('circle').attr('cx', 0).attr('cy', 0).attr('r', 5);\n\t    keys.attr('transform', function(d) {\n\t      var dx, dy;\n\t      dx = self.timeline.x(d.time * 1000);\n\t      dx = parseInt(dx, 10);\n\t      dy = 10;\n\t      return \"translate(\" + dx + \",\" + dy + \")\";\n\t    });\n\t    return keys.exit().remove();\n\t  };\n\t\n\t  return Keys;\n\t\n\t})();\n\t\n\tmodule.exports = Keys;\n\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar Errors, Signals, Utils, d3;\n\t\n\td3 = __webpack_require__(16);\n\t\n\tSignals = __webpack_require__(13);\n\t\n\tUtils = __webpack_require__(2);\n\t\n\tErrors = (function() {\n\t  function Errors(timeline) {\n\t    this.timeline = timeline;\n\t  }\n\t\n\t  Errors.prototype.render = function(properties) {\n\t    var errorTime, errors, errorsGrp, errorsValue, propertiesWithError, self, subGrp;\n\t    self = this;\n\t    subGrp = self.timeline.properties.subGrp;\n\t    propertiesWithError = function(d) {\n\t      return d.errors != null;\n\t    };\n\t    errorsGrp = subGrp.insert('svg', ':first-child').attr('class', 'line-item__errors').attr('width', window.innerWidth - self.timeline.label_position_x).attr('height', self.timeline.lineHeight);\n\t    errorsValue = function(d, i, j) {\n\t      return d.errors;\n\t    };\n\t    errorTime = function(d, k) {\n\t      return d.time;\n\t    };\n\t    errors = properties.filter(propertiesWithError).select('.line-item__errors').selectAll('.error').data(errorsValue, errorTime);\n\t    errors.enter().append('rect').attr('class', 'error').attr('width', 4).attr('height', self.timeline.lineHeight - 1).attr('y', '1');\n\t    properties.selectAll('.error').attr('x', function(d) {\n\t      var dx;\n\t      dx = self.timeline.x(d.time * 1000);\n\t      return dx;\n\t    });\n\t    return errors.exit().remove();\n\t  };\n\t\n\t  return Errors;\n\t\n\t})();\n\t\n\tmodule.exports = Errors;\n\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar Selection,\n\t  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\t\n\tSelection = (function() {\n\t  function Selection(timeline, svg, margin) {\n\t    this.timeline = timeline;\n\t    this.svg = svg;\n\t    this.margin = margin;\n\t    this.onMouseUp = __bind(this.onMouseUp, this);\n\t    this.init();\n\t  }\n\t\n\t  Selection.prototype.onMouseUp = function(e) {\n\t    this.svg.selectAll('.selection').remove();\n\t    return $('body').css({\n\t      'user-select': 'all'\n\t    });\n\t  };\n\t\n\t  Selection.prototype.init = function() {\n\t    var self;\n\t    self = this;\n\t    this.svg.on(\"mousedown\", function() {\n\t      var p;\n\t      p = d3.mouse(this);\n\t      self.svg.append('rect').attr({\n\t        \"class\": 'selection',\n\t        x: p[0],\n\t        y: p[1],\n\t        width: 0,\n\t        height: 0\n\t      });\n\t      self.timeline.selectionManager.reset();\n\t      return $('body').css({\n\t        'user-select': 'none'\n\t      });\n\t    }).on(\"mousemove\", function() {\n\t      var containerBounding, d, key_width, move, p, s, selection;\n\t      s = self.svg.select('.selection');\n\t      if (s.empty()) {\n\t        return;\n\t      }\n\t      p = d3.mouse(this);\n\t      ({\n\t        margin: self.margin\n\t      });\n\t      d = {\n\t        x: parseInt(s.attr('x'), 10),\n\t        y: parseInt(s.attr('y'), 10),\n\t        width: parseInt(s.attr('width'), 10),\n\t        height: parseInt(s.attr('height'), 10)\n\t      };\n\t      p[0] = Math.max(self.margin.left, p[0]);\n\t      move = {\n\t        x: p[0] - d.x,\n\t        y: p[1] - d.y\n\t      };\n\t      if (move.x < 1 || move.x * 2 < d.width) {\n\t        d.x = p[0];\n\t        d.width -= move.x;\n\t      } else {\n\t        d.width = move.x;\n\t      }\n\t      if (move.y < 1 || move.y * 2 < d.height) {\n\t        d.y = p[1];\n\t        d.height -= move.y;\n\t      } else {\n\t        d.height = move.y;\n\t      }\n\t      s.attr(d);\n\t      d.x -= self.margin.left;\n\t      key_width = 6;\n\t      d.timeStart = self.timeline.x.invert(d.x - key_width).getTime() / 1000;\n\t      d.timeEnd = self.timeline.x.invert(d.x + d.width + key_width).getTime() / 1000;\n\t      containerBounding = self.svg[0][0].getBoundingClientRect();\n\t      d3.selectAll('.key--selected').classed('key--selected', false);\n\t      self.timeline.selectionManager.reset();\n\t      selection = [];\n\t      d3.selectAll('.key').each(function(state_data, i) {\n\t        var itemBounding, item_data, y;\n\t        item_data = d3.select(this.parentNode.parentNode.parentNode).datum();\n\t        if (item_data.collapsed !== true) {\n\t          itemBounding = d3.select(this)[0][0].getBoundingClientRect();\n\t          y = itemBounding.top - containerBounding.top;\n\t          if (state_data.time >= d.timeStart && state_data.time <= d.timeEnd) {\n\t            if ((y >= d.y && y <= d.y + d.height) || (y + 10 >= d.y && y + 10 <= d.y + d.height)) {\n\t              d3.select(this).classed('key--selected', true);\n\t              return selection.push(this);\n\t            }\n\t          }\n\t        }\n\t      });\n\t      return self.timeline.selectionManager.select(selection);\n\t    });\n\t    return $(window).on(\"mouseup\", this.onMouseUp);\n\t  };\n\t\n\t  return Selection;\n\t\n\t})();\n\t\n\tmodule.exports = Selection;\n\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar Property, PropertyColor, PropertyNumber, PropertyTween, Signals,\n\t  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\t\n\tSignals = __webpack_require__(13);\n\t\n\tPropertyNumber = __webpack_require__(27);\n\t\n\tPropertyColor = __webpack_require__(28);\n\t\n\tPropertyTween = __webpack_require__(29);\n\t\n\tProperty = (function() {\n\t  function Property(editor, $el, domElement) {\n\t    var $container, $grp_container, $tween_container, d3Object, instance_prop, key, key_val, lineData, lineObject, numberProp, propertyData, propertyObject, property_name, tweenProp, _ref;\n\t    this.editor = editor;\n\t    this.$el = $el;\n\t    this.update = __bind(this.update, this);\n\t    this.addTweenProperty = __bind(this.addTweenProperty, this);\n\t    this.addNumberProperty = __bind(this.addNumberProperty, this);\n\t    this.createGroupContainer = __bind(this.createGroupContainer, this);\n\t    this.onKeyAdded = __bind(this.onKeyAdded, this);\n\t    this.timeline = this.editor.timeline;\n\t    this.timer = this.editor.timer;\n\t    this.selectionManager = editor.selectionManager;\n\t    this.keyAdded = new Signals.Signal();\n\t    this.items = [];\n\t    this.numberProp = false;\n\t    this.tweenProp = false;\n\t    d3Object = d3.select(domElement);\n\t    key_val = false;\n\t    propertyObject = false;\n\t    propertyData = false;\n\t    lineObject = false;\n\t    lineData = false;\n\t    if (d3Object.classed('key')) {\n\t      propertyObject = domElement.parentNode;\n\t      lineObject = propertyObject.parentNode.parentNode;\n\t      lineData = d3.select(lineObject).datum();\n\t      propertyData = d3.select(propertyObject).datum();\n\t      key_val = d3Object.datum();\n\t    }\n\t    if (d3Object.classed('bar')) {\n\t      lineData = d3Object.datum();\n\t    }\n\t    if (d3Object.classed('line-label')) {\n\t      domElement = domElement.parentNode;\n\t      d3Object = d3.select(domElement);\n\t      lineData = d3Object.datum();\n\t    }\n\t    property_name = false;\n\t    if (propertyData) {\n\t      property_name = propertyData.name;\n\t    }\n\t    $container = this.getContainer(lineData);\n\t    $tween_container = $container;\n\t    _ref = lineData.properties;\n\t    for (key in _ref) {\n\t      instance_prop = _ref[key];\n\t      if (!property_name || instance_prop.name === property_name) {\n\t        $grp_container = this.getGroupContainer(instance_prop, $container);\n\t        numberProp = this.addNumberProperty(instance_prop, lineData, key_val, $grp_container);\n\t        this.items.push(numberProp);\n\t        if (instance_prop.name === property_name) {\n\t          $tween_container = $grp_container;\n\t        }\n\t      }\n\t    }\n\t    if (property_name) {\n\t      tweenProp = this.addTweenProperty(instance_prop, lineData, key_val, $tween_container, propertyData, domElement);\n\t      this.items.push(tweenProp);\n\t    }\n\t    return;\n\t  }\n\t\n\t  Property.prototype.onKeyAdded = function() {\n\t    return this.keyAdded.dispatch();\n\t  };\n\t\n\t  Property.prototype.getGroupContainer = function(instance_prop, $container) {\n\t    var $existing, $grp, grp_class;\n\t    if (!instance_prop.group) {\n\t      grp_class = 'property-grp--general';\n\t      $existing = $container.find('.' + grp_class);\n\t      if ($existing.length) {\n\t        return $existing;\n\t      } else {\n\t        $grp = this.createGroupContainer(grp_class);\n\t        $container.append($grp);\n\t        return $grp;\n\t      }\n\t    } else {\n\t      grp_class = 'property-grp--' + instance_prop.group;\n\t      $existing = $container.find('.' + grp_class);\n\t      if ($existing.length) {\n\t        return $existing;\n\t      } else {\n\t        $grp = this.createGroupContainer(grp_class, instance_prop.group);\n\t        $container.append($grp);\n\t        return $grp;\n\t      }\n\t    }\n\t  };\n\t\n\t  Property.prototype.createGroupContainer = function(grp_class, label) {\n\t    var $grp;\n\t    if (label == null) {\n\t      label = false;\n\t    }\n\t    $grp = $('<div class=\"property-grp ' + grp_class + '\"></div>');\n\t    if (label) {\n\t      $grp.append('<h3 class=\"property-grp__title\">' + label + '</h3>');\n\t    }\n\t    return $grp;\n\t  };\n\t\n\t  Property.prototype.getContainer = function(lineData) {\n\t    var $container;\n\t    $container = false;\n\t    if (lineData.id) {\n\t      $container = $('#property--' + lineData.id);\n\t      if (!$container.length) {\n\t        $container = $container = $('<div class=\"properties__wrapper\" id=\"property--' + lineData.id + '\"></div>');\n\t        this.$el.append($container);\n\t        if (lineData.label) {\n\t          $container.append('<h2 class=\"properties-editor__title\">' + lineData.label + '</h2>');\n\t        }\n\t      }\n\t    }\n\t    if ($container === false) {\n\t      $container = $('<div class=\"properties__wrapper\" id=\"no-item\"></div>');\n\t      this.$el.append($container);\n\t    }\n\t    return $container;\n\t  };\n\t\n\t  Property.prototype.addNumberProperty = function(instance_prop, lineData, key_val, $container) {\n\t    var prop, propClass;\n\t    propClass = PropertyNumber;\n\t    if (instance_prop.type && instance_prop.type === 'color') {\n\t      propClass = PropertyColor;\n\t    }\n\t    prop = new propClass(instance_prop, lineData, this.editor, key_val);\n\t    prop.keyAdded.add(this.onKeyAdded);\n\t    $container.append(prop.$el);\n\t    return prop;\n\t  };\n\t\n\t  Property.prototype.addTweenProperty = function(instance_prop, lineData, key_val, $container, propertyData, domElement) {\n\t    var tween;\n\t    tween = new PropertyTween(instance_prop, lineData, this.editor, key_val, this.timeline);\n\t    $container.append(tween.$el);\n\t    tween.$el.find('[data-action-remove]').click((function(_this) {\n\t      return function(e) {\n\t        var index;\n\t        e.preventDefault();\n\t        index = propertyData.keys.indexOf(key_val);\n\t        if (index > -1) {\n\t          propertyData.keys.splice(index, 1);\n\t          _this.editor.propertiesEditor.keyRemoved.dispatch(domElement);\n\t          return lineData._isDirty = true;\n\t        }\n\t      };\n\t    })(this));\n\t    return tween;\n\t  };\n\t\n\t  Property.prototype.update = function() {\n\t    var item, _i, _len, _ref;\n\t    _ref = this.items;\n\t    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t      item = _ref[_i];\n\t      item.update();\n\t    }\n\t  };\n\t\n\t  return Property;\n\t\n\t})();\n\t\n\tmodule.exports = Property;\n\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = \"<div class=properties-editor><a href=# class=\\\"menu-item menu-item--toggle-side\\\" data-action=toggle><i class=icon-toggle></i></a><div class=properties-editor__main></div></div>\";\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $, DraggableNumber, Mustache, PropertyBase, PropertyNumber, Signals, Utils, d3, tpl_property, _,\n\t  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n\t  __hasProp = {}.hasOwnProperty,\n\t  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\t\n\t$ = __webpack_require__(15);\n\t\n\tSignals = __webpack_require__(13);\n\t\n\t_ = __webpack_require__(1);\n\t\n\td3 = __webpack_require__(16);\n\t\n\tUtils = __webpack_require__(2);\n\t\n\tPropertyBase = __webpack_require__(34);\n\t\n\tDraggableNumber = __webpack_require__(31);\n\t\n\tMustache = __webpack_require__(32);\n\t\n\tconsole.log(Mustache);\n\t\n\ttpl_property = __webpack_require__(35);\n\t\n\tPropertyNumber = (function(_super) {\n\t  __extends(PropertyNumber, _super);\n\t\n\t  function PropertyNumber(instance_property, lineData, editor, key_val) {\n\t    this.instance_property = instance_property;\n\t    this.lineData = lineData;\n\t    this.editor = editor;\n\t    this.key_val = key_val != null ? key_val : false;\n\t    this.update = __bind(this.update, this);\n\t    this.render = __bind(this.render, this);\n\t    this.getInputVal = __bind(this.getInputVal, this);\n\t    PropertyNumber.__super__.constructor.apply(this, arguments);\n\t    this.$input = this.$el.find('input');\n\t  }\n\t\n\t  PropertyNumber.prototype.getInputVal = function() {\n\t    return parseFloat(this.$el.find('input').val());\n\t  };\n\t\n\t  PropertyNumber.prototype.render = function() {\n\t    var $input, data, draggable, onChangeEnd, val, view;\n\t    PropertyNumber.__super__.render.apply(this, arguments);\n\t    val = this.getCurrentVal();\n\t    data = {\n\t      id: this.instance_property.name,\n\t      label: this.instance_property.label || this.instance_property.name,\n\t      val: val\n\t    };\n\t    view = Mustache.render(tpl_property, data);\n\t    this.$el = $(view);\n\t    this.$el.find('.property__key').click(this.onKeyClick);\n\t    $input = this.$el.find('input');\n\t    onChangeEnd = (function(_this) {\n\t      return function(new_val) {\n\t        return _this.editor.undoManager.addState();\n\t      };\n\t    })(this);\n\t    draggable = new DraggableNumber($input.get(0), {\n\t      changeCallback: this.onInputChange,\n\t      endCallback: onChangeEnd\n\t    });\n\t    $input.data('draggable', draggable);\n\t    return $input.change(this.onInputChange);\n\t  };\n\t\n\t  PropertyNumber.prototype.update = function() {\n\t    var draggable, val;\n\t    PropertyNumber.__super__.update.apply(this, arguments);\n\t    val = this.getCurrentVal();\n\t    draggable = this.$input.data('draggable');\n\t    if (draggable) {\n\t      return draggable.set(val.toFixed(3));\n\t    } else {\n\t      return this.$input.val(val.toFixed(3));\n\t    }\n\t  };\n\t\n\t  return PropertyNumber;\n\t\n\t})(PropertyBase);\n\t\n\tmodule.exports = PropertyNumber;\n\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $, Mustache, PropertyBase, PropertyColor, Signals, Utils, d3, tpl_property, _,\n\t  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n\t  __hasProp = {}.hasOwnProperty,\n\t  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\t\n\t$ = __webpack_require__(15);\n\t\n\t__webpack_require__(33);\n\t\n\tSignals = __webpack_require__(13);\n\t\n\t_ = __webpack_require__(1);\n\t\n\td3 = __webpack_require__(16);\n\t\n\tUtils = __webpack_require__(2);\n\t\n\tPropertyBase = __webpack_require__(34);\n\t\n\tMustache = __webpack_require__(32);\n\t\n\ttpl_property = __webpack_require__(36);\n\t\n\tPropertyColor = (function(_super) {\n\t  __extends(PropertyColor, _super);\n\t\n\t  function PropertyColor(instance_property, lineData, editor, key_val) {\n\t    this.instance_property = instance_property;\n\t    this.lineData = lineData;\n\t    this.editor = editor;\n\t    this.key_val = key_val != null ? key_val : false;\n\t    this.update = __bind(this.update, this);\n\t    this.render = __bind(this.render, this);\n\t    PropertyColor.__super__.constructor.apply(this, arguments);\n\t    this.$input = this.$el.find('input');\n\t  }\n\t\n\t  PropertyColor.prototype.render = function() {\n\t    var $input, data, val, view;\n\t    PropertyColor.__super__.render.apply(this, arguments);\n\t    val = this.getCurrentVal();\n\t    data = {\n\t      id: this.instance_property.name,\n\t      label: this.instance_property.label || this.instance_property.name,\n\t      val: val\n\t    };\n\t    view = Mustache.render(tpl_property, data);\n\t    this.$el = $(view);\n\t    this.$el.find('.property__key').click(this.onKeyClick);\n\t    $input = this.$el.find('input');\n\t    $input.spectrum({\n\t      allowEmpty: false,\n\t      showAlpha: true,\n\t      clickoutFiresChange: false,\n\t      preferredFormat: \"rgb\",\n\t      change: (function(_this) {\n\t        return function(color) {\n\t          return _this.editor.undoManager.addState();\n\t        };\n\t      })(this),\n\t      move: (function(_this) {\n\t        return function(color) {\n\t          if (color._a === 1) {\n\t            _this.$input.val(color.toHexString());\n\t          } else {\n\t            _this.$input.val(color.toRgbString());\n\t          }\n\t          return _this.onInputChange();\n\t        };\n\t      })(this)\n\t    });\n\t    return $input.change(this.onInputChange);\n\t  };\n\t\n\t  PropertyColor.prototype.update = function() {\n\t    var val;\n\t    PropertyColor.__super__.update.apply(this, arguments);\n\t    val = this.getCurrentVal();\n\t    this.$input.val(val);\n\t    return this.$input.spectrum('set', val);\n\t  };\n\t\n\t  return PropertyColor;\n\t\n\t})(PropertyBase);\n\t\n\tmodule.exports = PropertyColor;\n\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $, Mustache, PropertyTween, Signals, tpl_property,\n\t  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\t\n\t$ = __webpack_require__(15);\n\t\n\tSignals = __webpack_require__(13);\n\t\n\tMustache = __webpack_require__(32);\n\t\n\ttpl_property = __webpack_require__(!(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"html!../templates/propertyTween.tpl.html\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\n\t\n\tPropertyTween = (function() {\n\t  function PropertyTween(instance_property, lineData, editor, key_val, timeline) {\n\t    this.instance_property = instance_property;\n\t    this.lineData = lineData;\n\t    this.editor = editor;\n\t    this.key_val = key_val != null ? key_val : false;\n\t    this.timeline = timeline;\n\t    this.update = __bind(this.update, this);\n\t    this.onChange = __bind(this.onChange, this);\n\t    this.updateKeyTime = __bind(this.updateKeyTime, this);\n\t    this.render = __bind(this.render, this);\n\t    this.timer = this.editor.timer;\n\t    this.$time = false;\n\t    this.render();\n\t  }\n\t\n\t  PropertyTween.prototype.render = function() {\n\t    var data, self, tween, tweens, _i, _len;\n\t    self = this;\n\t    if (!this.key_val.ease) {\n\t      this.key_val.ease = \"Quad.easeOut\";\n\t    }\n\t    data = {\n\t      id: this.instance_property.name + \"_tween\",\n\t      val: this.key_val.ease,\n\t      time: this.key_val.time.toFixed(3),\n\t      options: ['Linear.easeNone'],\n\t      selected: function() {\n\t        if (this.toString() === self.key_val.ease) {\n\t          return 'selected';\n\t        } else {\n\t          return '';\n\t        }\n\t      }\n\t    };\n\t    tweens = [\"Quad\", \"Cubic\", \"Quart\", \"Quint\", \"Strong\"];\n\t    for (_i = 0, _len = tweens.length; _i < _len; _i++) {\n\t      tween = tweens[_i];\n\t      data.options.push(tween + \".easeOut\");\n\t      data.options.push(tween + \".easeIn\");\n\t      data.options.push(tween + \".easeInOut\");\n\t    }\n\t    this.$el = $(Mustache.render(tpl_property, data));\n\t    this.$time = this.$el.find('.property__key-time strong');\n\t    this.$time.keypress((function(_this) {\n\t      return function(e) {\n\t        if (e.charCode === 13) {\n\t          e.preventDefault();\n\t          _this.$time.blur();\n\t          return _this.updateKeyTime(_this.$time.text());\n\t        }\n\t      };\n\t    })(this));\n\t    this.$time.on('click', function() {\n\t      return document.execCommand('selectAll', false, null);\n\t    });\n\t    this.$el.find('select').change(this.onChange);\n\t  };\n\t\n\t  PropertyTween.prototype.updateKeyTime = function(time) {\n\t    time = parseFloat(time);\n\t    if (isNaN(time)) {\n\t      time = this.key_val.time;\n\t    }\n\t    this.$time.text(time);\n\t    this.key_val.time = time;\n\t    return this.onChange();\n\t  };\n\t\n\t  PropertyTween.prototype.onChange = function() {\n\t    var ease;\n\t    ease = this.$el.find('select').val();\n\t    this.key_val.ease = ease;\n\t    this.editor.undoManager.addState();\n\t    this.lineData._isDirty = true;\n\t    this.timeline._isDirty = true;\n\t  };\n\t\n\t  PropertyTween.prototype.update = function() {\n\t    this.$time.html(this.key_val.time.toFixed(3));\n\t  };\n\t\n\t  return PropertyTween;\n\t\n\t})();\n\t\n\tmodule.exports = PropertyTween;\n\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {\"use strict\";\n\t\n\t/* FileSaver.js\n\t * A saveAs() FileSaver implementation.\n\t * 2014-08-29\n\t *\n\t * By Eli Grey, http://eligrey.com\n\t * License: X11/MIT\n\t *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n\t */\n\t\n\t/*global self */\n\t/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\n\t\n\t/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\n\t\n\tvar saveAs = saveAs\n\t// IE 10+ (native saveAs)\n\t || (typeof navigator !== \"undefined\" && navigator.msSaveOrOpenBlob && navigator.msSaveOrOpenBlob.bind(navigator))\n\t// Everyone else\n\t || (function (view) {\n\t  \"use strict\";\n\t  // IE <10 is explicitly unsupported\n\t  if (typeof navigator !== \"undefined\" && /MSIE [1-9]\\./.test(navigator.userAgent)) {\n\t    return;\n\t  }\n\t  var doc = view.document\n\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\n\t  , get_URL = function () {\n\t    return view.URL || view.webkitURL || view;\n\t  }, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\"), can_use_save_link = \"download\" in save_link, click = function (node) {\n\t    var event = doc.createEvent(\"MouseEvents\");\n\t    event.initMouseEvent(\"click\", true, false, view, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n\t    node.dispatchEvent(event);\n\t  }, webkit_req_fs = view.webkitRequestFileSystem, req_fs = view.requestFileSystem || webkit_req_fs || view.mozRequestFileSystem, throw_outside = function (ex) {\n\t    (view.setImmediate || view.setTimeout)(function () {\n\t      throw ex;\n\t    }, 0);\n\t  }, force_saveable_type = \"application/octet-stream\", fs_min_size = 0\n\t  // See https://code.google.com/p/chromium/issues/detail?id=375297#c7 for\n\t  // the reasoning behind the timeout and revocation flow\n\t  , arbitrary_revoke_timeout = 10, revoke = function (file) {\n\t    var revoker = function () {\n\t      if (typeof file === \"string\") {\n\t        // file is an object URL\n\t        get_URL().revokeObjectURL(file);\n\t      } else {\n\t        // file is a File\n\t        file.remove();\n\t      }\n\t    };\n\t    if (view.chrome) {\n\t      revoker();\n\t    } else {\n\t      setTimeout(revoker, arbitrary_revoke_timeout);\n\t    }\n\t  }, dispatch = function (filesaver, event_types, event) {\n\t    event_types = [].concat(event_types);\n\t    var i = event_types.length;\n\t    while (i--) {\n\t      var listener = filesaver[\"on\" + event_types[i]];\n\t      if (typeof listener === \"function\") {\n\t        try {\n\t          listener.call(filesaver, event || filesaver);\n\t        } catch (ex) {\n\t          throw_outside(ex);\n\t        }\n\t      }\n\t    }\n\t  }, FileSaver = function (blob, name) {\n\t    // First try a.download, then web filesystem, then object URLs\n\t    var filesaver = this, type = blob.type, blob_changed = false, object_url, target_view, dispatch_all = function () {\n\t      dispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n\t    }\n\t    // on any filesys errors revert to saving with object URLs\n\t    , fs_error = function () {\n\t      // don't create more object URLs than needed\n\t      if (blob_changed || !object_url) {\n\t        object_url = get_URL().createObjectURL(blob);\n\t      }\n\t      if (target_view) {\n\t        target_view.location.href = object_url;\n\t      } else {\n\t        var new_tab = view.open(object_url, \"_blank\");\n\t        if (new_tab == undefined && typeof safari !== \"undefined\") {\n\t          //Apple do not allow window.open, see http://bit.ly/1kZffRI\n\t          view.location.href = object_url;\n\t        }\n\t      }\n\t      filesaver.readyState = filesaver.DONE;\n\t      dispatch_all();\n\t      revoke(object_url);\n\t    }, abortable = function (func) {\n\t      return function () {\n\t        if (filesaver.readyState !== filesaver.DONE) {\n\t          return func.apply(this, arguments);\n\t        }\n\t      };\n\t    }, create_if_not_found = { create: true, exclusive: false }, slice;\n\t    filesaver.readyState = filesaver.INIT;\n\t    if (!name) {\n\t      name = \"download\";\n\t    }\n\t    if (can_use_save_link) {\n\t      object_url = get_URL().createObjectURL(blob);\n\t      save_link.href = object_url;\n\t      save_link.download = name;\n\t      click(save_link);\n\t      filesaver.readyState = filesaver.DONE;\n\t      dispatch_all();\n\t      revoke(object_url);\n\t      return;\n\t    }\n\t    // Object and web filesystem URLs have a problem saving in Google Chrome when\n\t    // viewed in a tab, so I force save with application/octet-stream\n\t    // http://code.google.com/p/chromium/issues/detail?id=91158\n\t    // Update: Google errantly closed 91158, I submitted it again:\n\t    // https://code.google.com/p/chromium/issues/detail?id=389642\n\t    if (view.chrome && type && type !== force_saveable_type) {\n\t      slice = blob.slice || blob.webkitSlice;\n\t      blob = slice.call(blob, 0, blob.size, force_saveable_type);\n\t      blob_changed = true;\n\t    }\n\t    // Since I can't be sure that the guessed media type will trigger a download\n\t    // in WebKit, I append .download to the filename.\n\t    // https://bugs.webkit.org/show_bug.cgi?id=65440\n\t    if (webkit_req_fs && name !== \"download\") {\n\t      name += \".download\";\n\t    }\n\t    if (type === force_saveable_type || webkit_req_fs) {\n\t      target_view = view;\n\t    }\n\t    if (!req_fs) {\n\t      fs_error();\n\t      return;\n\t    }\n\t    fs_min_size += blob.size;\n\t    req_fs(view.TEMPORARY, fs_min_size, abortable(function (fs) {\n\t      fs.root.getDirectory(\"saved\", create_if_not_found, abortable(function (dir) {\n\t        var save = function () {\n\t          dir.getFile(name, create_if_not_found, abortable(function (file) {\n\t            file.createWriter(abortable(function (writer) {\n\t              writer.onwriteend = function (event) {\n\t                target_view.location.href = file.toURL();\n\t                filesaver.readyState = filesaver.DONE;\n\t                dispatch(filesaver, \"writeend\", event);\n\t                revoke(file);\n\t              };\n\t              writer.onerror = function () {\n\t                var error = writer.error;\n\t                if (error.code !== error.ABORT_ERR) {\n\t                  fs_error();\n\t                }\n\t              };\n\t              \"writestart progress write abort\".split(\" \").forEach(function (event) {\n\t                writer[\"on\" + event] = filesaver[\"on\" + event];\n\t              });\n\t              writer.write(blob);\n\t              filesaver.abort = function () {\n\t                writer.abort();\n\t                filesaver.readyState = filesaver.DONE;\n\t              };\n\t              filesaver.readyState = filesaver.WRITING;\n\t            }), fs_error);\n\t          }), fs_error);\n\t        };\n\t        dir.getFile(name, { create: false }, abortable(function (file) {\n\t          // delete file if it already exists\n\t          file.remove();\n\t          save();\n\t        }), abortable(function (ex) {\n\t          if (ex.code === ex.NOT_FOUND_ERR) {\n\t            save();\n\t          } else {\n\t            fs_error();\n\t          }\n\t        }));\n\t      }), fs_error);\n\t    }), fs_error);\n\t  }, FS_proto = FileSaver.prototype, saveAs = function (blob, name) {\n\t    return new FileSaver(blob, name);\n\t  };\n\t  FS_proto.abort = function () {\n\t    var filesaver = this;\n\t    filesaver.readyState = filesaver.DONE;\n\t    dispatch(filesaver, \"abort\");\n\t  };\n\t  FS_proto.readyState = FS_proto.INIT = 0;\n\t  FS_proto.WRITING = 1;\n\t  FS_proto.DONE = 2;\n\t\n\t  FS_proto.error = FS_proto.onwritestart = FS_proto.onprogress = FS_proto.onwrite = FS_proto.onabort = FS_proto.onerror = FS_proto.onwriteend = null;\n\t\n\t  return saveAs;\n\t}(typeof self !== \"undefined\" && self || typeof window !== \"undefined\" && window || this.content));\n\t// `self` is undefined in Firefox for Android content script context\n\t// while `this` is nsIContentFrameMessageManager\n\t// with an attribute `content` that corresponds to the window\n\t\n\tif (typeof module !== \"undefined\" && module !== null) {\n\t  module.exports = saveAs;\n\t} else if ((\"function\" !== \"undefined\" && __webpack_require__(38) !== null) && (__webpack_require__(39) != null)) {\n\t  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t    return saveAs;\n\t  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t}\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(40)(module)))\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_31__;\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_32__;\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_33__;\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar $, Mustache, PropertyBase, Signals, Utils, tpl_property, _,\n\t  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\t\n\t$ = __webpack_require__(15);\n\t\n\tSignals = __webpack_require__(13);\n\t\n\t_ = __webpack_require__(1);\n\t\n\tUtils = __webpack_require__(2);\n\t\n\tMustache = __webpack_require__(32);\n\t\n\ttpl_property = __webpack_require__(35);\n\t\n\tPropertyBase = (function() {\n\t  function PropertyBase(instance_property, lineData, editor, key_val) {\n\t    this.instance_property = instance_property;\n\t    this.lineData = lineData;\n\t    this.editor = editor;\n\t    this.key_val = key_val != null ? key_val : false;\n\t    this.update = __bind(this.update, this);\n\t    this.render = __bind(this.render, this);\n\t    this.addKey = __bind(this.addKey, this);\n\t    this.getCurrentKey = __bind(this.getCurrentKey, this);\n\t    this.onInputChange = __bind(this.onInputChange, this);\n\t    this.getCurrentVal = __bind(this.getCurrentVal, this);\n\t    this.getInputVal = __bind(this.getInputVal, this);\n\t    this.onKeyClick = __bind(this.onKeyClick, this);\n\t    this.timer = this.editor.timer;\n\t    this.keyAdded = new Signals.Signal();\n\t    this.render();\n\t    this.$key = this.$el.find('.property__key');\n\t  }\n\t\n\t  PropertyBase.prototype.onKeyClick = function(e) {\n\t    var currentValue;\n\t    e.preventDefault();\n\t    currentValue = this.getCurrentVal();\n\t    return this.addKey(currentValue);\n\t  };\n\t\n\t  PropertyBase.prototype.getInputVal = function() {\n\t    return this.$el.find('input').val();\n\t  };\n\t\n\t  PropertyBase.prototype.getCurrentVal = function() {\n\t    var prop_name, val;\n\t    val = this.instance_property.val;\n\t    prop_name = this.instance_property.name;\n\t    if (this.key_val) {\n\t      return this.key_val.val;\n\t    }\n\t    if ((this.lineData.values != null) && this.lineData.values[prop_name]) {\n\t      return this.lineData.values[prop_name];\n\t    }\n\t    return val;\n\t  };\n\t\n\t  PropertyBase.prototype.onInputChange = function(e) {\n\t    var currentTime, current_key, current_value;\n\t    current_value = this.getInputVal();\n\t    currentTime = this.timer.getCurrentTime() / 1000;\n\t    if (this.key_val) {\n\t      currentTime = this.key_val.time;\n\t    }\n\t    if (this.instance_property.keys && this.instance_property.keys.length) {\n\t      current_key = _.find(this.instance_property.keys, (function(_this) {\n\t        return function(key) {\n\t          return key.time === currentTime;\n\t        };\n\t      })(this));\n\t      if (current_key) {\n\t        current_key.val = current_value;\n\t      } else {\n\t        this.addKey(current_value);\n\t      }\n\t    } else {\n\t      this.instance_property.val = current_value;\n\t      this.lineData.values[this.instance_property.name] = current_value;\n\t      if (this.lineData.object) {\n\t        currentTime = this.timer.getCurrentTime() / 1000;\n\t        this.lineData.object.update(currentTime - this.lineData.start);\n\t      }\n\t    }\n\t    return this.lineData._isDirty = true;\n\t  };\n\t\n\t  PropertyBase.prototype.getCurrentKey = function() {\n\t    var key, time, _i, _len, _ref;\n\t    time = this.timer.getCurrentTime() / 1000;\n\t    if (!this.instance_property || !this.instance_property.keys) {\n\t      return false;\n\t    }\n\t    if (this.instance_property.keys.length === 0) {\n\t      return false;\n\t    }\n\t    _ref = this.instance_property.keys;\n\t    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t      key = _ref[_i];\n\t      if (key.time === time) {\n\t        return key;\n\t      }\n\t    }\n\t    return false;\n\t  };\n\t\n\t  PropertyBase.prototype.addKey = function(val) {\n\t    var currentTime, key;\n\t    currentTime = this.timer.getCurrentTime() / 1000;\n\t    key = {\n\t      time: currentTime,\n\t      val: val\n\t    };\n\t    this.instance_property.keys.push(key);\n\t    this.instance_property.keys = Utils.sortKeys(this.instance_property.keys);\n\t    this.lineData._isDirty = true;\n\t    return this.keyAdded.dispatch();\n\t  };\n\t\n\t  PropertyBase.prototype.render = function() {\n\t    return this.values = this.lineData.values != null ? this.lineData.values : {};\n\t  };\n\t\n\t  PropertyBase.prototype.update = function() {\n\t    var key;\n\t    key = this.getCurrentKey();\n\t    return this.$key.toggleClass('property__key--active', key);\n\t  };\n\t\n\t  return PropertyBase;\n\t\n\t})();\n\t\n\tmodule.exports = PropertyBase;\n\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = \"<div class=\\\"property property--number\\\"><button class=property__key></button><label for={{id}} class=property__label>{{label}}</label><input type=number id={{id}} class=property__input value={{val}}></div>\";\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = \"<div class=\\\"property property--number\\\"><button class=property__key></button><label for={{id}} class=property__label>{{label}}</label><input id={{id}} class=property__input value={{val}}></div>\";\n\n/***/ },\n/* 37 */,\n/* 38 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = function() { throw new Error(\"define cannot be used indirect\"); };\r\n\n\n/***/ },\n/* 39 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {module.exports = __webpack_amd_options__;\r\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, {}))\n\n/***/ },\n/* 40 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (module) {\n\t  if (!module.webpackPolyfill) {\n\t    module.deprecate = function () {};\n\t    module.paths = [];\n\t    // module.parent = undefined by default\n\t    module.children = [];\n\t    module.webpackPolyfill = 1;\n\t  }\n\t  return module;\n\t};\n\n/***/ }\n/******/ ])\n});\n\n\n\n/** WEBPACK FOOTER **\n ** TweenTime.Editor.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 63566c7c88ac5fd100de\n **/","tpl_timeline = require 'html!./templates/timeline.tpl.html'\nTimeline = require './graph/Timeline.coffee'\nPropertiesEditor = require './editor/PropertiesEditor.coffee'\nEditorMenu = require './editor/EditorMenu.coffee'\nEditorControls = require './editor/EditorControls.coffee'\nSelectionManager = require './editor/SelectionManager.coffee'\nExporter = require './editor/Exporter.coffee'\nUndoManager = require './editor/UndoManager.coffee'\n\nclass Editor\n  constructor: (@tweenTime, @options = {}) ->\n    @timer = @tweenTime.timer\n    @lastTime = -1\n\n    @$timeline = $(tpl_timeline)\n    $('body').append(@$timeline)\n    $('body').addClass('has-editor')\n\n    @selectionManager = new SelectionManager(@tweenTime)\n    @exporter = new Exporter(this)\n\n    @timeline = new Timeline(this)\n\n    @propertiesEditor = new PropertiesEditor(this, @selectionManager)\n    @propertiesEditor.keyAdded.add(@onKeyAdded)\n    @propertiesEditor.keyRemoved.add(@onKeyRemoved)\n\n    @menu = new EditorMenu(@tweenTime, @$timeline, this)\n    if @options.onMenuCreated? then @options.onMenuCreated(@$timeline.find('.timeline__menu'))\n\n    @controls = new EditorControls(@tweenTime, @$timeline)\n\n    @undoManager = new UndoManager(this)\n    # Will help resize the canvas to correct size (minus sidebar and timeline)\n    window.editorEnabled = true\n    window.dispatchEvent(new Event('resize'))\n    window.requestAnimationFrame(@update)\n\n  onKeyAdded: () =>\n    @undoManager.addState()\n    @render(false, true)\n\n  onKeyRemoved: (item) =>\n    @selectionManager.removeItem(item)\n    @undoManager.addState()\n    if @selectionManager.selection.length\n      @selectionManager.triggerSelect()\n    @render(false, true)\n\n  render: (time = false, force = false) =>\n    if time == false then time = @timer.time[0]\n    if force then @timeline._isDirty = true\n\n    @timeline.render(time, force)\n    @controls.render(time, force)\n    @propertiesEditor.render(time, force)\n\n  update: () =>\n    time = @timer.time[0]\n    time_changed = if @lastTime == time then false else true\n\n    @render(time, time_changed)\n\n    @lastTime = @timer.time[0]\n    window.requestAnimationFrame(@update)\n\nmodule.exports = Editor\n\n\n\n/** WEBPACK FOOTER **\n ** ./Editor.coffee\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}\n ** module id = 1\n ** module chunks = 0 1\n **/","class Utils\n  @formatMinutes: (d) ->\n    # convert milliseconds to seconds\n    d = d / 1000\n    hours = Math.floor(d / 3600)\n    minutes = Math.floor((d - (hours * 3600)) / 60)\n    seconds = d - (minutes * 60)\n    output = seconds + \"s\"\n    output = minutes + \"m \" + output  if minutes\n    output = hours + \"h \" + output  if hours\n    return output\n\n  @getClosestTime: (data, time, objectId = false, property_name = false, timer = false, tolerance = 0.1) ->\n    if timer\n      timer_time = timer.getCurrentTime() / 1000\n      if Math.abs(timer_time - time) <= tolerance\n        return timer_time\n\n    if objectId || property_name\n      for item in data\n        # Don't match item with itself, but allow property to match item start/end.\n        if item.id != objectId || property_name\n          # First check start & end.\n          if Math.abs(item.start - time) <= tolerance\n            return item.start\n          if Math.abs(item.end - time) <= tolerance\n            return item.end\n\n        # Test properties keys\n        for prop in item.properties\n          # Don't match property with itself.\n          if prop.keys && (item.id != objectId || prop.name != property_name)\n            for key in prop.keys\n              if Math.abs(key.time - time) <= tolerance\n                return key.time\n\n    return false\n\n  @getPreviousKey: (keys, time) ->\n    prevKey = false\n    for key in keys\n      if key.time < time\n        prevKey = key\n      else\n        return prevKey\n    return prevKey\n\n  @sortKeys: (keys) ->\n    compare = (a, b) ->\n      if a.time < b.time then return -1\n      if a.time > b.time then return 1\n      return 0\n    return keys.sort(compare)\n\n  @guid: () ->\n    s4 = () -> Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1)\n    return s4() + s4() + \"-\" + s4() + \"-\" + s4() + \"-\" + s4() + \"-\" + s4() + s4() + s4()\n\nmodule.exports = Utils\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/Utils.coffee\n **/","$ = require 'jquery'\nd3 = require 'd3'\n\nUtils = require '../core/Utils.coffee'\nHeader = require './Header.coffee'\nTimeIndicator = require './TimeIndicator.coffee'\nItems = require './Items.coffee'\nKeysPreview = require './KeysPreview.coffee'\nProperties = require './Properties.coffee'\nKeys = require './Keys.coffee'\nErrors = require './Errors.coffee'\nSelection = require './Selection.coffee'\n\nextend = (object, properties) ->\n  for key, val of properties\n    object[key] = val\n  object\n\nclass Timeline\n  constructor: (@editor) ->\n    @tweenTime = @editor.tweenTime\n    @timer = @tweenTime.timer\n    @selectionManager = @editor.selectionManager\n\n    @_isDirty = true\n    @timer = @tweenTime.timer\n    @currentTime = @timer.time #used in timeindicator.\n\n    @initialDomain = [0, 20 * 1000] # show from 0 to 20 seconds\n    margin = {top: 6, right: 20, bottom: 0, left: 265}\n    this.margin = margin\n\n    width = window.innerWidth - margin.left - margin.right\n    height = 270 - margin.top - margin.bottom - 40\n    @lineHeight = 20\n    @label_position_x = -margin.left + 20\n\n    @x = d3.time.scale().range([0, width])\n    @x.domain(@initialDomain)\n\n    @xAxis = d3.svg.axis()\n      .scale(@x)\n      .orient(\"top\")\n      .tickSize(-height, 0)\n      .tickFormat(Utils.formatMinutes)\n\n    @svg = d3.select('.timeline__main').append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", 600)\n\n    @svgContainer = @svg.append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n\n    @svgContainerTime = @svg.append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",0)\")\n\n    @linesContainer = @svg.append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + (margin.top) + \")\")\n\n    @header = new Header(@timer, @initialDomain, @tweenTime, width, margin)\n    @timeIndicator = new TimeIndicator(this, @svgContainerTime)\n\n    @selection = new Selection(this, @svg, margin)\n\n    @items = new Items(this, @linesContainer)\n    @items.onUpdate.add(@onUpdate)\n    @keysPreview = new KeysPreview(this, @linesContainer)\n\n    @properties = new Properties(this)\n    @properties.onKeyAdded.add (newKey, keyContainer) =>\n      @_isDirty = true\n      # render the timeline directly so that we can directly select\n      # the new key with it's domElement.\n      @render(0, false)\n      @keys.selectNewKey(newKey, keyContainer)\n    @errors = new Errors(this)\n    @keys = new Keys(this)\n    @keys.onKeyUpdated.add(@onUpdate)\n\n    @xAxisGrid = d3.svg.axis()\n      .scale(@x)\n      .ticks(100)\n      .tickSize(-@items.dy, 0)\n      .tickFormat(\"\")\n      .orient(\"top\")\n\n    @xGrid = @svgContainer.append('g')\n      .attr('class', 'x axis grid')\n      .attr(\"transform\", \"translate(0,\" + margin.top + \")\")\n      .call(@xAxisGrid)\n\n    @xAxisElement = @svgContainer.append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", \"translate(0,\" + margin.top + \")\")\n      .call(@xAxis)\n\n    @header.onBrush.add (extent) =>\n      @x.domain(extent)\n      @xGrid.call(@xAxisGrid)\n      @xAxisElement.call(@xAxis)\n      @_isDirty = true\n\n    # First render\n    window.requestAnimationFrame(@render)\n\n    window.onresize = () =>\n      INNER_WIDTH = window.innerWidth\n      width = INNER_WIDTH - margin.left - margin.right\n      @svg.attr(\"width\", width + margin.left + margin.right)\n      @svg.selectAll('.timeline__right-mask')\n        .attr('width', INNER_WIDTH)\n      @x.range([0, width])\n\n      @_isDirty = true\n      @header.resize(INNER_WIDTH)\n      @render()\n\n  onUpdate: () =>\n    @editor.render(false, true)\n\n  render: (time, time_changed) =>\n    if time_changed\n      # Update current domain when playing to keep time indicator in view.\n      margin_ms = 16\n      if @timer.getCurrentTime() > @initialDomain[1]\n        domainLength = @initialDomain[1] - @initialDomain[0]\n        @initialDomain[0] += domainLength - margin_ms\n        @initialDomain[1] += domainLength - margin_ms\n        @header.setDomain(@initialDomain)\n      if @timer.getCurrentTime() < @initialDomain[0]\n        domainLength = @initialDomain[1] - @initialDomain[0]\n        @initialDomain[0] = @timer.getCurrentTime()\n        @initialDomain[1] = @initialDomain[0] + domainLength\n        @header.setDomain(@initialDomain)\n\n    if @_isDirty || time_changed\n      # Render header and time indicator everytime the time changed.\n      @header.render()\n      @timeIndicator.render()\n\n    if @_isDirty\n      # No need to call this on each frames, but only on brush, key drag, ...\n      bar = @items.render()\n      @keysPreview.render(bar)\n      properties = @properties.render(bar)\n      @errors.render(properties)\n      @keys.render(properties)\n      @_isDirty = false\n\n      # Adapt the timeline height.\n      height = Math.max(@items.dy + 30, 230)\n      @xAxis.tickSize(-height, 0)\n      @xAxisGrid.tickSize(-height, 0)\n      @xGrid.call(@xAxisGrid)\n      @xAxisElement.call(@xAxis)\n      @svg.attr(\"height\", height)\n\nmodule.exports = Timeline\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Timeline.coffee\n **/","$ = require 'jquery'\n_ = require 'lodash'\nSignals = require 'js-signals'\nProperty = require '../editor/Property.coffee'\n\ntpl_propertiesEditor = require 'html!./../templates/propertiesEditor.tpl.html'\n\nclass PropertiesEditor\n  constructor: (@editor) ->\n    @timeline = @editor.timeline\n    @timer = @editor.timer\n    @selectionManager = editor.selectionManager\n\n    @$el = $(tpl_propertiesEditor)\n    @$container = @$el.find('.properties-editor__main')\n    # todo: rename keyAdded to updated\n    @keyAdded = new Signals.Signal()\n    @keyRemoved = new Signals.Signal()\n    @items = []\n\n    # Close properties by default.\n    $('body').addClass('properties-is-closed')\n    # Add the properties editor to the document.\n    $('body').append(@$el)\n\n    @selectionManager.onSelect.add(@onSelect)\n\n    # Stop event propagation to no play by accident.\n    @$el.keypress (e) -> e.stopPropagation()\n\n  onKeyAdded: () =>\n    console.log \"on key added\"\n    @keyAdded.dispatch()\n\n  onSelect: (domElement = false) =>\n    @items = []\n    @$container.empty()\n    if domElement instanceof Array\n      for element in domElement\n        @addProperty(element)\n    else\n      @addProperty(domElement)\n\n    # When selecting anything, automatically display the properties editor.\n    if @items.length then $('body').removeClass('properties-is-closed')\n\n  addProperty: (domElement) =>\n    prop = new Property(@editor, @$container, domElement)\n    prop.keyAdded.add(@onKeyAdded)\n    @items.push(prop)\n\n  render: (time, time_changed) =>\n    if !time_changed then return\n    for prop in @items\n      prop.update()\n\nmodule.exports = PropertiesEditor\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertiesEditor.coffee\n **/","saveAs = require '../bower_components/FileSaver/FileSaver.js'\n\nclass EditorMenu\n  constructor: (@tweenTime, @$timeline, @editor) ->\n    @timer = @tweenTime.timer\n\n    @initExport()\n    @initToggle()\n\n  initToggle: () ->\n    timelineClosed = false\n    $toggleLink = @$timeline.find('[data-action=\"toggle\"]')\n    $toggleLink.click (e) =>\n      e.preventDefault()\n      timelineClosed = !timelineClosed\n      $toggleLink.toggleClass('menu-item--toggle-up', timelineClosed)\n      $('body').toggleClass('timeline-is-closed', timelineClosed)\n      window.dispatchEvent(new Event('resize'))\n\n    $toggleLinkSide = $('.properties-editor').find('[data-action=\"toggle\"]')\n    $toggleLinkSide.click (e) =>\n      e.preventDefault()\n      propertiesClosed = !$('body').hasClass('properties-is-closed')\n      $('body').toggleClass('properties-is-closed', propertiesClosed)\n\n      window.dispatchEvent(new Event('resize'))\n\n  initExport: () ->\n    self = this\n    exporter = @editor.exporter\n\n    @$timeline.find('[data-action=\"export\"]').click (e) ->\n      e.preventDefault()\n      data = exporter.getJSON()\n      blob = new Blob([data], {\"type\": \"text/json;charset=utf-8\"})\n      saveAs(blob, 'data.json')\n\nmodule.exports = EditorMenu\n\n\n/** WEBPACK FOOTER **\n ** ./editor/EditorMenu.coffee\n **/","class EditorControls\n  constructor: (@tweenTime, @$timeline) ->\n    @timer = @tweenTime.timer\n    @$time = @$timeline.find('.control--time')\n    @$time_end = @$timeline.find('.control--time-end')\n    @initControls()\n\n    @$time_end.val(@tweenTime.timer.getDuration())\n\n    $(document).keypress (e) =>\n      console.log e\n      if e.charCode == 32\n        # Space\n        @playPause()\n\n  playPause: () =>\n    @timer.toggle()\n    $play_pause = @$timeline.find('.control--play-pause')\n    $play_pause.toggleClass('icon-pause', @timer.is_playing)\n    $play_pause.toggleClass('icon-play', !@timer.is_playing)\n\n  initControls: () ->\n    $play_pause = @$timeline.find('.control--play-pause')\n    $play_pause.click (e) =>\n      e.preventDefault()\n      @playPause()\n\n    $bt_first = @$timeline.find('.control--first')\n    $bt_first.click (e) =>\n      e.preventDefault()\n      @timer.seek([0])\n\n    $bt_last = @$timeline.find('.control--last')\n    $bt_last.click (e) =>\n      e.preventDefault()\n      total = @tweenTime.getTotalDuration()\n      @timer.seek([total * 1000])\n\n    @$time.change (e) =>\n      seconds = parseFloat(@$time.val(), 10) * 1000\n      @timer.seek([seconds])\n\n    @$time_end.change (e) =>\n      seconds = parseFloat(@$time_end.val(), 10)\n      @timer.setDuration(seconds)\n\n  render: (time, time_changed) =>\n    if time_changed\n      seconds = time / 1000\n      @$time.val(seconds.toFixed(3))\n\nmodule.exports = EditorControls\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/EditorControls.coffee\n **/","d3 = require 'd3'\nSignals = require 'js-signals'\nUtils = require '../core/Utils.coffee'\n\nclass SelectionManager\n  constructor: (@tweenTime) ->\n    @selection = []\n    @onSelect = new Signals.Signal()\n\n  removeDuplicates: () =>\n    result = []\n    for item in @selection\n      found = false\n      for item2 in result\n        if item.isEqualNode(item2)\n          found = true\n          break\n      if found == false then result.push(item)\n\n    @selection = result\n\n  removeItem: (item) =>\n    index = @selection.indexOf(item)\n    if index > -1\n      @selection.splice(index, 1)\n\n  sortSelection: () =>\n    compare = (a, b) ->\n      if !a.__data__ || !b.__data__ then return 0\n      if a.__data__.time < b.__data__.time then return -1\n      if a.__data__.time > b.__data__.time then return 1\n      return 0\n    @selection = @selection.sort(compare)\n\n  reset: () =>\n    @selection = []\n    @highlightItems()\n    @onSelect.dispatch(@selection, false)\n\n  triggerSelect: () =>\n    @onSelect.dispatch(@selection, false)\n\n  select: (item, addToSelection = false) ->\n    if !addToSelection then @selection = []\n    if item instanceof Array\n      for el in item\n        @selection.push(el)\n    else\n      @selection.push(item)\n\n    @removeDuplicates()\n    @highlightItems()\n    @sortSelection()\n    @onSelect.dispatch(@selection, addToSelection)\n\n  getSelection: () =>\n    return @selection\n\n  highlightItems: () ->\n    d3.selectAll('.bar--selected').classed('bar--selected', false)\n    d3.selectAll('.key--selected').classed('key--selected', false)\n\n    for item in @selection\n      d3item = d3.select(item)\n      if d3item.classed('bar')\n        d3item.classed('bar--selected', true)\n      else if d3item.classed('key')\n        d3item.classed('key--selected', true)\n\nmodule.exports = SelectionManager\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/SelectionManager.coffee\n **/","class Exporter\n  constructor: (@editor) ->\n\n  getData: () =>\n    tweenTime = @editor.tweenTime\n    domain = @editor.timeline.x.domain()\n    domain_start = domain[0]\n    domain_end = domain[1]\n\n    return {\n      settings: {\n        time: tweenTime.timer.getCurrentTime(),\n        duration: tweenTime.timer.getDuration(),\n        domain: [domain_start.getTime(), domain_end.getTime()]\n      },\n      data: tweenTime.data\n    }\n\n  getJSON: () =>\n    options = @editor.options\n    json_replacer = (key, val) ->\n      # Disable all private properies from TweenMax/TimelineMax\n      if key.indexOf('_') == 0 then return undefined\n      if options.json_replacer? then return options.json_replacer(key, val)\n      return val\n\n    data = @getData()\n    json = JSON.stringify(data, json_replacer, 2)\n    return json\n\nmodule.exports = Exporter\n\n\n/** WEBPACK FOOTER **\n ** ./editor/Exporter.coffee\n **/","$ = require 'jquery'\n\nclass UndoManager\n  constructor: (@editor) ->\n    @history_max = 100\n    @history = []\n    @current_index = 0\n    # Add the initial state\n    @addState()\n\n    $(document).keydown (e) =>\n      if e.keyCode == 90\n        if e.metaKey || e.ctrlKey\n          if !e.shiftKey\n            # (command | ctrl) Z\n            @undo()\n          else\n            # (command | ctrl) shift Z\n            @redo()\n\n  undo: () =>\n    # If there is no more history return\n    if @current_index <= 0 then return false\n    @current_index -= 1\n    @setState(@current_index)\n\n  redo: () =>\n    # Stop if there is no more things.\n    if @current_index >= @history.length - 1 then return false\n    @current_index += 1\n    @setState(@current_index)\n\n  addState: () =>\n    data = JSON.parse(@editor.exporter.getJSON())\n\n    # if we did some undo before and then edit something,\n    # we want to remove all actions past the current index first.\n    if @current_index + 1 < @history.length\n      @history.splice(@current_index + 1, @history.length - 1)\n\n    @history.push(data)\n\n    # Keep history to a max size by removing the first element if needed.\n    if @history.length > @history_max then @history.shift()\n\n    # Set the current index\n    @current_index = @history.length - 1\n\n  setState: (index) =>\n    state = @history[index]\n    data = state.data\n    tweenTime = @editor.tweenTime\n\n    #tweenTime.data = data\n    # naively copy keys and values from previous state\n    for item, item_key in data\n      # if item is not defined copy it\n      if !tweenTime.data[item_key]\n        tweenTime.data[item_key] = item\n      else\n        for prop, prop_key in item.properties\n          # if property is not defined copy it\n          if !tweenTime.data[item_key].properties[prop_key]\n            tweenTime.data[item_key].properties[prop_key] = prop\n          else\n            # set property keys\n            keys = tweenTime.data[item_key].properties[prop_key].keys\n            for key, key_key in prop.keys\n              if !keys[key_key]\n                keys[key_key] = key\n              else\n                keys[key_key].time = key.time\n                keys[key_key].val = key.val\n                keys[key_key].ease = key.ease\n            #tweenTime.data[item_key].properties[prop_key].keys = prop.keys\n\n      tweenTime.data[item_key]._isDirty = true\n\n    @editor.render(false, true)\n\nmodule.exports = UndoManager\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/UndoManager.coffee\n **/","module.exports = \"<div class=timeline><nav class=timeline__menu><a href=# class=menu-item data-action=export>Export</a> <a href=# class=\\\"menu-item menu-item--toggle\\\" data-action=toggle><i class=icon-toggle></i></a></nav><div class=\\\"timeline__controls controls\\\"><a href=# class=\\\"control control--first icon-first\\\"></a> <a href=# class=\\\"control control--play-pause icon-play\\\"></a> <a href=# class=\\\"control control--last icon-last\\\"></a><input class=\\\"control control--input control--time\\\"><span class=control__time-separator>/</span><input class=\\\"control control--input control--time-end\\\"></div><div class=timeline__header></div><div class=timeline__main></div></div>\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** /Users/david/Sites/TweenTime/~/html-loader!./templates/timeline.tpl.html\n ** module id = 12\n ** module chunks = 1\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_13__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"signals\",\"commonjs\":\"./signals\",\"amd\":\"signals\"}\n ** module id = 13\n ** module chunks = 0 1\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_15__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"$\",\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\"}\n ** module id = 15\n ** module chunks = 1\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_16__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"d3\"\n ** module id = 16\n ** module chunks = 1\n **/","$ = require 'jquery'\nd3 = require 'd3'\n\nSignals = require 'js-signals'\nUtils = require '../core/Utils.coffee'\n\nclass Header\n  constructor: (@timer, @initialDomain, @tweenTime, width, margin) ->\n    @onBrush = new Signals.Signal()\n    @margin = {top: 10, right: 20, bottom: 0, left: margin.left}\n    @height = 50 - @margin.top - @margin.bottom + 20\n\n    @currentTime = @timer.time\n    @x = d3.time.scale().range([0, width])\n    @x.domain([0, @timer.totalDuration])\n\n    # Same as @x from timeline\n    @xDisplayed = d3.time.scale().range([0, width])\n    @xDisplayed.domain(@initialDomain)\n\n    @xAxis = d3.svg.axis()\n      .scale(@x)\n      .orient(\"top\")\n      .tickSize(-5, 0)\n      .tickFormat(Utils.formatMinutes)\n\n    @svg = d3.select('.timeline__header').append(\"svg\")\n      .attr(\"width\", width + @margin.left + @margin.right)\n      .attr(\"height\", 56)\n    @svgContainer = @svg.append(\"g\")\n      .attr(\"transform\", \"translate(\" + @margin.left + \",\" + @margin.top + \")\")\n\n    @createBrushHandle()\n    @createTimeHandle()\n    @timer.durationChanged.add(@onDurationChanged)\n\n  adaptDomainToDuration: (domain, seconds) =>\n    ms = seconds * 1000\n    new_domain = [domain[0], domain[1]]\n    # Make the domain smaller or equal to ms.\n    new_domain[0] = Math.min(new_domain[0], ms)\n    new_domain[1] = Math.min(new_domain[1], ms)\n    # Should not go below 0.\n    new_domain[0] = Math.max(new_domain[0], 0)\n\n    return new_domain\n\n  setDomain: (domain) =>\n    @brush.x(@x).extent(@initialDomain)\n    @svgContainer.select('.brush').call(@brush)\n    # Same as onBrush\n    @onBrush.dispatch(@initialDomain)\n    @render()\n    @xDisplayed.domain(@initialDomain)\n\n  onDurationChanged: (seconds) =>\n    @x.domain([0, @timer.totalDuration])\n    @xAxisElement.call(@xAxis)\n    @initialDomain = @adaptDomainToDuration(@initialDomain, seconds)\n    @setDomain(@initialDomain)\n\n  createBrushHandle: () =>\n    @xAxisElement = @svgContainer.append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", \"translate(0,\" + (@margin.top + 7) + \")\")\n      .call(@xAxis)\n\n    onBrush = () =>\n      extent0 = @brush.extent()\n      # Get domain as milliseconds and not date.\n      start = extent0[0].getTime()\n      end = extent0[1].getTime()\n      # Set the initial domain.\n      @initialDomain[0] = start\n      @initialDomain[1] = end\n      @setDomain(@initialDomain)\n\n    @brush = d3.svg.brush()\n      .x(@x)\n      .extent(@initialDomain)\n      .on(\"brush\", onBrush)\n\n    @gBrush = @svgContainer.append(\"g\")\n      .attr(\"class\", \"brush\")\n      .call(@brush)\n      .selectAll(\"rect\")\n      .attr('height', 20)\n\n  render: () =>\n    timeSelection = @svgContainer.selectAll('.time-indicator')\n    timeSelection.attr('transform', 'translate(' + (@xDisplayed(@currentTime[0])) + ', 25)')\n\n  createTimeHandle: () =>\n    self = this\n\n    dragTimeMove = (d) ->\n      event = d3.event.sourceEvent\n      event.stopPropagation()\n      tweenTime = self.tweenTime\n      event_x = if event.x? then event.x else event.clientX\n      dx = self.xDisplayed.invert(event_x - self.margin.left)\n      dx = dx.getTime()\n      dx = Math.max(0, dx)\n\n      timeMatch = false\n      if event.shiftKey\n        time = dx / 1000\n        timeMatch = Utils.getClosestTime(tweenTime.data, time, '---non-existant')\n        if timeMatch != false then timeMatch = timeMatch * 1000\n      if timeMatch == false\n        timeMatch = dx\n      self.timer.seek([timeMatch])\n\n    dragTime = d3.behavior.drag()\n      .origin((d) -> return d;)\n      .on(\"drag\", dragTimeMove)\n\n    timeSelection = @svgContainer.selectAll('.time-indicator').data(@currentTime)\n\n    timeClicker = timeSelection.enter().append('rect')\n      .attr('x', 0)\n      .attr('y', 20)\n      .attr('width', self.xDisplayed(self.timer.totalDuration))\n      .attr('height', 50)\n      .attr('fill-opacity', 0)\n      .on('click', (d) ->\n        mouse = d3.mouse(this)\n        dx = self.xDisplayed.invert(mouse[0])\n        dx = dx.getTime()\n        dx = Math.max(0, dx)\n        self.timer.seek([dx])\n      )\n\n    timeGrp = timeSelection.enter().append(\"g\")\n      .attr('class', \"time-indicator\")\n      .attr(\"transform\", \"translate(-0.5,\" + 30 + \")\")\n      .call(dragTime)\n    timeGrp.append('rect')\n      .attr('class', 'time-indicator__line')\n      .attr('x', -0.5)\n      .attr('y', 0)\n      .attr('width', 1)\n      .attr('height', 1000)\n    timeGrp.append('path')\n      .attr('class', 'time-indicator__handle')\n      .attr('d', 'M -5 -3 L -5 5 L 0 10 L 5 5 L 5 -3 L -5 -3')\n\n    # Mask time indicator\n    # todo: remove the mask.\n    @svgContainer.append(\"rect\")\n      .attr(\"class\", \"graph-mask\")\n      .attr(\"x\", -self.margin.left)\n      .attr(\"y\", -self.margin.top)\n      .attr(\"width\", self.margin.left - 5)\n      .attr(\"height\", self.height)\n\n  resize: (width) =>\n    width = width - @margin.left - @margin.right\n    @svg.attr(\"width\", width + @margin.left + @margin.right)\n\n\n    @x.range([0, width])\n    @xDisplayed.range([0, width])\n    @xAxisElement.call(@xAxis)\n\nmodule.exports = Header\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Header.coffee\n **/","$ = require 'jquery'\nd3 = require 'd3'\nSignals = require 'js-signals'\n\nclass TimeIndicator\n  constructor: (@timeline, @container) ->\n    @timeSelection = @container.selectAll('.time-indicator').data(@timeline.currentTime)\n    timeGrp = @timeSelection.enter().append(\"svg\")\n      .attr('class', \"time-indicator timeline__right-mask\")\n      .attr('width', window.innerWidth - @timeline.label_position_x)\n      .attr('height', 442)\n\n    @timeSelection = timeGrp.append('rect')\n      .attr('class', 'time-indicator__line')\n      .attr('x', -1)\n      .attr('y', -@timeline.margin.top - 5)\n      .attr('width', 1)\n      .attr('height', 1000)\n\n  render: () =>\n    @timeSelection = @container.selectAll('.time-indicator rect')\n    @timeSelection.attr('x', @timeline.x(@timeline.currentTime[0]) - 0.5)\n\nmodule.exports = TimeIndicator\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/TimeIndicator.coffee\n **/","d3 = require 'd3'\nSignals = require 'js-signals'\n_ = require 'lodash'\nUtils = require '../core/Utils.coffee'\n\nclass Items\n  constructor: (@timeline, @container) ->\n    @dy = 10 + @timeline.margin.top\n    @onUpdate = new Signals.Signal()\n\n  render: () =>\n    self = this\n    tweenTime = self.timeline.tweenTime\n\n    selectBar = (d) ->\n      self.timeline.selectionManager.select(this)\n\n    dragmove = (d) ->\n      dx = self.timeline.x.invert(d3.event.x).getTime() / 1000\n      diff = (dx - d.start)\n      d.start += diff\n      d.end += diff\n      if d.properties\n        for prop in d.properties\n          for key in prop.keys\n            key.time += diff\n\n      d._isDirty = true\n      self.onUpdate.dispatch()\n\n    dragmoveLeft = (d) ->\n      d3.event.sourceEvent.stopPropagation()\n      sourceEvent = d3.event.sourceEvent\n      dx = self.timeline.x.invert(d3.event.x).getTime() / 1000\n      timeMatch = false\n\n      if sourceEvent.shiftKey\n        timeMatch = Utils.getClosestTime(tweenTime.data, dx, d.id, false, tweenTime.timer)\n      if !timeMatch\n        diff = (dx - d.start)\n        timeMatch = d.start + diff\n\n      d.start = timeMatch\n      d._isDirty = true\n      self.onUpdate.dispatch()\n\n    dragmoveRight = (d) ->\n      d3.event.sourceEvent.stopPropagation()\n      sourceEvent = d3.event.sourceEvent\n      dx = self.timeline.x.invert(d3.event.x).getTime() / 1000\n      timeMatch = false\n      if sourceEvent.shiftKey\n        timeMatch = Utils.getClosestTime(tweenTime.data, dx, false, false, tweenTime.timer)\n      if !timeMatch\n        diff = (dx - d.end)\n        timeMatch = d.end + diff\n\n      d.end = timeMatch\n      d._isDirty = true\n      self.onUpdate.dispatch()\n\n    dragLeft = d3.behavior.drag()\n      .origin((d) ->\n        t = d3.select(this)\n        return {x: t.attr('x'), y: t.attr('y')})\n      .on(\"drag\", dragmoveLeft)\n\n    dragRight = d3.behavior.drag()\n      .origin((d) ->\n        t = d3.select(this)\n        return {x: t.attr('x'), y: t.attr('y')})\n      .on(\"drag\", dragmoveRight)\n\n    drag = d3.behavior.drag()\n      .origin((d) ->\n        t = d3.select(this)\n        return {x: t.attr('x'), y: t.attr('y')})\n      .on(\"drag\", dragmove)\n\n    bar_border = 1\n    bar = @container.selectAll(\".line-grp\")\n      .data(@timeline.tweenTime.data, (d) -> d.id)\n\n    barEnter = bar.enter()\n      .append('g').attr('class', 'line-grp')\n\n    barContainerRight = barEnter.append('svg')\n      .attr('class', 'timeline__right-mask')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight)\n\n    barContainerRight.append(\"rect\")\n      .attr(\"class\", \"bar\")\n      # Add a unique id for SelectionManager.removeDuplicates\n      .attr('id', (d) -> Utils.guid())\n      .attr(\"y\", 3)\n      .attr(\"height\", 14)\n\n    barContainerRight.append(\"rect\")\n      .attr(\"class\", \"bar-anchor bar-anchor--left\")\n      .attr(\"y\", 2)\n      .attr(\"height\", 16)\n      .attr(\"width\", 6)\n      .call(dragLeft)\n\n    barContainerRight.append(\"rect\")\n      .attr(\"class\", \"bar-anchor bar-anchor--right\")\n      .attr(\"y\", 2)\n      .attr(\"height\", 16)\n      .attr(\"width\", 6)\n      .call(dragRight)\n\n    self.dy = 10 + @timeline.margin.top\n    bar.attr \"transform\", (d, i) ->\n      y = self.dy\n      self.dy += self.timeline.lineHeight\n      if !d.collapsed\n        numProperties = 0\n        if d.properties\n          # only show properties with keys\n          visibleProperties = _.filter(d.properties, (prop) -> prop.keys.length)\n          numProperties = visibleProperties.length\n        self.dy += numProperties * self.timeline.lineHeight\n\n      return \"translate(0,\" + y + \")\"\n\n    barWithStartAndEnd = (d) ->\n      if d.start? && d.end? then return true\n      return false\n\n    bar.selectAll('.bar-anchor--left')\n      .filter(barWithStartAndEnd)\n      .attr(\"x\", (d) -> return self.timeline.x(d.start * 1000) - 1)\n      .on('mousedown', () ->\n        # Don't trigger mousedown on linescontainer else\n        # it create the selection rectangle\n        d3.event.stopPropagation()\n      )\n\n    bar.selectAll('.bar-anchor--right')\n      .filter(barWithStartAndEnd)\n      .attr(\"x\", (d) -> return self.timeline.x(d.end * 1000) - 1)\n      .on('mousedown', () ->\n        # Don't trigger mousedown on linescontainer else\n        # it create the selection rectangle\n        d3.event.stopPropagation()\n      )\n\n    bar.selectAll('.bar')\n      .filter(barWithStartAndEnd)\n      .attr(\"x\", (d) -> return self.timeline.x(d.start * 1000) + bar_border)\n      .attr(\"width\", (d) ->\n        return Math.max(0, (self.timeline.x(d.end) - self.timeline.x(d.start)) * 1000 - bar_border)\n      )\n      .call(drag)\n      .on(\"click\", selectBar)\n      .on('mousedown', () ->\n        # Don't trigger mousedown on linescontainer else\n        # it create the selection rectangle\n        d3.event.stopPropagation()\n      )\n\n    barEnter.append(\"text\")\n      .attr(\"class\", \"line-label\")\n      .attr(\"x\", self.timeline.label_position_x + 10)\n      .attr(\"y\", 16)\n      .text((d) -> d.label)\n      .on('click', selectBar)\n      .on('mousedown', () ->\n        # Don't trigger mousedown on linescontainer else\n        # it create the selection rectangle\n        d3.event.stopPropagation()\n      )\n\n    self = this\n    barEnter.append(\"text\")\n      .attr(\"class\", \"line__toggle\")\n      .attr(\"x\", self.timeline.label_position_x - 10)\n      .attr(\"y\", 16)\n      .on 'click', (d) ->\n        d.collapsed = !d.collapsed\n        self.onUpdate.dispatch()\n\n    bar.selectAll(\".line__toggle\")\n      .text((d) -> if d.collapsed then \"▸\" else\"▾\")\n\n    barEnter.append(\"line\")\n      .attr(\"class\", 'line-separator')\n      .attr(\"x1\", -self.timeline.margin.left)\n      .attr(\"x2\", self.timeline.x(self.timeline.timer.totalDuration + 100))\n      .attr(\"y1\", self.timeline.lineHeight)\n      .attr(\"y2\", self.timeline.lineHeight)\n\n    bar.exit().remove()\n\n    return bar\n\nmodule.exports = Items\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Items.coffee\n **/","d3 = require 'd3'\n\nclass KeysPreview\n  constructor: (@timeline, @container) ->\n\n  render: (bar) =>\n    self = this\n    tweenTime = self.timeline.tweenTime\n\n    propVal = (d,i) -> if d.properties then d.properties else []\n    propKey = (d) -> d.name\n\n    properties = bar.selectAll('.keys-preview').data(propVal, propKey)\n\n    subGrp = properties.enter()\n      .append('svg')\n      .attr(\"class\", 'keys-preview timeline__right-mask')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight)\n\n    setItemStyle = (d) ->\n      item = d3.select(this.parentNode.parentNode)\n      bar_data = item.datum()\n      if bar_data.collapsed == true then return \"\"\n      # Show only when item is collapsed\n      return \"display: none;\"\n\n    properties.selectAll('.key--preview')\n      .attr(\"style\", setItemStyle)\n\n    keyValue = (d,i,j) -> d.keys\n    keyKey = (d, k) -> d.time\n    keys = properties.selectAll('.key--preview').data(keyValue, keyKey)\n\n    key_item = keys.enter()\n      .append('path')\n      .attr('class', 'key--preview')\n      .attr(\"style\", setItemStyle)\n      .attr('d', 'M 0 -4 L 4 0 L 0 4 L -4 0')\n\n    keys.attr('transform', (d) ->\n        dx = self.timeline.x(d.time * 1000)\n        dx = parseInt(dx, 10)\n        dy = 11\n        return \"translate(\" + dx + \",\" + dy + \")\"\n      )\n\n    keys.exit().remove()\n\nmodule.exports = KeysPreview\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/KeysPreview.coffee\n **/","d3 = require 'd3'\nSignals = require 'js-signals'\nUtils = require '../core/Utils.coffee'\n\nclass Properties\n  constructor: (@timeline) ->\n    @onKeyAdded = new Signals.Signal()\n    @subGrp = false\n\n  render: (bar) ->\n    self = this\n\n    propVal = (d,i) -> if d.properties then d.properties else []\n    propKey = (d) -> d.name\n    visibleProperties = (d) -> d.keys.length\n\n    properties = bar.selectAll('.line-item').data(propVal, propKey)\n\n    dy = 0\n    subGrp = properties.enter()\n      .append('g')\n      .filter(visibleProperties)\n      .attr(\"class\", 'line-item')\n\n    # Save subGrp in a variable for use in Errors.coffee\n    self.subGrp = subGrp\n\n    properties.filter(visibleProperties)\n      .attr \"transform\", (d, i) ->\n        sub_height = (i + 1) * self.timeline.lineHeight\n        return \"translate(0,\" + sub_height + \")\"\n\n    subGrp.append('rect')\n      .attr('class', 'click-handler click-handler--property')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', self.timeline.x(self.timeline.timer.totalDuration + 100))\n      .attr('height', self.timeline.lineHeight)\n      .on 'dblclick', (d) ->\n        lineObject = this.parentNode.parentNode\n        lineValue = d3.select(lineObject).datum()\n        def = if d.default then d.default else 0\n        mouse = d3.mouse(this)\n        dx = self.timeline.x.invert(mouse[0])\n        dx = dx.getTime() / 1000\n        prevKey = Utils.getPreviousKey(d.keys, dx)\n        # set the value to match the previous key if we found one\n        if prevKey then def = prevKey.val\n        newKey = {time: dx, val: def}\n        d.keys.push(newKey)\n        # Sort the keys for tweens creation\n        d.keys = Utils.sortKeys(d.keys)\n\n        lineValue._isDirty = true\n        keyContainer = this.parentNode\n        self.onKeyAdded.dispatch(newKey, keyContainer)\n\n    # Mask\n    subGrp.append('svg')\n      .attr('class','line-item__keys timeline__right-mask')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight)\n      .attr('fill', '#f00')\n\n    subGrp.append('text')\n      .attr(\"class\", \"line-label line-label--small\")\n      .attr(\"x\", self.timeline.label_position_x + 10)\n      .attr(\"y\", 15)\n      .text (d) ->\n        d.name\n\n    subGrp.append(\"line\")\n      .attr(\"class\", 'line-separator--secondary')\n      .attr(\"x1\", -self.timeline.margin.left)\n      .attr(\"x2\", self.timeline.x(self.timeline.timer.totalDuration + 100))\n      .attr(\"y1\", self.timeline.lineHeight)\n      .attr(\"y2\", self.timeline.lineHeight)\n\n    bar.selectAll('.line-item').attr('display', (d) ->\n        lineObject = this.parentNode\n        lineValue = d3.select(lineObject).datum()\n        return if !lineValue.collapsed then \"block\" else \"none\"\n      )\n\n    return properties\n\nmodule.exports = Properties\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Properties.coffee\n **/","d3 = require 'd3'\nSignals = require 'js-signals'\nUtils = require '../core/Utils.coffee'\n_ = require 'lodash'\n\nclass Keys\n  constructor: (@timeline) ->\n    #@selectionManager = @timeline.editor.selectionManager\n    @onKeyUpdated = new Signals.Signal()\n\n  selectNewKey: (data, container) ->\n    self = this\n    key = d3.select(container).selectAll('.key').filter((item) ->\n      return item.time == data.time\n    )\n    if key.length\n      d3.selectAll('.key--selected').classed('key--selected', false)\n      key.classed('key--selected', true)\n      key = key[0][0]\n      self.timeline.selectionManager.select(key)\n\n  render: (properties) ->\n    self = this\n    tweenTime = self.timeline.tweenTime\n\n    dragmove = (d) ->\n      sourceEvent = d3.event.sourceEvent\n      propertyObject = this.parentNode\n      lineObject = propertyObject.parentNode.parentNode\n      propertyData = d3.select(propertyObject).datum()\n      lineData = d3.select(lineObject).datum()\n\n      currentDomainStart = self.timeline.x.domain()[0]\n      mouse = d3.mouse(this)\n      old_time = d.time\n      dx = self.timeline.x.invert(mouse[0])\n      dx = dx.getTime()\n      dx = dx / 1000 - currentDomainStart / 1000\n      dx = d.time + dx\n\n      selection = self.timeline.selectionManager.getSelection()\n      selection_first_time = false\n      selection_last_time = false\n      if selection.length\n        selection_first_time = d3.select(selection[0]).datum().time\n        selection_last_time = d3.select(selection[selection.length - 1]).datum().time\n      selection = _.filter(selection, (item) => item.isEqualNode(this) == false)\n\n      timeMatch = false\n      if sourceEvent.shiftKey\n        timeMatch = Utils.getClosestTime(tweenTime.data, dx, lineData.id, propertyData.name, tweenTime.timer)\n      if timeMatch == false\n        timeMatch = dx\n\n      d.time = timeMatch\n      # Sort the keys of the current selected item.\n      propertyData.keys = Utils.sortKeys(propertyData.keys)\n      time_offset = d.time - old_time\n\n\n      updateKeyItem = (item) ->\n        itemPropertyObject = item.parentNode\n        itemPropertyData = d3.select(itemPropertyObject).datum()\n        itemLineObject = itemPropertyObject.parentNode.parentNode\n        itemLineData = d3.select(itemLineObject).datum()\n        itemLineData._isDirty = true\n        itemPropertyData.keys = Utils.sortKeys(itemPropertyData.keys)\n\n      key_scale = false\n      is_first = false\n      if selection.length\n        if sourceEvent.altKey && selection_first_time? && selection_last_time?\n          # keys scaling.\n          is_first = selection_first_time == old_time\n          if is_first\n            key_scale = (selection_last_time - d.time) / (selection_last_time - old_time)\n          else\n            key_scale = (d.time - selection_first_time) / (old_time - selection_first_time)\n\n        for item in selection\n          data = d3.select(item).datum()\n          if key_scale == false\n            data.time += time_offset\n          else\n            if is_first\n              data.time = selection_last_time - (selection_last_time - data.time) * key_scale\n            else\n              data.time = selection_first_time + (data.time - selection_first_time) * key_scale\n          updateKeyItem(item)\n\n      lineData._isDirty = true\n      self.onKeyUpdated.dispatch()\n\n    propValue = (d,i,j) -> d.keys\n    propKey = (d, k) ->\n      # Add a unique id for SelectionManager.removeDuplicates\n      # and use it as key.\n      if !d._id then d._id = Utils.guid()\n      return d._id\n    keys = properties.select('.line-item__keys').selectAll('.key').data(propValue, propKey)\n\n    # selectKey is triggered by dragstart event\n    selectKey = (d) ->\n      event = d3.event\n      # with dragstart event the mousevent is is inside the event.sourcEvent\n      if event.sourceEvent then event = event.sourceEvent\n\n      addToSelection = event.shiftKey\n      # if element is already selectionned and we are on\n      # the dragstart event, we stop there since it is already selected.\n      if d3.event.type && d3.event.type == \"dragstart\"\n        if d3.select(this).classed('key--selected')\n          return\n\n      self.timeline.selectionManager.select(this, addToSelection)\n\n    dragend = (d) =>\n      self.timeline.editor.undoManager.addState()\n\n    drag = d3.behavior.drag()\n      .origin((d) -> return d;)\n      .on(\"drag\", dragmove)\n      .on(\"dragstart\", selectKey)\n      .on(\"dragend\", dragend)\n\n    key_grp = keys.enter()\n      .append('g')\n      .attr('class', 'key')\n      # Use the unique id added in propKey above for the dom element id.\n      .attr('id', (d) -> d._id)\n      .on('mousedown', () ->\n        # Don't trigger mousedown on linescontainer else\n        # it create the selection rectangle\n        d3.event.stopPropagation()\n      )\n      .call(drag)\n\n    properties.selectAll('.key')\n\n      .attr('class', (d) ->\n        cls = 'key'\n        # keep selected class\n        if d3.select(this).classed('key--selected')\n          cls += \" key--selected\"\n        if d.ease\n          ease = d.ease.split('.')\n          if ease.length == 2\n            cls += \" \" + ease[1]\n        else\n          # If no easing specified, the it's the default Quad.easeOut\n          cls += ' easeOut'\n        return cls\n      )\n\n    grp_linear = key_grp.append('g')\n      .attr('class', 'ease-linear')\n    grp_linear.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L 6 0 L 0 6')\n    grp_linear.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L -6 0 L 0 6')\n\n    grp_in = key_grp.append('g')\n      .attr('class', 'ease-in')\n    grp_in.append('path')\n      .attr('class', 'key__shape-rect')\n      .attr('d', 'M 0 -6 L 0 6 L 4 5 L 1 0 L 4 -5')\n    grp_in.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L -6 0 L 0 6')\n\n    grp_out = key_grp.append('g')\n      .attr('class', 'ease-out')\n    grp_out.append('path')\n      .attr('class', 'key__shape-rect')\n      .attr('d', 'M 0 -6 L 0 6 L -4 5 L -1 0 L -4 -5')\n    grp_out.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L 6 0 L 0 6')\n\n    grp_inout = key_grp.append('g')\n      .attr('class', 'ease-inout')\n    grp_inout.append('circle')\n      .attr('cx', 0)\n      .attr('cy', 0)\n      .attr('r', 5)\n\n    keys.attr 'transform', (d) ->\n      dx = self.timeline.x(d.time * 1000)\n      dx = parseInt(dx, 10)\n      dy = 10\n      return \"translate(\" + dx + \",\" + dy + \")\"\n\n    keys.exit().remove()\n\nmodule.exports = Keys\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Keys.coffee\n **/","d3 = require 'd3'\nSignals = require 'js-signals'\nUtils = require '../core/Utils.coffee'\n\nclass Errors\n  constructor: (@timeline) ->\n\n  render: (properties) ->\n    self = this\n    subGrp = self.timeline.properties.subGrp\n    propertiesWithError = (d) -> d.errors?\n    # use insert with :first-child to prepend.\n    errorsGrp = subGrp.insert('svg', ':first-child')\n      .attr('class','line-item__errors')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight)\n    errorsValue = (d,i,j) -> d.errors\n    errorTime = (d, k) -> d.time\n    errors = properties.filter(propertiesWithError).select('.line-item__errors').selectAll('.error').data(errorsValue, errorTime)\n    errors.enter().append('rect')\n      .attr('class', 'error')\n      .attr('width', 4)\n      .attr('height', self.timeline.lineHeight - 1)\n      .attr('y', '1')\n\n    properties.selectAll('.error')\n      .attr 'x', (d) ->\n        dx = self.timeline.x(d.time * 1000)\n        return dx\n\n    errors.exit().remove()\n\nmodule.exports = Errors\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Errors.coffee\n **/","class Selection\n  constructor: (@timeline, @svg, @margin) ->\n    @init()\n\n  onMouseUp: (e) =>\n    @svg.selectAll('.selection').remove()\n    # Enable again the default browser text selection.\n    $('body').css({\n      'user-select': 'all'\n    })\n\n  init: () ->\n    self = this\n    @svg.on(\"mousedown\", () ->\n      p = d3.mouse(this)\n      self.svg.append('rect')\n        .attr({\n          class: 'selection',\n          x: p[0],\n          y: p[1],\n          width: 0,\n          height: 0\n        })\n      # Unselect items.\n      self.timeline.selectionManager.reset()\n      # Prevent default browser text selection.\n      $('body').css({\n        'user-select': 'none'\n      })\n    ).on(\"mousemove\", () ->\n      s = self.svg.select('.selection')\n      if s.empty() then return\n      p = d3.mouse(this)\n      margin: self.margin\n      d = {\n        x: parseInt(s.attr('x'), 10),\n        y: parseInt(s.attr('y'), 10),\n        width: parseInt(s.attr('width'), 10),\n        height: parseInt(s.attr('height'), 10)\n      }\n      # Apply margin to mouse selection.\n      p[0] = Math.max(self.margin.left, p[0])\n\n      move = {\n        x: p[0] - d.x,\n        y: p[1] - d.y\n      }\n      if move.x < 1 || move.x * 2 < d.width\n        d.x = p[0]\n        d.width -= move.x\n      else\n        d.width = move.x\n\n      if move.y < 1 || move.y * 2 < d.height\n        d.y = p[1]\n        d.height -= move.y\n      else\n        d.height = move.y\n\n      s.attr(d)\n\n      # remove margins from selection\n      d.x -= self.margin.left\n      key_width = 6\n\n      d.timeStart = self.timeline.x.invert(d.x - key_width).getTime() / 1000\n      d.timeEnd = self.timeline.x.invert(d.x + d.width + key_width).getTime() / 1000\n      containerBounding = self.svg[0][0].getBoundingClientRect()\n\n      # deselect all previously selected items\n      d3.selectAll('.key--selected').classed('key--selected', false)\n      self.timeline.selectionManager.reset()\n      selection = []\n      d3.selectAll('.key').each (state_data, i) ->\n        item_data = d3.select(this.parentNode.parentNode.parentNode).datum()\n        if item_data.collapsed != true\n          itemBounding = d3.select(this)[0][0].getBoundingClientRect()\n          y = itemBounding.top - containerBounding.top\n          if state_data.time >= d.timeStart && state_data.time <= d.timeEnd\n            # use or condition for top and bottom\n            if (y >= d.y && y <= d.y + d.height) || (y + 10 >= d.y && y + 10 <= d.y + d.height)\n              d3.select(this).classed('key--selected', true)\n              selection.push(this)\n\n      self.timeline.selectionManager.select(selection)\n\n    )\n    # Attach the mouseup event to window so that it catch it event if\n    # mouseup happen outside of the browser window.\n    $(window).on(\"mouseup\", @onMouseUp)\n\nmodule.exports = Selection\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Selection.coffee\n **/","Signals = require 'js-signals'\nPropertyNumber = require './PropertyNumber.coffee'\nPropertyColor = require './PropertyColor.coffee'\nPropertyTween = require './PropertyTween.coffee'\n\nclass Property\n  constructor: (@editor, @$el, domElement) ->\n    @timeline = @editor.timeline\n    @timer = @editor.timer\n    @selectionManager = editor.selectionManager\n    @keyAdded = new Signals.Signal()\n    @items = []\n    @numberProp = false\n    @tweenProp = false\n\n    d3Object = d3.select(domElement)\n\n    key_val = false\n    propertyObject = false\n    propertyData = false\n    lineObject = false\n    lineData = false\n\n    if d3Object.classed('key')\n      propertyObject = domElement.parentNode\n      lineObject = propertyObject.parentNode.parentNode\n      lineData = d3.select(lineObject).datum()\n      propertyData = d3.select(propertyObject).datum()\n      key_val = d3Object.datum()\n\n    # click on bar\n    if d3Object.classed('bar')\n      lineData = d3Object.datum()\n\n    # click on bar label\n    if d3Object.classed('line-label')\n      domElement = domElement.parentNode\n      d3Object = d3.select(domElement)\n      lineData = d3Object.datum()\n\n    # data and propertyData are defined on key select.\n    property_name = false\n    if propertyData\n      property_name = propertyData.name\n\n    # Get the property container.\n    $container = @getContainer(lineData)\n\n    $tween_container = $container\n\n    # Basic data, loop through properties.\n    for key, instance_prop of lineData.properties\n      # show all properties or only 1 if we selected a key.\n      if !property_name || instance_prop.name == property_name\n        $grp_container = @getGroupContainer(instance_prop, $container)\n        numberProp = @addNumberProperty(instance_prop, lineData, key_val, $grp_container)\n        @items.push(numberProp)\n\n        if instance_prop.name == property_name\n          $tween_container = $grp_container\n\n    if property_name\n      # Add tween select if we are editing a key.\n      #$grp_container = @getGroupContainer(instance_prop, $container)\n      tweenProp = @addTweenProperty(instance_prop, lineData, key_val, $tween_container, propertyData, domElement)\n      @items.push(tweenProp)\n\n    return\n\n  onKeyAdded: () =>\n    # propagate the event.\n    @keyAdded.dispatch()\n\n  getGroupContainer: (instance_prop, $container) ->\n    if !instance_prop.group\n      # If there is no group add a general group first\n      grp_class = 'property-grp--general'\n      $existing = $container.find('.' + grp_class)\n      if $existing.length\n        return $existing\n      else\n        $grp = @createGroupContainer(grp_class)\n        $container.append($grp)\n        return $grp\n    else\n      # We have a group\n      grp_class = 'property-grp--' + instance_prop.group\n      $existing = $container.find('.' + grp_class)\n      if $existing.length\n        return $existing\n      else\n        $grp = @createGroupContainer(grp_class, instance_prop.group)\n        $container.append($grp)\n        return $grp\n\n  createGroupContainer: (grp_class, label = false) =>\n    $grp = $('<div class=\"property-grp ' + grp_class + '\"></div>')\n    if label\n      $grp.append('<h3 class=\"property-grp__title\">' + label + '</h3>')\n\n    return $grp\n\n  getContainer: (lineData) ->\n    $container = false\n    if lineData.id\n      # try to find a container for this object\n      $container = $('#property--' + lineData.id)\n      if !$container.length\n        # If no container for the specific item, create it\n        $container = $container = $('<div class=\"properties__wrapper\" id=\"property--' + lineData.id + '\"></div>')\n        @$el.append($container)\n\n        if lineData.label\n          # Also add the object name\n          $container.append('<h2 class=\"properties-editor__title\">' + lineData.label + '</h2>')\n\n    if $container == false\n      $container = $('<div class=\"properties__wrapper\" id=\"no-item\"></div>')\n      @$el.append($container)\n    return $container\n\n  addNumberProperty: (instance_prop, lineData, key_val, $container) =>\n    propClass = PropertyNumber\n    if instance_prop.type && instance_prop.type == 'color'\n      propClass = PropertyColor\n\n    prop = new propClass(instance_prop, lineData, @editor, key_val)\n    prop.keyAdded.add(@onKeyAdded)\n    $container.append(prop.$el)\n    return prop\n\n  addTweenProperty: (instance_prop, lineData, key_val, $container, propertyData, domElement) =>\n    tween = new PropertyTween(instance_prop, lineData, @editor, key_val, @timeline)\n    $container.append(tween.$el)\n\n    # Add a remove key button\n    tween.$el.find('[data-action-remove]').click (e) =>\n      e.preventDefault()\n      index = propertyData.keys.indexOf(key_val)\n      if index > -1\n        propertyData.keys.splice(index, 1)\n        @editor.propertiesEditor.keyRemoved.dispatch(domElement)\n        lineData._isDirty = true\n    return tween\n\n  update: () =>\n    for item in @items\n      item.update()\n    return\n\nmodule.exports = Property\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/Property.coffee\n **/","module.exports = \"<div class=properties-editor><a href=# class=\\\"menu-item menu-item--toggle-side\\\" data-action=toggle><i class=icon-toggle></i></a><div class=properties-editor__main></div></div>\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** /Users/david/Sites/TweenTime/~/html-loader!./templates/propertiesEditor.tpl.html\n ** module id = 26\n ** module chunks = 1\n **/","$ = require 'jquery'\nSignals = require 'js-signals'\n_ = require 'lodash'\nd3 = require 'd3'\nUtils = require '../core/Utils.coffee'\nPropertyBase = require './PropertyBase.coffee'\nDraggableNumber = require 'draggable-number.js'\n\nMustache = require 'mustache.js'\nconsole.log Mustache\ntpl_property = require 'html!../templates/propertyNumber.tpl.html'\n\nclass PropertyNumber extends PropertyBase\n  # @instance_property: The current property on the data object.\n  # @lineData: The line data object.\n  constructor: (@instance_property, @lineData, @editor, @key_val = false) ->\n    super\n    @$input = @$el.find('input')\n\n  getInputVal: () =>\n    parseFloat(@$el.find('input').val())\n\n  render: () =>\n    super\n    # By default assign the property default value\n    val = @getCurrentVal()\n\n    data =\n      id: @instance_property.name # \"circleRadius\" instead of \"circle radius\"\n      label: @instance_property.label || @instance_property.name\n      val: val\n\n    view = Mustache.render(tpl_property, data)\n    @$el = $(view)\n    @$el.find('.property__key').click(@onKeyClick)\n\n    $input = @$el.find('input')\n\n\n    onChangeEnd = (new_val) =>\n      @editor.undoManager.addState()\n\n    draggable = new DraggableNumber($input.get(0), {\n      changeCallback: @onInputChange,\n      endCallback: onChangeEnd\n    })\n    $input.data('draggable', draggable)\n    $input.change(@onInputChange)\n\n  update: () =>\n    super\n    val = @getCurrentVal()\n    draggable = @$input.data('draggable')\n\n    if draggable\n      draggable.set(val.toFixed(3))\n    else\n      @$input.val(val.toFixed(3))\n\nmodule.exports = PropertyNumber\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyNumber.coffee\n **/","$ = require 'jquery'\nrequire 'spectrum'\nSignals = require 'js-signals'\n_ = require 'lodash'\nd3 = require 'd3'\nUtils = require '../core/Utils.coffee'\nPropertyBase = require './PropertyBase.coffee'\n\nMustache = require 'mustache.js'\ntpl_property = require 'html!../templates/propertyColor.tpl.html'\n\nclass PropertyColor extends PropertyBase\n  constructor: (@instance_property, @lineData, @editor, @key_val = false) ->\n    super\n    @$input = @$el.find('input')\n\n  render: () =>\n    super\n    # By default assign the property default value\n    val = @getCurrentVal()\n\n    data =\n      id: @instance_property.name # \"circleRadius\" instead of \"circle radius\"\n      label: @instance_property.label || @instance_property.name\n      val: val\n\n    view = Mustache.render(tpl_property, data)\n    @$el = $(view)\n    @$el.find('.property__key').click(@onKeyClick)\n\n    $input = @$el.find('input')\n\n    $input.spectrum({\n      allowEmpty: false,\n      showAlpha: true,\n      clickoutFiresChange: false,\n      preferredFormat: \"rgb\",\n      change: (color) =>\n        @editor.undoManager.addState()\n      ,\n      move: (color) =>\n        if color._a == 1\n          @$input.val(color.toHexString())\n        else\n          @$input.val(color.toRgbString())\n        @onInputChange()\n    })\n\n    $input.change(@onInputChange)\n\n  update: () =>\n    super\n    val = @getCurrentVal()\n    @$input.val(val)\n    @$input.spectrum('set', val)\n\nmodule.exports = PropertyColor\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyColor.coffee\n **/","$ = require 'jquery'\nSignals = require 'js-signals'\n\nMustache = require 'mustache.js'\ntpl_property = require 'html!../templates/propertyTween.tpl.html'\n\nclass PropertyTween\n  # @instance_property: The current property on the data object.\n  # @lineData: The line data object.\n  constructor: (@instance_property, @lineData, @editor, @key_val = false, @timeline) ->\n    @timer = @editor.timer\n    @$time = false\n    @render()\n\n  render: () =>\n    self = this\n    if !@key_val.ease then @key_val.ease = \"Quad.easeOut\"\n    data =\n      id: @instance_property.name + \"_tween\"\n      val: @key_val.ease\n      time: @key_val.time.toFixed(3)\n      options: [\n        'Linear.easeNone'\n      ]\n      selected: () ->\n        if this.toString() == self.key_val.ease then 'selected' else ''\n\n    tweens = [\"Quad\", \"Cubic\", \"Quart\", \"Quint\", \"Strong\"]\n    for tween in tweens\n      data.options.push(tween + \".easeOut\")\n      data.options.push(tween + \".easeIn\")\n      data.options.push(tween + \".easeInOut\")\n\n    @$el = $(Mustache.render(tpl_property, data))\n    @$time = @$el.find('.property__key-time strong')\n    @$time.keypress (e) =>\n      if e.charCode == 13\n        # Enter\n        e.preventDefault()\n        @$time.blur()\n        @updateKeyTime(@$time.text())\n\n    @$time.on 'click', () -> document.execCommand('selectAll', false, null)\n    @$el.find('select').change(@onChange)\n    return\n\n  updateKeyTime: (time) =>\n    time = parseFloat(time)\n    if isNaN(time)\n      time = @key_val.time\n\n    @$time.text(time)\n    @key_val.time = time\n    @onChange()\n\n  onChange: () =>\n    ease = @$el.find('select').val()\n    @key_val.ease = ease\n    @editor.undoManager.addState()\n    @lineData._isDirty = true\n    @timeline._isDirty = true\n    return\n\n  update: () =>\n    # todo: use mustache instead...\n    @$time.html(@key_val.time.toFixed(3))\n    return\n\nmodule.exports = PropertyTween\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyTween.coffee\n **/","/* FileSaver.js\n * A saveAs() FileSaver implementation.\n * 2014-08-29\n *\n * By Eli Grey, http://eligrey.com\n * License: X11/MIT\n *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\n\nvar saveAs = saveAs\n  // IE 10+ (native saveAs)\n  || (typeof navigator !== \"undefined\" &&\n      navigator.msSaveOrOpenBlob && navigator.msSaveOrOpenBlob.bind(navigator))\n  // Everyone else\n  || (function(view) {\n\t\"use strict\";\n\t// IE <10 is explicitly unsupported\n\tif (typeof navigator !== \"undefined\" &&\n\t    /MSIE [1-9]\\./.test(navigator.userAgent)) {\n\t\treturn;\n\t}\n\tvar\n\t\t  doc = view.document\n\t\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\n\t\t, get_URL = function() {\n\t\t\treturn view.URL || view.webkitURL || view;\n\t\t}\n\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\n\t\t, can_use_save_link = \"download\" in save_link\n\t\t, click = function(node) {\n\t\t\tvar event = doc.createEvent(\"MouseEvents\");\n\t\t\tevent.initMouseEvent(\n\t\t\t\t\"click\", true, false, view, 0, 0, 0, 0, 0\n\t\t\t\t, false, false, false, false, 0, null\n\t\t\t);\n\t\t\tnode.dispatchEvent(event);\n\t\t}\n\t\t, webkit_req_fs = view.webkitRequestFileSystem\n\t\t, req_fs = view.requestFileSystem || webkit_req_fs || view.mozRequestFileSystem\n\t\t, throw_outside = function(ex) {\n\t\t\t(view.setImmediate || view.setTimeout)(function() {\n\t\t\t\tthrow ex;\n\t\t\t}, 0);\n\t\t}\n\t\t, force_saveable_type = \"application/octet-stream\"\n\t\t, fs_min_size = 0\n\t\t// See https://code.google.com/p/chromium/issues/detail?id=375297#c7 for\n\t\t// the reasoning behind the timeout and revocation flow\n\t\t, arbitrary_revoke_timeout = 10\n\t\t, revoke = function(file) {\n\t\t\tvar revoker = function() {\n\t\t\t\tif (typeof file === \"string\") { // file is an object URL\n\t\t\t\t\tget_URL().revokeObjectURL(file);\n\t\t\t\t} else { // file is a File\n\t\t\t\t\tfile.remove();\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (view.chrome) {\n\t\t\t\trevoker();\n\t\t\t} else {\n\t\t\t\tsetTimeout(revoker, arbitrary_revoke_timeout);\n\t\t\t}\n\t\t}\n\t\t, dispatch = function(filesaver, event_types, event) {\n\t\t\tevent_types = [].concat(event_types);\n\t\t\tvar i = event_types.length;\n\t\t\twhile (i--) {\n\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\n\t\t\t\tif (typeof listener === \"function\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\tthrow_outside(ex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t, FileSaver = function(blob, name) {\n\t\t\t// First try a.download, then web filesystem, then object URLs\n\t\t\tvar\n\t\t\t\t  filesaver = this\n\t\t\t\t, type = blob.type\n\t\t\t\t, blob_changed = false\n\t\t\t\t, object_url\n\t\t\t\t, target_view\n\t\t\t\t, dispatch_all = function() {\n\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n\t\t\t\t}\n\t\t\t\t// on any filesys errors revert to saving with object URLs\n\t\t\t\t, fs_error = function() {\n\t\t\t\t\t// don't create more object URLs than needed\n\t\t\t\t\tif (blob_changed || !object_url) {\n\t\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\t\t}\n\t\t\t\t\tif (target_view) {\n\t\t\t\t\t\ttarget_view.location.href = object_url;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar new_tab = view.open(object_url, \"_blank\");\n\t\t\t\t\t\tif (new_tab == undefined && typeof safari !== \"undefined\") {\n\t\t\t\t\t\t\t//Apple do not allow window.open, see http://bit.ly/1kZffRI\n\t\t\t\t\t\t\tview.location.href = object_url\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t}\n\t\t\t\t, abortable = function(func) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tif (filesaver.readyState !== filesaver.DONE) {\n\t\t\t\t\t\t\treturn func.apply(this, arguments);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t, create_if_not_found = {create: true, exclusive: false}\n\t\t\t\t, slice\n\t\t\t;\n\t\t\tfilesaver.readyState = filesaver.INIT;\n\t\t\tif (!name) {\n\t\t\t\tname = \"download\";\n\t\t\t}\n\t\t\tif (can_use_save_link) {\n\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\tsave_link.href = object_url;\n\t\t\t\tsave_link.download = name;\n\t\t\t\tclick(save_link);\n\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\tdispatch_all();\n\t\t\t\trevoke(object_url);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Object and web filesystem URLs have a problem saving in Google Chrome when\n\t\t\t// viewed in a tab, so I force save with application/octet-stream\n\t\t\t// http://code.google.com/p/chromium/issues/detail?id=91158\n\t\t\t// Update: Google errantly closed 91158, I submitted it again:\n\t\t\t// https://code.google.com/p/chromium/issues/detail?id=389642\n\t\t\tif (view.chrome && type && type !== force_saveable_type) {\n\t\t\t\tslice = blob.slice || blob.webkitSlice;\n\t\t\t\tblob = slice.call(blob, 0, blob.size, force_saveable_type);\n\t\t\t\tblob_changed = true;\n\t\t\t}\n\t\t\t// Since I can't be sure that the guessed media type will trigger a download\n\t\t\t// in WebKit, I append .download to the filename.\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=65440\n\t\t\tif (webkit_req_fs && name !== \"download\") {\n\t\t\t\tname += \".download\";\n\t\t\t}\n\t\t\tif (type === force_saveable_type || webkit_req_fs) {\n\t\t\t\ttarget_view = view;\n\t\t\t}\n\t\t\tif (!req_fs) {\n\t\t\t\tfs_error();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfs_min_size += blob.size;\n\t\t\treq_fs(view.TEMPORARY, fs_min_size, abortable(function(fs) {\n\t\t\t\tfs.root.getDirectory(\"saved\", create_if_not_found, abortable(function(dir) {\n\t\t\t\t\tvar save = function() {\n\t\t\t\t\t\tdir.getFile(name, create_if_not_found, abortable(function(file) {\n\t\t\t\t\t\t\tfile.createWriter(abortable(function(writer) {\n\t\t\t\t\t\t\t\twriter.onwriteend = function(event) {\n\t\t\t\t\t\t\t\t\ttarget_view.location.href = file.toURL();\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\t\t\tdispatch(filesaver, \"writeend\", event);\n\t\t\t\t\t\t\t\t\trevoke(file);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\twriter.onerror = function() {\n\t\t\t\t\t\t\t\t\tvar error = writer.error;\n\t\t\t\t\t\t\t\t\tif (error.code !== error.ABORT_ERR) {\n\t\t\t\t\t\t\t\t\t\tfs_error();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\"writestart progress write abort\".split(\" \").forEach(function(event) {\n\t\t\t\t\t\t\t\t\twriter[\"on\" + event] = filesaver[\"on\" + event];\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\twriter.write(blob);\n\t\t\t\t\t\t\t\tfilesaver.abort = function() {\n\t\t\t\t\t\t\t\t\twriter.abort();\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.WRITING;\n\t\t\t\t\t\t\t}), fs_error);\n\t\t\t\t\t\t}), fs_error);\n\t\t\t\t\t};\n\t\t\t\t\tdir.getFile(name, {create: false}, abortable(function(file) {\n\t\t\t\t\t\t// delete file if it already exists\n\t\t\t\t\t\tfile.remove();\n\t\t\t\t\t\tsave();\n\t\t\t\t\t}), abortable(function(ex) {\n\t\t\t\t\t\tif (ex.code === ex.NOT_FOUND_ERR) {\n\t\t\t\t\t\t\tsave();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfs_error();\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}), fs_error);\n\t\t\t}), fs_error);\n\t\t}\n\t\t, FS_proto = FileSaver.prototype\n\t\t, saveAs = function(blob, name) {\n\t\t\treturn new FileSaver(blob, name);\n\t\t}\n\t;\n\tFS_proto.abort = function() {\n\t\tvar filesaver = this;\n\t\tfilesaver.readyState = filesaver.DONE;\n\t\tdispatch(filesaver, \"abort\");\n\t};\n\tFS_proto.readyState = FS_proto.INIT = 0;\n\tFS_proto.WRITING = 1;\n\tFS_proto.DONE = 2;\n\n\tFS_proto.error =\n\tFS_proto.onwritestart =\n\tFS_proto.onprogress =\n\tFS_proto.onwrite =\n\tFS_proto.onabort =\n\tFS_proto.onerror =\n\tFS_proto.onwriteend =\n\t\tnull;\n\n\treturn saveAs;\n}(\n\t   typeof self !== \"undefined\" && self\n\t|| typeof window !== \"undefined\" && window\n\t|| this.content\n));\n// `self` is undefined in Firefox for Android content script context\n// while `this` is nsIContentFrameMessageManager\n// with an attribute `content` that corresponds to the window\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = saveAs;\n} else if ((typeof define !== \"undefined\" && define !== null) && (define.amd != null)) {\n  define([], function() {\n    return saveAs;\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/FileSaver/FileSaver.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_31__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"DraggableNumber\",\"commonjs\":\"DraggableNumber\",\"commonjs2\":\"DraggableNumber\",\"amd\":\"DraggableNumber\"}\n ** module id = 31\n ** module chunks = 1\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_32__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"Mustache\",\"commonjs\":\"mustache\",\"commonjs2\":\"mustache\",\"amd\":\"mustache\"}\n ** module id = 32\n ** module chunks = 1\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_33__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"spectrum\"\n ** module id = 33\n ** module chunks = 1\n **/","$ = require 'jquery'\nSignals = require 'js-signals'\n_ = require 'lodash'\nUtils = require '../core/Utils.coffee'\n\nMustache = require 'mustache.js'\ntpl_property = require 'html!../templates/propertyNumber.tpl.html'\n\nclass PropertyBase\n  # @instance_property: The current property on the data object.\n  # @lineData: The line data object.\n  constructor: (@instance_property, @lineData, @editor, @key_val = false) ->\n    @timer = @editor.timer\n    @keyAdded = new Signals.Signal()\n    @render()\n\n    @$key = @$el.find('.property__key')\n\n  onKeyClick: (e) =>\n    e.preventDefault()\n    currentValue = @getCurrentVal()\n    @addKey(currentValue)\n\n  getInputVal: () =>\n    return @$el.find('input').val()\n\n  getCurrentVal: () =>\n    val = @instance_property.val\n    prop_name = @instance_property.name\n\n    # if we selected a key simply return it's value\n    if @key_val\n      return @key_val.val\n\n    if @lineData.values? && @lineData.values[prop_name]\n      return @lineData.values[prop_name]\n\n    return val\n\n  onInputChange: (e) =>\n    current_value = @getInputVal()\n    currentTime = @timer.getCurrentTime() / 1000\n    # if we selected a key simply get the time from it.\n    if @key_val then currentTime = @key_val.time\n\n    if @instance_property.keys && @instance_property.keys.length\n      # Add a new key if there is no other key at same time\n      current_key = _.find(@instance_property.keys, (key) => key.time == currentTime)\n\n      if current_key\n        # if there is a key update it\n        current_key.val = current_value\n      else\n        # add a new key\n        @addKey(current_value)\n    else\n      # There is no keys, simply update the property value (for data saving)\n      @instance_property.val = current_value\n      # Also directly set the lineData value.\n      @lineData.values[@instance_property.name] = current_value\n\n      # Simply update the custom object with new values.\n      if @lineData.object\n        currentTime = @timer.getCurrentTime() / 1000\n        # Set the property on the instance object.\n        @lineData.object.update(currentTime - @lineData.start)\n\n    # Something changed, make the lineData dirty to rebuild things. d\n    @lineData._isDirty = true\n\n  getCurrentKey: () =>\n    time = @timer.getCurrentTime() / 1000\n\n    if !@instance_property || !@instance_property.keys then return false\n    if @instance_property.keys.length == 0 then return false\n    for key in @instance_property.keys\n      if key.time == time then return key\n    return false\n\n  addKey: (val) =>\n    currentTime = @timer.getCurrentTime() / 1000\n    key = {time: currentTime, val: val}\n\n    @instance_property.keys.push(key)\n\n    @instance_property.keys = Utils.sortKeys(@instance_property.keys)\n    # Todo: remove lineData._isDirty, make it nicer.\n    @lineData._isDirty = true\n    @keyAdded.dispatch()\n\n  render: () =>\n    # current values are defined in @lineData.values\n    @values = if @lineData.values? then @lineData.values else {}\n\n  update: () =>\n    key = @getCurrentKey()\n    @$key.toggleClass('property__key--active', key)\n\nmodule.exports = PropertyBase\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyBase.coffee\n **/","module.exports = \"<div class=\\\"property property--number\\\"><button class=property__key></button><label for={{id}} class=property__label>{{label}}</label><input type=number id={{id}} class=property__input value={{val}}></div>\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** /Users/david/Sites/TweenTime/~/html-loader!./templates/propertyNumber.tpl.html\n ** module id = 35\n ** module chunks = 1\n **/","module.exports = \"<div class=\\\"property property--number\\\"><button class=property__key></button><label for={{id}} class=property__label>{{label}}</label><input id={{id}} class=property__input value={{val}}></div>\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** /Users/david/Sites/TweenTime/~/html-loader!./templates/propertyColor.tpl.html\n ** module id = 36\n ** module chunks = 1\n **/","module.exports = function() { throw new Error(\"define cannot be used indirect\"); };\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/amd-define.js\n ** module id = 38\n ** module chunks = 1\n **/","module.exports = __webpack_amd_options__;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/amd-options.js\n ** module id = 39\n ** module chunks = 1\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** (webpack)/buildin/module.js\n **/"],"sourceRoot":""}