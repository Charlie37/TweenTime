{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///TweenTime.Editor.min.js","webpack:///webpack/bootstrap a1a506e355ed2881dc77?888b","webpack:///./Editor.js","webpack:///external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}?55d0","webpack:///./graph/Timeline.js","webpack:///./editor/PropertiesEditor.js","webpack:///./editor/EditorMenu.js","webpack:///./editor/EditorControls.js","webpack:///./editor/SelectionManager.js","webpack:///./editor/Exporter.js","webpack:///./editor/UndoManager.js","webpack:///./core/Utils.js?8d2f","webpack:///external \"d3\"","webpack:///external {\"root\":\"$\",\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\"}","webpack:///external {\"root\":\"signals\",\"commonjs\":\"./signals\",\"amd\":\"signals\"}?71f5","webpack:///./templates/timeline.tpl.html","webpack:///./graph/Header.js","webpack:///./graph/TimeIndicator.js","webpack:///./graph/Items.js","webpack:///./graph/KeysPreview.js","webpack:///./graph/Properties.js","webpack:///./graph/Keys.js","webpack:///./graph/Errors.js","webpack:///./graph/Selection.js","webpack:///./editor/Property.js","webpack:///./templates/propertiesEditor.tpl.html","webpack:///./bower_components/FileSaver/FileSaver.js","webpack:///./editor/PropertyNumber.js","webpack:///./editor/PropertyColor.js","webpack:///./editor/PropertyTween.js","webpack:///external {\"root\":\"DraggableNumber\",\"commonjs\":\"DraggableNumber\",\"commonjs2\":\"DraggableNumber\",\"amd\":\"DraggableNumber\"}","webpack:///external \"spectrum\"","webpack:///./editor/PropertyBase.js","webpack:///./templates/propertyNumber.tpl.html","webpack:///./templates/propertyColor.tpl.html","webpack:///./templates/propertyTween.tpl.html","webpack:////Users/david/Sites/TweenTime/~/hogan.js/lib/hogan.js","webpack:///(webpack)/buildin/amd-define.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///(webpack)/buildin/module.js","webpack:////Users/david/Sites/TweenTime/~/hogan.js/lib/compiler.js","webpack:////Users/david/Sites/TweenTime/~/hogan.js/lib/template.js"],"names":["root","factory","exports","module","require","undefined","define","amd","this","__WEBPACK_EXTERNAL_MODULE_1__","__WEBPACK_EXTERNAL_MODULE_12__","__WEBPACK_EXTERNAL_MODULE_13__","__WEBPACK_EXTERNAL_MODULE_14__","__WEBPACK_EXTERNAL_MODULE_31__","__WEBPACK_EXTERNAL_MODULE_32__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","tpl_timeline","Timeline","PropertiesEditor","EditorMenu","EditorControls","SelectionManager","Exporter","UndoManager","Editor","tweenTime","options","_this","timer","lastTime","onKeyAdded","bind","onKeyRemoved","$timeline","$","append","addClass","selectionManager","exporter","timeline","propertiesEditor","keyAdded","add","keyRemoved","menu","onMenuCreated","find","controls","undoManager","window","editorEnabled","dispatchEvent","Event","requestAnimationFrame","update","prototype","addState","render","item","removeItem","selection","length","triggerSelect","time","force","_isDirty","_this2","time_changed","d3","Utils","Header","TimeIndicator","Items","KeysPreview","Properties","Keys","Errors","Selection","editor","currentTime","initialDomain","domainStart","domainEnd","totalDuration","getCurrentTime","margin","top","right","bottom","left","width","innerWidth","height","lineHeight","label_position_x","x","scale","domain","range","xAxis","svg","axis","orient","tickSize","tickFormat","formatMinutes","select","attr","svgContainer","svgContainerTime","linesContainer","header","timeIndicator","items","onUpdate","keysPreview","properties","newKey","keyContainer","keys","selectNewKey","errors","onKeyUpdated","xAxisGrid","ticks","dy","xGrid","xAxisElement","onBrush","extent","onresize","INNER_WIDTH","selectAll","resize","margin_ms","domainLength","setDomain","bar","Math","max","Signals","Property","tpl_propertiesEditor","addProperty","onSelect","$el","$container","Signal","keypress","e","stopPropagation","dispatch","domElement","empty","Array","i","element","removeClass","prop","push","saveAs","initExport","initToggle","timelineClosed","$toggleLink","click","preventDefault","toggleClass","$toggleLinkSide","propertiesClosed","hasClass","data","getJSON","blob","Blob","type","$time","$time_end","initControls","val","getDuration","document","charCode","playPause","$play_pause","toggle","is_playing","$bt_first","seek","$bt_last","total","getTotalDuration","change","seconds","parseFloat","setDuration","toFixed","removeDuplicates","result","found","j","item2","isEqualNode","index","indexOf","splice","sortSelection","compare","a","b","__data__","sort","reset","highlightItems","addToSelection","el","getSelection","classed","d3item","getData","domain_start","domain_end","settings","duration","getTime","json_replacer","key","JSON","stringify","history_max","history","current_index","keydown","keyCode","metaKey","ctrlKey","shiftKey","redo","undo","setState","parse","shift","state","item_key","prop_key","key_key","ease","d","hours","floor","minutes","output","getClosestTime","objectId","property_name","tolerance","timer_time","abs","start","end","name","k","getPreviousKey","prevKey","sortKeys","guid","s4","random","toString","substring","H","T","Template","code","t","fl","partials","subs","apply","arguments","xDisplayed","createBrushHandle","createTimeHandle","durationChanged","onDurationChanged","adaptDomainToDuration","ms","new_domain","min","brush","extent0","on","gBrush","timeSelection","self","dragTimeMove","event","sourceEvent","event_x","clientX","dx","invert","timeMatch","dragTime","behavior","drag","origin","enter","mouse","timeGrp","container","_","selectBar","dragmove","diff","dragmoveLeft","dragmoveRight","dragLeft","y","dragRight","bar_border","barEnter","barContainerRight","collapsed","numProperties","visibleProperties","filter","barWithStartAndEnd","text","label","exit","remove","propVal","propKey","setItemStyle","parentNode","bar_data","datum","keyValue","keyKey","parseInt","subGrp","sub_height","lineObject","lineValue","def","propertyObject","propertyData","lineData","currentDomainStart","old_time","selection_first_time","selection_last_time","time_offset","updateKeyItem","itemPropertyObject","itemPropertyData","itemLineObject","itemLineData","key_scale","is_first","altKey","propValue","_id","selectKey","dragend","key_grp","cls","split","grp_linear","grp_in","grp_out","grp_inout","propertiesWithError","insert","errorsValue","errorTime","onMouseUp","init","css","user-select","class","s","move","key_width","timeStart","timeEnd","containerBounding","getBoundingClientRect","each","state_data","item_data","itemBounding","PropertyNumber","PropertyColor","PropertyTween","numberProp","tweenProp","d3Object","key_val","getContainer","$tween_container","instance_prop","$grp_container","getGroupContainer","addNumberProperty","addTweenProperty","$existing","$grp","grp_class","group","group_name","replace","toLowerCase","createGroupContainer","propClass","tween","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","navigator","msSaveOrOpenBlob","view","test","userAgent","doc","get_URL","URL","webkitURL","save_link","createElementNS","can_use_save_link","node","createEvent","initMouseEvent","webkit_req_fs","webkitRequestFileSystem","req_fs","requestFileSystem","mozRequestFileSystem","throw_outside","ex","setImmediate","setTimeout","force_saveable_type","fs_min_size","arbitrary_revoke_timeout","revoke","file","revoker","revokeObjectURL","chrome","filesaver","event_types","concat","listener","FileSaver","object_url","target_view","slice","blob_changed","dispatch_all","fs_error","createObjectURL","location","href","new_tab","open","safari","readyState","DONE","abortable","func","create_if_not_found","create","exclusive","INIT","download","webkitSlice","size","TEMPORARY","fs","getDirectory","dir","save","getFile","createWriter","writer","onwriteend","toURL","onerror","error","ABORT_ERR","forEach","write","abort","WRITING","NOT_FOUND_ERR","FS_proto","onwritestart","onprogress","onwrite","onabort","content","_extends","child","parent","Object","constructor","value","enumerable","writable","configurable","__proto__","PropertyBase","DraggableNumber","tpl_property","instance_property","onInputChange","$input","getInputVal","getCurrentVal","onKeyClick","onChangeEnd","draggableOptions","changeCallback","endCallback","draggable","get","set","spectrum","allowEmpty","showAlpha","clickoutFiresChange","preferredFormat","color","_a","toHexString","toRgbString","onChange","selected","tweens","blur","updateKeyTime","execCommand","isNaN","html","$key","currentValue","addKey","prop_name","values","current_value","current_key","_val","object","_val2","getCurrentKey","v","f","rs","pop","Hogan","template","Error","__webpack_amd_options__","webpackPolyfill","deprecate","paths","children","cleanTripleStache","token","n","substr","trim","tagChange","tag","charAt","l","buildTree","tokens","kind","stack","customTags","instructions","opener","tail","allowedInSuper","tags","isOpener","nodes","isCloser","last","o","close","stringifySubstitutions","obj","esc","join","stringifyPartials","codeObj","rSlash","rQuot","rNewline","rCr","rLineSep","rParagraphSep","chooseMethod","createPartial","context","prefix","sym","serialNo","indent","tripleStache","rIsWhitespace","#","^","<","/","!",">","=","_v","{","&","_t","scan","delimiters","addBuf","buf","String","lineIsWhitespace","isAllWhitespace","lineStart","match","filterLine","haveSeenTag","noNewLine","next","seenTag","changeDelimiters","ctag","closeIndex","otag","len","IN_TEXT","IN_TAG_TYPE","IN_TAG","tagType","\n","wrapMain","generate","tree","walk","asString","makeTemplate","makePartials","Function","codegen","ctx","inPartial","nodelist","sectionTags","cache","cacheKey","disableLambda","modelGet","compile","instance","findInScope","scope","doModelGet","createSpecializedPartial","stackSubs","stackPartials","stackText","PartialTemplate","Substitutions","partial","subsText","coerceToString","hoganEscape","str","hChars","rAmp","rLt","rGt","rApos","compiler","r","ri","ep","symbol","base","activeSub","rp","section","isArray","inverted","pass","returnFound","names","cx","mv","ls","oldTags","ct","textSource","sub"],"mappings":"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","file":"TweenTime.Editor.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(\"d3\"), require(\"jquery\"), require(undefined), require(\"DraggableNumber\"), require(\"spectrum\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\", \"d3\", \"jquery\", \"signals\", \"DraggableNumber\", \"spectrum\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Editor\"] = factory(require(\"lodash\"), require(\"d3\"), require(\"jquery\"), require(\"./signals\"), require(\"DraggableNumber\"), require(\"spectrum\"));\n\telse\n\t\troot[\"TweenTime\"] = root[\"TweenTime\"] || {}, root[\"TweenTime\"][\"Editor\"] = factory(root[\"_\"], root[\"d3\"], root[\"$\"], root[\"signals\"], root[\"DraggableNumber\"], root[\"spectrum\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_12__, __WEBPACK_EXTERNAL_MODULE_13__, __WEBPACK_EXTERNAL_MODULE_14__, __WEBPACK_EXTERNAL_MODULE_31__, __WEBPACK_EXTERNAL_MODULE_32__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(\"d3\"), require(\"jquery\"), require(undefined), require(\"DraggableNumber\"), require(\"spectrum\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\", \"d3\", \"jquery\", \"signals\", \"DraggableNumber\", \"spectrum\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Editor\"] = factory(require(\"lodash\"), require(\"d3\"), require(\"jquery\"), require(\"./signals\"), require(\"DraggableNumber\"), require(\"spectrum\"));\n\telse\n\t\troot[\"TweenTime\"] = root[\"TweenTime\"] || {}, root[\"TweenTime\"][\"Editor\"] = factory(root[\"_\"], root[\"d3\"], root[\"$\"], root[\"signals\"], root[\"DraggableNumber\"], root[\"spectrum\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_12__, __WEBPACK_EXTERNAL_MODULE_13__, __WEBPACK_EXTERNAL_MODULE_14__, __WEBPACK_EXTERNAL_MODULE_31__, __WEBPACK_EXTERNAL_MODULE_32__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar tpl_timeline = __webpack_require__(16);\n\tvar Timeline = __webpack_require__(2)[\"default\"];\n\tvar PropertiesEditor = __webpack_require__(3)[\"default\"];\n\tvar EditorMenu = __webpack_require__(4)[\"default\"];\n\tvar EditorControls = __webpack_require__(5)[\"default\"];\n\tvar SelectionManager = __webpack_require__(6)[\"default\"];\n\tvar Exporter = __webpack_require__(7)[\"default\"];\n\tvar UndoManager = __webpack_require__(8)[\"default\"];\n\tvar Editor = (function () {\n\t  var Editor = function Editor(tweenTime, options) {\n\t    var _this = this;\n\t    if (options === undefined) options = {};\n\t    this.tweenTime = tweenTime;\n\t    this.options = options;\n\t    this.timer = this.tweenTime.timer;\n\t    this.lastTime = -1;\n\t\n\t    this.onKeyAdded = this.onKeyAdded.bind(this);\n\t    this.onKeyRemoved = this.onKeyRemoved.bind(this);\n\t\n\t    this.$timeline = $(tpl_timeline());\n\t    $(\"body\").append(this.$timeline);\n\t    $(\"body\").addClass(\"has-editor\");\n\t\n\t    this.selectionManager = new SelectionManager(this.tweenTime);\n\t    this.exporter = new Exporter(this);\n\t    this.timeline = new Timeline(this, options);\n\t\n\t    this.propertiesEditor = new PropertiesEditor(this, this.selectionManager);\n\t    this.propertiesEditor.keyAdded.add(this.onKeyAdded);\n\t    this.propertiesEditor.keyRemoved.add(this.onKeyRemoved);\n\t\n\t    this.menu = new EditorMenu(this.tweenTime, this.$timeline, this);\n\t    if (this.options.onMenuCreated != null) {\n\t      this.options.onMenuCreated(this.$timeline.find(\".timeline__menu\"));\n\t    }\n\t\n\t    this.controls = new EditorControls(this.tweenTime, this.$timeline);\n\t    this.undoManager = new UndoManager(this);\n\t\n\t    // Will help resize the canvas to correct size (minus sidebar and timeline)\n\t    window.editorEnabled = true;\n\t    window.dispatchEvent(new Event(\"resize\"));\n\t    window.requestAnimationFrame(function () {\n\t      return _this.update();\n\t    });\n\t  };\n\t\n\t  Editor.prototype.onKeyAdded = function () {\n\t    this.undoManager.addState();\n\t    this.render(false, true);\n\t  };\n\t\n\t  Editor.prototype.onKeyRemoved = function (item) {\n\t    this.selectionManager.removeItem(item);\n\t    this.undoManager.addState();\n\t    if (this.selectionManager.selection.length) {\n\t      this.selectionManager.triggerSelect();\n\t    }\n\t    this.render(false, true);\n\t  };\n\t\n\t  Editor.prototype.render = function (time, force) {\n\t    if (time === undefined) time = false;\n\t    if (force === undefined) force = false;\n\t    if (time === false) {\n\t      time = this.timer.time[0];\n\t    }\n\t    if (force) {\n\t      this.timeline._isDirty = true;\n\t    }\n\t    this.timeline.render(time, force);\n\t    this.controls.render(time, force);\n\t    this.propertiesEditor.render(time, force);\n\t  };\n\t\n\t  Editor.prototype.update = function () {\n\t    var _this2 = this;\n\t    var time = this.timer.time[0];\n\t    var time_changed = this.lastTime === time ? false : true;\n\t\n\t    this.render(time, time_changed);\n\t    this.lastTime = this.timer.time[0];\n\t    window.requestAnimationFrame(function () {\n\t      return _this2.update();\n\t    });\n\t  };\n\t\n\t  return Editor;\n\t})();\n\t\n\tmodule.exports = Editor;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar d3 = __webpack_require__(12);\n\t\n\tvar Utils = __webpack_require__(9)[\"default\"];\n\tvar Header = __webpack_require__(17)[\"default\"];\n\tvar TimeIndicator = __webpack_require__(18)[\"default\"];\n\tvar Items = __webpack_require__(19)[\"default\"];\n\tvar KeysPreview = __webpack_require__(20)[\"default\"];\n\tvar Properties = __webpack_require__(21)[\"default\"];\n\tvar Keys = __webpack_require__(22)[\"default\"];\n\tvar Errors = __webpack_require__(23)[\"default\"];\n\tvar Selection = __webpack_require__(24)[\"default\"];\n\tvar Timeline = (function () {\n\t  var Timeline = function Timeline(editor, options) {\n\t    var _this = this;\n\t    this.editor = editor;\n\t    this.tweenTime = this.editor.tweenTime;\n\t    this.timer = this.tweenTime.timer;\n\t    this.selectionManager = this.editor.selectionManager;\n\t\n\t    this._isDirty = true;\n\t    this.timer = this.tweenTime.timer;\n\t    this.currentTime = this.timer.time; // used in timeindicator.\n\t\n\t    // Make the domain cover 20% of the totalDuation by default.\n\t    this.initialDomain = [];\n\t    this.initialDomain[0] = options.domainStart || 0;\n\t    this.initialDomain[1] = options.domainEnd || this.timer.totalDuration * 0.2;\n\t\n\t    // Adapt time to be greater or equal to domainStart.\n\t    if (this.initialDomain[0] > this.timer.getCurrentTime()) {\n\t      this.timer.time[0] = this.initialDomain[0];\n\t    }\n\t\n\t    var margin = { top: 6, right: 20, bottom: 0, left: 265 };\n\t    this.margin = margin;\n\t\n\t    var width = window.innerWidth - margin.left - margin.right;\n\t    var height = 270 - margin.top - margin.bottom - 40;\n\t    this.lineHeight = 20;\n\t    this.label_position_x = -margin.left + 20;\n\t\n\t    this.x = d3.time.scale().domain(this.initialDomain).range([0, width]);\n\t\n\t    this.xAxis = d3.svg.axis().scale(this.x).orient(\"top\").tickSize(-height, 0).tickFormat(Utils.formatMinutes);\n\t\n\t    this.svg = d3.select(\".timeline__main\").append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", 600);\n\t\n\t    this.svgContainer = this.svg.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\t\n\t    this.svgContainerTime = this.svg.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",0)\");\n\t\n\t    this.linesContainer = this.svg.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + (margin.top) + \")\");\n\t\n\t    this.header = new Header(this.timer, this.initialDomain, this.tweenTime, width, margin);\n\t    this.timeIndicator = new TimeIndicator(this, this.svgContainerTime);\n\t\n\t    this.selection = new Selection(this, this.svg, margin);\n\t\n\t    this.items = new Items(this, this.linesContainer);\n\t    this.items.onUpdate.add(this.onUpdate);\n\t    this.keysPreview = new KeysPreview(this, this.linesContainer);\n\t\n\t    this.properties = new Properties(this);\n\t    this.properties.onKeyAdded.add(function (newKey, keyContainer) {\n\t      _this._isDirty = true;\n\t      // render the timeline directly so that we can directly select\n\t      // the new key with it's domElement.\n\t      _this.render(0, false);\n\t      _this.keys.selectNewKey(newKey, keyContainer);\n\t    });\n\t    this.errors = new Errors(this);\n\t    this.keys = new Keys(this);\n\t    this.keys.onKeyUpdated.add(function () {\n\t      _this.onUpdate();\n\t    });\n\t\n\t    this.xAxisGrid = d3.svg.axis().scale(this.x).ticks(100).tickSize(-this.items.dy, 0).tickFormat(\"\").orient(\"top\");\n\t\n\t    this.xGrid = this.svgContainer.append(\"g\").attr(\"class\", \"x axis grid\").attr(\"transform\", \"translate(0,\" + margin.top + \")\").call(this.xAxisGrid);\n\t\n\t    this.xAxisElement = this.svgContainer.append(\"g\").attr(\"class\", \"x axis\").attr(\"transform\", \"translate(0,\" + margin.top + \")\").call(this.xAxis);\n\t\n\t    this.header.onBrush.add(function (extent) {\n\t      _this.x.domain(extent);\n\t      _this.xGrid.call(_this.xAxisGrid);\n\t      _this.xAxisElement.call(_this.xAxis);\n\t      _this._isDirty = true;\n\t    });\n\t\n\t    // First render\n\t    window.requestAnimationFrame(function () {\n\t      _this.render();\n\t    });\n\t\n\t    window.onresize = function () {\n\t      var INNER_WIDTH = window.innerWidth;\n\t      var width = INNER_WIDTH - margin.left - margin.right;\n\t      _this.svg.attr(\"width\", width + margin.left + margin.right);\n\t      _this.svg.selectAll(\".timeline__right-mask\").attr(\"width\", INNER_WIDTH);\n\t      _this.x.range([0, width]);\n\t\n\t      _this._isDirty = true;\n\t      _this.header.resize(INNER_WIDTH);\n\t      _this.render();\n\t    };\n\t  };\n\t\n\t  Timeline.prototype.onUpdate = function () {\n\t    this.editor.render(false, true);\n\t  };\n\t\n\t  Timeline.prototype.render = function (time, time_changed) {\n\t    if (time_changed) {\n\t      // Update current domain when playing to keep time indicator in view.\n\t      var margin_ms = 16;\n\t      if (this.timer.getCurrentTime() > this.initialDomain[1]) {\n\t        var domainLength = this.initialDomain[1] - this.initialDomain[0];\n\t        this.initialDomain[0] += domainLength - margin_ms;\n\t        this.initialDomain[1] += domainLength - margin_ms;\n\t        this.header.setDomain(this.initialDomain);\n\t      }\n\t      if (this.timer.getCurrentTime() < this.initialDomain[0]) {\n\t        var domainLength = this.initialDomain[1] - this.initialDomain[0];\n\t        this.initialDomain[0] = this.timer.getCurrentTime();\n\t        this.initialDomain[1] = this.initialDomain[0] + domainLength;\n\t        this.header.setDomain(this.initialDomain);\n\t      }\n\t    }\n\t\n\t    if (this._isDirty || time_changed) {\n\t      // Render header and time indicator everytime the time changed.\n\t      this.header.render();\n\t      this.timeIndicator.render();\n\t    }\n\t\n\t    if (this._isDirty) {\n\t      // No need to call this on each frames, but only on brush, key drag, ...\n\t      var bar = this.items.render();\n\t      this.keysPreview.render(bar);\n\t      var properties = this.properties.render(bar);\n\t      this.errors.render(properties);\n\t      this.keys.render(properties);\n\t      this._isDirty = false;\n\t\n\t      // Adapt the timeline height.\n\t      var height = Math.max(this.items.dy + 30, 230);\n\t      this.xAxis.tickSize(-height, 0);\n\t      this.xAxisGrid.tickSize(-height, 0);\n\t      this.xGrid.call(this.xAxisGrid);\n\t      this.xAxisElement.call(this.xAxis);\n\t      this.svg.attr(\"height\", height);\n\t    }\n\t  };\n\t\n\t  return Timeline;\n\t})();\n\t\n\texports[\"default\"] = Timeline;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar $ = __webpack_require__(13);\n\tvar Signals = __webpack_require__(14);\n\tvar Property = __webpack_require__(25)[\"default\"];\n\t\n\t\n\tvar tpl_propertiesEditor = __webpack_require__(26);\n\t\n\tvar PropertiesEditor = (function () {\n\t  var PropertiesEditor = function PropertiesEditor(editor) {\n\t    this.editor = editor;\n\t\n\t    this.render = this.render.bind(this);\n\t    this.addProperty = this.addProperty.bind(this);\n\t    this.onSelect = this.onSelect.bind(this);\n\t    this.onKeyAdded = this.onKeyAdded.bind(this);\n\t\n\t    this.timeline = this.editor.timeline;\n\t    this.timer = this.editor.timer;\n\t    this.selectionManager = editor.selectionManager;\n\t\n\t    this.$el = $(tpl_propertiesEditor());\n\t    this.$container = this.$el.find(\".properties-editor__main\");\n\t    // todo: rename keyAdded to updated\n\t    this.keyAdded = new Signals.Signal();\n\t    this.keyRemoved = new Signals.Signal();\n\t    this.items = [];\n\t\n\t    // Close properties by default.\n\t    $(\"body\").addClass(\"properties-is-closed\");\n\t    // Add the properties editor to the document.\n\t    $(\"body\").append(this.$el);\n\t\n\t    this.selectionManager.onSelect.add(this.onSelect);\n\t\n\t    // Stop event propagation to no play by accident.\n\t    this.$el.keypress(function (e) {\n\t      return e.stopPropagation();\n\t    });\n\t  };\n\t\n\t  PropertiesEditor.prototype.onKeyAdded = function () {\n\t    this.keyAdded.dispatch();\n\t  };\n\t\n\t  PropertiesEditor.prototype.onSelect = function (domElement) {\n\t    if (domElement === undefined) domElement = false;\n\t    this.items = [];\n\t    this.$container.empty();\n\t    if (domElement instanceof Array) {\n\t      for (var i = 0; i < domElement.length; i++) {\n\t        var element = domElement[i];\n\t        this.addProperty(element);\n\t      }\n\t    } else {\n\t      this.addProperty(domElement);\n\t    }\n\t\n\t    // When selecting anything, automatically display the properties editor.\n\t    if (this.items.length) {\n\t      $(\"body\").removeClass(\"properties-is-closed\");\n\t    }\n\t  };\n\t\n\t  PropertiesEditor.prototype.addProperty = function (domElement) {\n\t    var prop = new Property(this.editor, this.$container, domElement);\n\t    prop.keyAdded.add(this.onKeyAdded);\n\t    this.items.push(prop);\n\t  };\n\t\n\t  PropertiesEditor.prototype.render = function (time, time_changed) {\n\t    if (!time_changed) {\n\t      return;\n\t    }\n\t    for (var i = 0; i < this.items.length; i++) {\n\t      var prop = this.items[i];\n\t      prop.update();\n\t    }\n\t  };\n\t\n\t  return PropertiesEditor;\n\t})();\n\t\n\texports[\"default\"] = PropertiesEditor;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar saveAs = __webpack_require__(27);\n\t\n\tvar EditorMenu = (function () {\n\t  var EditorMenu = function EditorMenu(tweenTime, $timeline, editor) {\n\t    this.tweenTime = tweenTime;\n\t    this.$timeline = $timeline;\n\t    this.editor = editor;\n\t    this.timer = this.tweenTime.timer;\n\t    this.initExport();\n\t    this.initToggle();\n\t  };\n\t\n\t  EditorMenu.prototype.initToggle = function () {\n\t    var timelineClosed = false;\n\t    var $toggleLink = this.$timeline.find(\"[data-action=\\\"toggle\\\"]\");\n\t    $toggleLink.click(function (e) {\n\t      e.preventDefault();\n\t      timelineClosed = !timelineClosed;\n\t      $toggleLink.toggleClass(\"menu-item--toggle-up\", timelineClosed);\n\t      $(\"body\").toggleClass(\"timeline-is-closed\", timelineClosed);\n\t      return window.dispatchEvent(new Event(\"resize\"));\n\t    });\n\t    var $toggleLinkSide = $(\".properties-editor\").find(\"[data-action=\\\"toggle\\\"]\");\n\t    $toggleLinkSide.click(function (e) {\n\t      var propertiesClosed;\n\t      e.preventDefault();\n\t      propertiesClosed = !$(\"body\").hasClass(\"properties-is-closed\");\n\t      $(\"body\").toggleClass(\"properties-is-closed\", propertiesClosed);\n\t      return window.dispatchEvent(new Event(\"resize\"));\n\t    });\n\t  };\n\t\n\t  EditorMenu.prototype.initExport = function () {\n\t    var exporter = this.editor.exporter;\n\t    this.$timeline.find(\"[data-action=\\\"export\\\"]\").click(function (e) {\n\t      e.preventDefault();\n\t      var data = exporter.getJSON();\n\t      var blob = new Blob([data], {\n\t        type: \"text/json;charset=utf-8\"\n\t      });\n\t      saveAs(blob, \"data.json\");\n\t    });\n\t  };\n\t\n\t  return EditorMenu;\n\t})();\n\t\n\texports[\"default\"] = EditorMenu;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar EditorControls = (function () {\n\t  var EditorControls = function EditorControls(tweenTime, $timeline) {\n\t    var _this = this;\n\t    this.tweenTime = tweenTime;\n\t    this.$timeline = $timeline;\n\t    this.timer = this.tweenTime.timer;\n\t    this.$time = this.$timeline.find(\".control--time\");\n\t    this.$time_end = this.$timeline.find(\".control--time-end\");\n\t    this.initControls();\n\t    this.$time_end.val(this.tweenTime.timer.getDuration());\n\t\n\t    $(document).keypress(function (e) {\n\t      if (e.charCode == 32) {\n\t        // Space\n\t        _this.playPause();\n\t      }\n\t    });\n\t  };\n\t\n\t  EditorControls.prototype.playPause = function () {\n\t    var $play_pause;\n\t    this.timer.toggle();\n\t    $play_pause = this.$timeline.find(\".control--play-pause\");\n\t    $play_pause.toggleClass(\"icon-pause\", this.timer.is_playing);\n\t    $play_pause.toggleClass(\"icon-play\", !this.timer.is_playing);\n\t  };\n\t\n\t  EditorControls.prototype.initControls = function () {\n\t    var _this2 = this;\n\t    var $play_pause = this.$timeline.find(\".control--play-pause\");\n\t    $play_pause.click(function (e) {\n\t      e.preventDefault();\n\t      _this2.playPause();\n\t    });\n\t    var $bt_first = this.$timeline.find(\".control--first\");\n\t    $bt_first.click(function (e) {\n\t      e.preventDefault();\n\t      _this2.timer.seek([0]);\n\t    });\n\t    var $bt_last = this.$timeline.find(\".control--last\");\n\t    $bt_last.click(function (e) {\n\t      e.preventDefault();\n\t      var total = _this2.tweenTime.getTotalDuration();\n\t      _this2.timer.seek([total * 1000]);\n\t    });\n\t    this.$time.change(function () {\n\t      var seconds = parseFloat(_this2.$time.val(), 10) * 1000;\n\t      _this2.timer.seek([seconds]);\n\t    });\n\t    this.$time_end.change(function () {\n\t      var seconds = parseFloat(_this2.$time_end.val(), 10);\n\t      _this2.timer.setDuration(seconds);\n\t    });\n\t  };\n\t\n\t  EditorControls.prototype.render = function (time, time_changed) {\n\t    if (time_changed) {\n\t      var seconds = time / 1000;\n\t      this.$time.val(seconds.toFixed(3));\n\t    }\n\t  };\n\t\n\t  return EditorControls;\n\t})();\n\t\n\texports[\"default\"] = EditorControls;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar d3 = __webpack_require__(12);\n\tvar Signals = __webpack_require__(14);\n\t\n\tvar SelectionManager = (function () {\n\t  var SelectionManager = function SelectionManager(tweenTime) {\n\t    this.tweenTime = tweenTime;\n\t    this.selection = [];\n\t    this.onSelect = new Signals.Signal();\n\t  };\n\t\n\t  SelectionManager.prototype.removeDuplicates = function () {\n\t    var result = [];\n\t    for (var i = 0; i < this.selection.length; i++) {\n\t      var item = this.selection[i];\n\t      var found = false;\n\t      for (var j = 0; j < result.length; j++) {\n\t        var item2 = result[j];\n\t        if (item.isEqualNode(item2)) {\n\t          found = true;\n\t          break;\n\t        }\n\t      }\n\t      if (found === false) {\n\t        result.push(item);\n\t      }\n\t    }\n\t    this.selection = result;\n\t  };\n\t\n\t  SelectionManager.prototype.removeItem = function (item) {\n\t    var index = this.selection.indexOf(item);\n\t    if (index > -1) {\n\t      this.selection.splice(index, 1);\n\t    }\n\t  };\n\t\n\t  SelectionManager.prototype.sortSelection = function () {\n\t    var compare = function (a, b) {\n\t      if (!a.__data__ || !b.__data__) {\n\t        return 0;\n\t      }\n\t      if (a.__data__.time < b.__data__.time) {\n\t        return -1;\n\t      }\n\t      if (a.__data__.time > b.__data__.time) {\n\t        return 1;\n\t      }\n\t      return 0;\n\t    };\n\t    this.selection = this.selection.sort(compare);\n\t  };\n\t\n\t  SelectionManager.prototype.reset = function () {\n\t    this.selection = [];\n\t    this.highlightItems();\n\t    this.onSelect.dispatch(this.selection, false);\n\t  };\n\t\n\t  SelectionManager.prototype.triggerSelect = function () {\n\t    this.onSelect.dispatch(this.selection, false);\n\t  };\n\t\n\t  SelectionManager.prototype.select = function (item, addToSelection) {\n\t    if (addToSelection === undefined) addToSelection = false;\n\t    if (!addToSelection) {\n\t      this.selection = [];\n\t    }\n\t    if (item instanceof Array) {\n\t      for (var i = 0; i < item.length; i++) {\n\t        var el = item[i];\n\t        this.selection.push(el);\n\t      }\n\t    } else {\n\t      this.selection.push(item);\n\t    }\n\t\n\t    this.removeDuplicates();\n\t    this.highlightItems();\n\t    this.sortSelection();\n\t    this.onSelect.dispatch(this.selection, addToSelection);\n\t  };\n\t\n\t  SelectionManager.prototype.getSelection = function () {\n\t    return this.selection;\n\t  };\n\t\n\t  SelectionManager.prototype.highlightItems = function () {\n\t    d3.selectAll(\".bar--selected\").classed(\"bar--selected\", false);\n\t    d3.selectAll(\".key--selected\").classed(\"key--selected\", false);\n\t\n\t    for (var i = 0; i < this.selection.length; i++) {\n\t      var item = this.selection[i];\n\t      var d3item = d3.select(item);\n\t      if (d3item.classed(\"bar\")) {\n\t        d3item.classed(\"bar--selected\", true);\n\t      } else if (d3item.classed(\"key\")) {\n\t        d3item.classed(\"key--selected\", true);\n\t      }\n\t    }\n\t  };\n\t\n\t  return SelectionManager;\n\t})();\n\t\n\texports[\"default\"] = SelectionManager;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar Exporter = (function () {\n\t  var Exporter = function Exporter(editor) {\n\t    this.editor = editor;\n\t  };\n\t\n\t  Exporter.prototype.getData = function () {\n\t    var tweenTime = this.editor.tweenTime;\n\t    var domain = this.editor.timeline.x.domain();\n\t    var domain_start = domain[0];\n\t    var domain_end = domain[1];\n\t    return {\n\t      settings: {\n\t        time: tweenTime.timer.getCurrentTime(),\n\t        duration: tweenTime.timer.getDuration(),\n\t        domain: [domain_start.getTime(), domain_end.getTime()]\n\t      },\n\t      data: tweenTime.data\n\t    };\n\t  };\n\t\n\t  Exporter.prototype.getJSON = function () {\n\t    var options = this.editor.options;\n\t    var json_replacer = function (key, val) {\n\t      // Disable all private properies from TweenMax/TimelineMax\n\t      if (key.indexOf(\"_\") === 0) {\n\t        return undefined;\n\t      }\n\t      if (options.json_replacer != null) {\n\t        return options.json_replacer(key, val);\n\t      }\n\t      return val;\n\t    };\n\t\n\t    data = this.getData();\n\t    return JSON.stringify(data, json_replacer, 2);\n\t  };\n\t\n\t  return Exporter;\n\t})();\n\t\n\texports[\"default\"] = Exporter;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar $ = __webpack_require__(13);\n\t\n\tvar UndoManager = (function () {\n\t  var UndoManager = function UndoManager(editor) {\n\t    var _this = this;\n\t    this.editor = editor;\n\t    this.history_max = 100;\n\t    this.history = [];\n\t    this.current_index = 0;\n\t\n\t    // Add the initial state\n\t    this.addState();\n\t\n\t    $(document).keydown(function (e) {\n\t      if (e.keyCode == 90) {\n\t        if (e.metaKey || e.ctrlKey) {\n\t          if (!e.shiftKey) {\n\t            // (command | ctrl) Z\n\t            _this.undo();\n\t          } else {\n\t            // (command | ctrl) shift Z\n\t            _this.redo();\n\t          }\n\t        }\n\t      }\n\t    });\n\t  };\n\t\n\t  UndoManager.prototype.undo = function () {\n\t    // If there is no more history return\n\t    if (this.current_index <= 0) {\n\t      return false;\n\t    }\n\t    this.current_index -= 1;\n\t    this.setState(this.current_index);\n\t  };\n\t\n\t  UndoManager.prototype.redo = function () {\n\t    // Stop if there is no more things.\n\t    if (this.current_index >= this.history.length - 1) {\n\t      return false;\n\t    }\n\t    this.current_index += 1;\n\t    this.setState(this.current_index);\n\t  };\n\t\n\t  UndoManager.prototype.addState = function () {\n\t    var data = JSON.parse(this.editor.exporter.getJSON());\n\t\n\t    // if we did some undo before and then edit something,\n\t    // we want to remove all actions past the current index first.\n\t    if (this.current_index + 1 < this.history.length) {\n\t      this.history.splice(this.current_index + 1, this.history.length - 1);\n\t    }\n\t\n\t    this.history.push(data);\n\t\n\t    // Keep history to a max size by removing the first element if needed.\n\t    if (this.history.length > this.history_max) {\n\t      this.history.shift();\n\t    }\n\t\n\t    // Set the current index\n\t    this.current_index = this.history.length - 1;\n\t  };\n\t\n\t  UndoManager.prototype.setState = function (index) {\n\t    var state = this.history[index];\n\t    var data = state.data;\n\t    var tweenTime = this.editor.tweenTime;\n\t\n\t    // naively copy keys and values from previous state\n\t    for (var item_key = 0; item_key < data.length; item_key++) {\n\t      var item = data[item_key];\n\t      // if item is not defined copy it\n\t      if (!tweenTime.data[item_key]) {\n\t        tweenTime.data[item_key] = item;\n\t      } else {\n\t        for (var prop_key = 0; prop_key < item.properties.length; prop_key++) {\n\t          var prop = item.properties[prop_key];\n\t          // if property is not defined copy it\n\t          if (!tweenTime.data[item_key].properties[prop_key]) {\n\t            tweenTime.data[item_key].properties[prop_key] = prop;\n\t          } else {\n\t            // set property keys\n\t            var keys = tweenTime.data[item_key].properties[prop_key].keys;\n\t            for (var key_key = 0; key_key < prop.keys.length; key_key++) {\n\t              var key = prop.keys[key_key];\n\t              if (!keys[key_key]) {\n\t                keys[key_key] = key;\n\t              } else {\n\t                keys[key_key].time = key.time;\n\t                keys[key_key].val = key.val;\n\t                keys[key_key].ease = key.ease;\n\t              }\n\t            }\n\t          }\n\t        }\n\t      }\n\t\n\t      tweenTime.data[item_key]._isDirty = true;\n\t    }\n\t    this.editor.render(false, true);\n\t  };\n\t\n\t  return UndoManager;\n\t})();\n\t\n\texports[\"default\"] = UndoManager;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar Utils = (function () {\n\t  var Utils = function Utils() {};\n\t\n\t  Utils.formatMinutes = function (d) {\n\t    // convert milliseconds to seconds\n\t    d = d / 1000;\n\t    var hours = Math.floor(d / 3600);\n\t    var minutes = Math.floor((d - (hours * 3600)) / 60);\n\t    var seconds = d - (minutes * 60);\n\t    var output = seconds + \"s\";\n\t    if (minutes) {\n\t      output = minutes + \"m \" + output;\n\t    }\n\t    if (hours) {\n\t      output = hours + \"h \" + output;\n\t    }\n\t    return output;\n\t  };\n\t\n\t  Utils.getClosestTime = function (data, time, objectId, property_name, timer, tolerance) {\n\t    if (objectId === undefined) objectId = false;\n\t    if (property_name === undefined) property_name = false;\n\t    if (timer === undefined) timer = false;\n\t    if (tolerance === undefined) tolerance = 0.1;\n\t    if (timer) {\n\t      var timer_time = timer.getCurrentTime() / 1000;\n\t      if (Math.abs(timer_time - time) <= tolerance) {\n\t        return timer_time;\n\t      }\n\t    }\n\t\n\t    if (objectId || property_name) {\n\t      for (var i = 0; i < data.length; i++) {\n\t        var item = data[i];\n\t        // Don't match item with itself, but allow property to match item start/end.\n\t        if (item.id != objectId || property_name) {\n\t          // First check start & end.\n\t          if (Math.abs(item.start - time) <= tolerance) {\n\t            return item.start;\n\t          }\n\t\n\t          if (Math.abs(item.end - time) <= tolerance) {\n\t            return item.end;\n\t          }\n\t        }\n\t\n\t        // Test properties keys\n\t        for (var j = 0; j < item.properties.length; j++) {\n\t          var prop = item.properties[j];\n\t          // Don't match property with itself.\n\t          if (prop.keys && (item.id != objectId || prop.name != property_name)) {\n\t            for (var k = 0; k < prop.keys; k++) {\n\t              var key = prop.keys[k];\n\t              if (Math.abs(key.time - time) <= tolerance) {\n\t                return key.time;\n\t              }\n\t            }\n\t          }\n\t        }\n\t      }\n\t    }\n\t    return false;\n\t  };\n\t\n\t  Utils.getPreviousKey = function (keys, time) {\n\t    var prevKey = false;\n\t    for (var i = 0; i < keys.length; i++) {\n\t      var key = keys[i];\n\t      if (key.time < time) {\n\t        prevKey = key;\n\t      } else {\n\t        return prevKey;\n\t      }\n\t    }\n\t    return prevKey;\n\t  };\n\t\n\t  Utils.sortKeys = function (keys) {\n\t    var compare = function (a, b) {\n\t      if (a.time < b.time) {\n\t        return -1;\n\t      }\n\t      if (a.time > b.time) {\n\t        return 1;\n\t      }\n\t      return 0;\n\t    };\n\t    return keys.sort(compare);\n\t  };\n\t\n\t  Utils.guid = function () {\n\t    var s4 = function () {\n\t      return Math.floor((1 + Math.random()) * 65536).toString(16).substring(1);\n\t    };\n\t    return s4() + s4() + \"-\" + s4() + \"-\" + s4() + \"-\" + s4() + \"-\" + s4() + s4() + s4();\n\t  };\n\t\n\t  return Utils;\n\t})();\n\t\n\texports[\"default\"] = Utils;\n\n/***/ },\n/* 10 */,\n/* 11 */,\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_12__;\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_13__;\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_14__;\n\n/***/ },\n/* 15 */,\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar H = __webpack_require__(37);\n\tmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"timeline\\\">\");t.b(\"\\n\" + i);t.b(\"  <nav class=\\\"timeline__menu\\\">\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"menu-item\\\" data-action=\\\"export\\\">Export</a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\");t.b(\"\\n\" + i);t.b(\"  </nav>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__controls controls\\\">\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--first icon-first\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--play-pause icon-play\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--last icon-last\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <input type=\\\"text\\\" class=\\\"control control--input control--time\\\" /> <span class=\\\"control__time-separator\\\">/</span> <input type=\\\"text\\\" class=\\\"control control--input control--time-end\\\" />\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__header\\\">\");t.b(\"\\n\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__main\\\">\");t.b(\"\\n\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"timeline\\\">\\n  <nav class=\\\"timeline__menu\\\">\\n    <a href=\\\"#\\\" class=\\\"menu-item\\\" data-action=\\\"export\\\">Export</a>\\n    <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\\n  </nav>\\n  <div class=\\\"timeline__controls controls\\\">\\n    <a href=\\\"#\\\" class=\\\"control control--first icon-first\\\"></a>\\n    <a href=\\\"#\\\" class=\\\"control control--play-pause icon-play\\\"></a>\\n    <a href=\\\"#\\\" class=\\\"control control--last icon-last\\\"></a>\\n    <input type=\\\"text\\\" class=\\\"control control--input control--time\\\" /> <span class=\\\"control__time-separator\\\">/</span> <input type=\\\"text\\\" class=\\\"control control--input control--time-end\\\" />\\n  </div>\\n  <div class=\\\"timeline__header\\\">\\n\\n  </div>\\n  <div class=\\\"timeline__main\\\">\\n\\n  </div>\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar d3 = __webpack_require__(12);\n\t\n\tvar Signals = __webpack_require__(14);\n\tvar Utils = __webpack_require__(9)[\"default\"];\n\tvar Header = (function () {\n\t  var Header = function Header(timer, initialDomain, tweenTime, width, margin) {\n\t    this.timer = timer;\n\t    this.initialDomain = initialDomain;\n\t    this.tweenTime = tweenTime;\n\t\n\t    this.onBrush = new Signals.Signal();\n\t    this.margin = { top: 10, right: 20, bottom: 0, left: margin.left };\n\t    this.height = 50 - this.margin.top - this.margin.bottom + 20;\n\t\n\t    this.currentTime = this.timer.time;\n\t    this.x = d3.time.scale().range([0, width]);\n\t    this.x.domain([0, this.timer.totalDuration]);\n\t\n\t    // Same as this.x from timeline\n\t    this.xDisplayed = d3.time.scale().range([0, width]);\n\t    this.xDisplayed.domain(this.initialDomain);\n\t\n\t    this.xAxis = d3.svg.axis().scale(this.x).orient(\"top\").tickSize(-5, 0).tickFormat(Utils.formatMinutes);\n\t\n\t    this.svg = d3.select(\".timeline__header\").append(\"svg\").attr(\"width\", width + this.margin.left + this.margin.right).attr(\"height\", 56);\n\t\n\t    this.svgContainer = this.svg.append(\"g\").attr(\"transform\", \"translate(\" + this.margin.left + \",\" + this.margin.top + \")\");\n\t\n\t    this.createBrushHandle();\n\t    this.createTimeHandle();\n\t    this.timer.durationChanged.add(this.onDurationChanged);\n\t  };\n\t\n\t  Header.prototype.adaptDomainToDuration = function (domain, seconds) {\n\t    var ms = seconds * 1000;\n\t    var new_domain = [domain[0], domain[1]];\n\t    // Make the domain smaller or equal to ms.\n\t    new_domain[0] = Math.min(new_domain[0], ms);\n\t    new_domain[1] = Math.min(new_domain[1], ms);\n\t    // Should not go below 0.\n\t    new_domain[0] = Math.max(new_domain[0], 0);\n\t\n\t    return new_domain;\n\t  };\n\t\n\t  Header.prototype.setDomain = function () {\n\t    this.brush.x(this.x).extent(this.initialDomain);\n\t    this.svgContainer.select(\".brush\").call(this.brush);\n\t    // Same as onBrush\n\t    this.onBrush.dispatch(this.initialDomain);\n\t    this.render();\n\t    this.xDisplayed.domain(this.initialDomain);\n\t  };\n\t\n\t  Header.prototype.onDurationChanged = function (seconds) {\n\t    this.x.domain([0, this.timer.totalDuration]);\n\t    this.xAxisElement.call(this.xAxis);\n\t    this.initialDomain = this.adaptDomainToDuration(this.initialDomain, seconds);\n\t    this.setDomain(this.initialDomain);\n\t  };\n\t\n\t  Header.prototype.createBrushHandle = function () {\n\t    var _this = this;\n\t    this.xAxisElement = this.svgContainer.append(\"g\").attr(\"class\", \"x axis\").attr(\"transform\", \"translate(0,\" + (this.margin.top + 7) + \")\").call(this.xAxis);\n\t\n\t    var onBrush = function () {\n\t      var extent0 = _this.brush.extent();\n\t      // Get domain as milliseconds and not date.\n\t      var start = extent0[0].getTime();\n\t      var end = extent0[1].getTime();\n\t      // Set the initial domain.\n\t      _this.initialDomain[0] = start;\n\t      _this.initialDomain[1] = end;\n\t      _this.setDomain(_this.initialDomain);\n\t    };\n\t\n\t    this.brush = d3.svg.brush().x(this.x).extent(this.initialDomain).on(\"brush\", onBrush);\n\t\n\t    this.gBrush = this.svgContainer.append(\"g\").attr(\"class\", \"brush\").call(this.brush).selectAll(\"rect\").attr(\"height\", 20);\n\t  };\n\t\n\t  Header.prototype.render = function () {\n\t    var timeSelection = this.svgContainer.selectAll(\".time-indicator\");\n\t    timeSelection.attr(\"transform\", \"translate(\" + (this.xDisplayed(this.currentTime[0])) + \", 25)\");\n\t  };\n\t\n\t  Header.prototype.createTimeHandle = function () {\n\t    var self = this;\n\t\n\t    var dragTimeMove = function () {\n\t      var event = d3.event.sourceEvent;\n\t      event.stopPropagation();\n\t      var tweenTime = self.tweenTime;\n\t      var event_x = event.x != null ? event.x : event.clientX;\n\t      var dx = self.xDisplayed.invert(event_x - self.margin.left);\n\t      dx = dx.getTime();\n\t      dx = Math.max(0, dx);\n\t\n\t      var timeMatch = false;\n\t      if (event.shiftKey) {\n\t        time = dx / 1000;\n\t        timeMatch = Utils.getClosestTime(tweenTime.data, time, \"---non-existant\");\n\t        if (timeMatch !== false) {\n\t          timeMatch = timeMatch * 1000;\n\t        }\n\t      }\n\t      if (timeMatch === false) {\n\t        timeMatch = dx;\n\t      }\n\t      self.timer.seek([timeMatch]);\n\t    };\n\t\n\t    var dragTime = d3.behavior.drag().origin(function (d) {\n\t      return d;\n\t    }).on(\"drag\", dragTimeMove);\n\t\n\t    var timeSelection = this.svgContainer.selectAll(\".time-indicator\").data(this.currentTime);\n\t\n\t    timeSelection.enter().append(\"rect\").attr(\"x\", 0).attr(\"y\", 20).attr(\"width\", self.xDisplayed(self.timer.totalDuration)).attr(\"height\", 50).attr(\"fill-opacity\", 0).on(\"click\", function () {\n\t      var mouse = d3.mouse(this);\n\t      var dx = self.xDisplayed.invert(mouse[0]);\n\t      dx = dx.getTime();\n\t      dx = Math.max(0, dx);\n\t      self.timer.seek([dx]);\n\t    });\n\t\n\t    var timeGrp = timeSelection.enter().append(\"g\").attr(\"class\", \"time-indicator\").attr(\"transform\", \"translate(-0.5,\" + 30 + \")\").call(dragTime);\n\t\n\t    timeGrp.append(\"rect\").attr(\"class\", \"time-indicator__line\").attr(\"x\", -0.5).attr(\"y\", 0).attr(\"width\", 1).attr(\"height\", 1000);\n\t\n\t    timeGrp.append(\"path\").attr(\"class\", \"time-indicator__handle\").attr(\"d\", \"M -5 -3 L -5 5 L 0 10 L 5 5 L 5 -3 L -5 -3\");\n\t\n\t    // Mask time indicator\n\t    // todo: remove the mask.\n\t    this.svgContainer.append(\"rect\").attr(\"class\", \"graph-mask\").attr(\"x\", -self.margin.left).attr(\"y\", -self.margin.top).attr(\"width\", self.margin.left - 5).attr(\"height\", self.height);\n\t  };\n\t\n\t  Header.prototype.resize = function (width) {\n\t    width = width - this.margin.left - this.margin.right;\n\t    this.svg.attr(\"width\", width + this.margin.left + this.margin.right);\n\t\n\t    this.x.range([0, width]);\n\t    this.xDisplayed.range([0, width]);\n\t    this.xAxisElement.call(this.xAxis);\n\t  };\n\t\n\t  return Header;\n\t})();\n\t\n\texports[\"default\"] = Header;\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar TimeIndicator = (function () {\n\t  var TimeIndicator = function TimeIndicator(timeline, container) {\n\t    this.timeline = timeline;\n\t    this.container = container;\n\t    this.timeSelection = this.container.selectAll(\".time-indicator\").data(this.timeline.currentTime);\n\t    var timeGrp = this.timeSelection.enter().append(\"svg\").attr(\"class\", \"time-indicator timeline__right-mask\").attr(\"width\", window.innerWidth - this.timeline.label_position_x).attr(\"height\", 442);\n\t\n\t    this.timeSelection = timeGrp.append(\"rect\").attr(\"class\", \"time-indicator__line\").attr(\"x\", -1).attr(\"y\", -this.timeline.margin.top - 5).attr(\"width\", 1).attr(\"height\", 1000);\n\t  };\n\t\n\t  TimeIndicator.prototype.render = function () {\n\t    this.timeSelection = this.container.selectAll(\".time-indicator rect\");\n\t    this.timeSelection.attr(\"x\", this.timeline.x(this.timeline.currentTime[0]) - 0.5);\n\t  };\n\t\n\t  return TimeIndicator;\n\t})();\n\t\n\texports[\"default\"] = TimeIndicator;\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar d3 = __webpack_require__(12);\n\tvar Signals = __webpack_require__(14);\n\tvar _ = __webpack_require__(1);\n\tvar Utils = __webpack_require__(9)[\"default\"];\n\tvar Items = (function () {\n\t  var Items = function Items(timeline, container) {\n\t    this.timeline = timeline;\n\t    this.container = container;\n\t    this.dy = 10 + this.timeline.margin.top;\n\t    this.onUpdate = new Signals.Signal();\n\t  };\n\t\n\t  Items.prototype.render = function () {\n\t    var self = this;\n\t    var tweenTime = self.timeline.tweenTime;\n\t\n\t    var selectBar = function () {\n\t      self.timeline.selectionManager.select(this);\n\t    };\n\t\n\t    var dragmove = function (d) {\n\t      var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n\t      var diff = (dx - d.start);\n\t      d.start += diff;\n\t      d.end += diff;\n\t      if (d.properties) {\n\t        for (var prop_key = 0; prop_key < d.properties.length; prop_key++) {\n\t          var prop = d.properties[prop_key];\n\t          for (var i = 0; i < prop.keys.length; i++) {\n\t            var key = prop.keys[i];\n\t            key.time += diff;\n\t          }\n\t        }\n\t      }\n\t      d._isDirty = true;\n\t      self.onUpdate.dispatch();\n\t    };\n\t\n\t    var dragmoveLeft = function (d) {\n\t      d3.event.sourceEvent.stopPropagation();\n\t      var sourceEvent = d3.event.sourceEvent;\n\t      var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n\t      var timeMatch = false;\n\t      if (sourceEvent.shiftKey) {\n\t        timeMatch = Utils.getClosestTime(tweenTime.data, dx, d.id, false, tweenTime.timer);\n\t      }\n\t      if (!timeMatch) {\n\t        var diff = dx - d.start;\n\t        timeMatch = d.start + diff;\n\t      }\n\t      d.start = timeMatch;\n\t      d._isDirty = true;\n\t      self.onUpdate.dispatch();\n\t    };\n\t\n\t    var dragmoveRight = function (d) {\n\t      d3.event.sourceEvent.stopPropagation();\n\t      var sourceEvent = d3.event.sourceEvent;\n\t      var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n\t      var timeMatch = false;\n\t      if (sourceEvent.shiftKey) {\n\t        timeMatch = Utils.getClosestTime(tweenTime.data, dx, false, false, tweenTime.timer);\n\t      }\n\t      if (!timeMatch) {\n\t        var diff = dx - d.end;\n\t        timeMatch = d.end + diff;\n\t      }\n\t      d.end = timeMatch;\n\t      d._isDirty = true;\n\t      self.onUpdate.dispatch();\n\t    };\n\t\n\t    var dragLeft = d3.behavior.drag().origin(function () {\n\t      var t = d3.select(this);\n\t      return { x: t.attr(\"x\"), y: t.attr(\"y\") };\n\t    }).on(\"drag\", dragmoveLeft);\n\t\n\t    var dragRight = d3.behavior.drag().origin(function () {\n\t      var t = d3.select(this);\n\t      return { x: t.attr(\"x\"), y: t.attr(\"y\") };\n\t    }).on(\"drag\", dragmoveRight);\n\t\n\t    var drag = d3.behavior.drag().origin(function () {\n\t      var t = d3.select(this);\n\t      return { x: t.attr(\"x\"), y: t.attr(\"y\") };\n\t    }).on(\"drag\", dragmove);\n\t\n\t    var bar_border = 1;\n\t    var bar = this.container.selectAll(\".line-grp\").data(this.timeline.tweenTime.data, function (d) {\n\t      return d.id;\n\t    });\n\t\n\t    var barEnter = bar.enter().append(\"g\").attr(\"class\", \"line-grp\");\n\t\n\t    var barContainerRight = barEnter.append(\"svg\").attr(\"class\", \"timeline__right-mask\").attr(\"width\", window.innerWidth - self.timeline.label_position_x).attr(\"height\", self.timeline.lineHeight);\n\t\n\t    barContainerRight.append(\"rect\").attr(\"class\", \"bar\")\n\t    // Add a unique id for SelectionManager.removeDuplicates\n\t    .attr(\"id\", function () {\n\t      return Utils.guid();\n\t    }).attr(\"y\", 3).attr(\"height\", 14);\n\t\n\t    barContainerRight.append(\"rect\").attr(\"class\", \"bar-anchor bar-anchor--left\").attr(\"y\", 2).attr(\"height\", 16).attr(\"width\", 6).call(dragLeft);\n\t\n\t    barContainerRight.append(\"rect\").attr(\"class\", \"bar-anchor bar-anchor--right\").attr(\"y\", 2).attr(\"height\", 16).attr(\"width\", 6).call(dragRight);\n\t\n\t    self.dy = 10 + this.timeline.margin.top;\n\t    bar.attr(\"transform\", function (d) {\n\t      var y = self.dy;\n\t      self.dy += self.timeline.lineHeight;\n\t      if (!d.collapsed) {\n\t        var numProperties = 0;\n\t        if (d.properties) {\n\t          var visibleProperties = _.filter(d.properties, function (prop) {\n\t            return prop.keys.length;\n\t          });\n\t          numProperties = visibleProperties.length;\n\t        }\n\t        self.dy += numProperties * self.timeline.lineHeight;\n\t      }\n\t      return \"translate(0,\" + y + \")\";\n\t    });\n\t\n\t    var barWithStartAndEnd = function (d) {\n\t      if ((d.start != null) && (d.end != null)) {\n\t        return true;\n\t      }\n\t      return false;\n\t    };\n\t\n\t    bar.selectAll(\".bar-anchor--left\").filter(barWithStartAndEnd).attr(\"x\", function (d) {\n\t      return self.timeline.x(d.start * 1000) - 1;\n\t    }).on(\"mousedown\", function () {\n\t      // Don't trigger mousedown on linescontainer else\n\t      // it create the selection rectangle\n\t      d3.event.stopPropagation();\n\t    });\n\t\n\t    bar.selectAll(\".bar-anchor--right\").filter(barWithStartAndEnd).attr(\"x\", function (d) {\n\t      return self.timeline.x(d.end * 1000) - 1;\n\t    }).on(\"mousedown\", function () {\n\t      // Don't trigger mousedown on linescontainer else\n\t      // it create the selection rectangle\n\t      d3.event.stopPropagation();\n\t    });\n\t\n\t    bar.selectAll(\".bar\").filter(barWithStartAndEnd).attr(\"x\", function (d) {\n\t      return self.timeline.x(d.start * 1000) + bar_border;\n\t    }).attr(\"width\", function (d) {\n\t      return Math.max(0, (self.timeline.x(d.end) - self.timeline.x(d.start)) * 1000 - bar_border);\n\t    }).call(drag).on(\"click\", selectBar).on(\"mousedown\", function () {\n\t      // Don't trigger mousedown on linescontainer else\n\t      // it create the selection rectangle\n\t      d3.event.stopPropagation();\n\t    });\n\t\n\t    barEnter.append(\"text\").attr(\"class\", \"line-label\").attr(\"x\", self.timeline.label_position_x + 10).attr(\"y\", 16).text(function (d) {\n\t      return d.label;\n\t    }).on(\"click\", selectBar).on(\"mousedown\", function () {\n\t      // Don't trigger mousedown on linescontainer else\n\t      // it create the selection rectangle\n\t      d3.event.stopPropagation();\n\t    });\n\t\n\t    var self = this;\n\t    barEnter.append(\"text\").attr(\"class\", \"line__toggle\").attr(\"x\", self.timeline.label_position_x - 10).attr(\"y\", 16).on(\"click\", function (d) {\n\t      d.collapsed = !d.collapsed;\n\t      self.onUpdate.dispatch();\n\t    });\n\t\n\t    bar.selectAll(\".line__toggle\").text(function (d) {\n\t      if (d.collapsed) {\n\t        return \"\\u25b8\";\n\t      } else {\n\t        return \"\\u25be\";\n\t      }\n\t    });\n\t\n\t    barEnter.append(\"line\").attr(\"class\", \"line-separator\").attr(\"x1\", -self.timeline.margin.left).attr(\"x2\", self.timeline.x(self.timeline.timer.totalDuration + 100)).attr(\"y1\", self.timeline.lineHeight).attr(\"y2\", self.timeline.lineHeight);\n\t\n\t    bar.exit().remove();\n\t\n\t    return bar;\n\t  };\n\t\n\t  return Items;\n\t})();\n\t\n\texports[\"default\"] = Items;\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar d3 = __webpack_require__(12);\n\t\n\tvar KeysPreview = (function () {\n\t  var KeysPreview = function KeysPreview(timeline, container) {\n\t    this.timeline = timeline;\n\t    this.container = container;\n\t  };\n\t\n\t  KeysPreview.prototype.render = function (bar) {\n\t    var self = this;\n\t\n\t    var propVal = function (d) {\n\t      if (d.properties) {\n\t        return d.properties;\n\t      } else {\n\t        return [];\n\t      }\n\t    };\n\t    var propKey = function (d) {\n\t      return d.name;\n\t    };\n\t\n\t    var properties = bar.selectAll(\".keys-preview\").data(propVal, propKey);\n\t\n\t    properties.enter().append(\"svg\").attr(\"class\", \"keys-preview timeline__right-mask\").attr(\"width\", window.innerWidth - self.timeline.label_position_x).attr(\"height\", self.timeline.lineHeight);\n\t\n\t    var setItemStyle = function () {\n\t      var item = d3.select(this.parentNode.parentNode);\n\t      var bar_data = item.datum();\n\t      if (bar_data.collapsed === true) {\n\t        return \"\";\n\t      }\n\t      // Show only when item is collapsed\n\t      return \"display: none;\";\n\t    };\n\t\n\t    properties.selectAll(\".key--preview\").attr(\"style\", setItemStyle);\n\t\n\t    var keyValue = function (d) {\n\t      return d.keys;\n\t    };\n\t    var keyKey = function (d) {\n\t      return d.time;\n\t    };\n\t    var keys = properties.selectAll(\".key--preview\").data(keyValue, keyKey);\n\t\n\t    keys.enter().append(\"path\").attr(\"class\", \"key--preview\").attr(\"style\", setItemStyle).attr(\"d\", \"M 0 -4 L 4 0 L 0 4 L -4 0\");\n\t\n\t    keys.attr(\"transform\", function (d) {\n\t      var dx = self.timeline.x(d.time * 1000);\n\t      dx = parseInt(dx, 10);\n\t      var dy = 11;\n\t      return \"translate(\" + dx + \",\" + dy + \")\";\n\t    });\n\t\n\t    keys.exit().remove();\n\t  };\n\t\n\t  return KeysPreview;\n\t})();\n\t\n\texports[\"default\"] = KeysPreview;\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar d3 = __webpack_require__(12);\n\tvar Signals = __webpack_require__(14);\n\tvar Utils = __webpack_require__(9)[\"default\"];\n\tvar Properties = (function () {\n\t  var Properties = function Properties(timeline) {\n\t    this.timeline = timeline;\n\t    this.onKeyAdded = new Signals.Signal();\n\t    this.subGrp = false;\n\t  };\n\t\n\t  Properties.prototype.render = function (bar) {\n\t    var _this = this;\n\t    var self = this;\n\t\n\t    var propVal = function (d) {\n\t      if (d.properties) {\n\t        return d.properties;\n\t      } else {\n\t        return [];\n\t      }\n\t    };\n\t    var propKey = function (d) {\n\t      return d.name;\n\t    };\n\t    var visibleProperties = function (d) {\n\t      return d.keys.length;\n\t    };\n\t\n\t    var properties = bar.selectAll(\".line-item\").data(propVal, propKey);\n\t\n\t    var subGrp = properties.enter().append(\"g\").filter(visibleProperties).attr(\"class\", \"line-item\");\n\t\n\t    // Save subGrp in a variable for use in Errors.coffee\n\t    self.subGrp = subGrp;\n\t\n\t    properties.filter(visibleProperties).attr(\"transform\", function (d, i) {\n\t      var sub_height = (i + 1) * self.timeline.lineHeight;\n\t      return \"translate(0,\" + sub_height + \")\";\n\t    });\n\t\n\t    subGrp.append(\"rect\").attr(\"class\", \"click-handler click-handler--property\").attr(\"x\", 0).attr(\"y\", 0).attr(\"width\", self.timeline.x(self.timeline.timer.totalDuration + 100)).attr(\"height\", self.timeline.lineHeight).on(\"dblclick\", function (d) {\n\t      var lineObject = _this.parentNode.parentNode;\n\t      var lineValue = d3.select(lineObject).datum();\n\t      var def = d[\"default\"] ? d[\"default\"] : 0;\n\t      var mouse = d3.mouse(_this);\n\t      var dx = self.timeline.x.invert(mouse[0]);\n\t      dx = dx.getTime() / 1000;\n\t      var prevKey = Utils.getPreviousKey(d.keys, dx);\n\t      // set the value to match the previous key if we found one\n\t      if (prevKey) {\n\t        def = prevKey.val;\n\t      }\n\t      var newKey = {\n\t        time: dx,\n\t        val: def\n\t      };\n\t      d.keys.push(newKey);\n\t      // Sort the keys for tweens creation\n\t      d.keys = Utils.sortKeys(d.keys);\n\t\n\t      lineValue._isDirty = true;\n\t      keyContainer = _this.parentNode;\n\t      self.onKeyAdded.dispatch(newKey, keyContainer);\n\t    });\n\t\n\t    // Mask\n\t    subGrp.append(\"svg\").attr(\"class\", \"line-item__keys timeline__right-mask\").attr(\"width\", window.innerWidth - self.timeline.label_position_x).attr(\"height\", self.timeline.lineHeight).attr(\"fill\", \"#f00\");\n\t\n\t    subGrp.append(\"text\").attr(\"class\", \"line-label line-label--small\").attr(\"x\", self.timeline.label_position_x + 10).attr(\"y\", 15).text(function (d) {\n\t      return d.name;\n\t    });\n\t\n\t    subGrp.append(\"line\").attr(\"class\", \"line-separator--secondary\").attr(\"x1\", -self.timeline.margin.left).attr(\"x2\", self.timeline.x(self.timeline.timer.totalDuration + 100)).attr(\"y1\", self.timeline.lineHeight).attr(\"y2\", self.timeline.lineHeight);\n\t\n\t    bar.selectAll(\".line-item\").attr(\"display\", function () {\n\t      var lineObject = this.parentNode;\n\t      var lineValue = d3.select(lineObject).datum();\n\t      if (!lineValue.collapsed) {\n\t        return \"block\";\n\t      } else {\n\t        return \"none\";\n\t      }\n\t    });\n\t\n\t    return properties;\n\t  };\n\t\n\t  return Properties;\n\t})();\n\t\n\texports[\"default\"] = Properties;\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar d3 = __webpack_require__(12);\n\tvar Signals = __webpack_require__(14);\n\tvar Utils = __webpack_require__(9)[\"default\"];\n\tvar _ = __webpack_require__(1);\n\t\n\tvar Keys = (function () {\n\t  var Keys = function Keys(timeline) {\n\t    this.timeline = timeline;\n\t    this.onKeyUpdated = new Signals.Signal();\n\t  };\n\t\n\t  Keys.prototype.selectNewKey = function (data, container) {\n\t    var self = this;\n\t    var key = d3.select(container).selectAll(\".key\").filter(function (item) {\n\t      return item.time === data.time;\n\t    });\n\t    if (key.length) {\n\t      d3.selectAll(\".key--selected\").classed(\"key--selected\", false);\n\t      key.classed(\"key--selected\", true);\n\t      key = key[0][0];\n\t      self.timeline.selectionManager.select(key);\n\t    }\n\t  };\n\t\n\t  Keys.prototype.render = function (properties) {\n\t    var self = this;\n\t    var tweenTime = self.timeline.tweenTime;\n\t\n\t    var dragmove = function (d) {\n\t      var _this = this;\n\t      var sourceEvent = d3.event.sourceEvent;\n\t      var propertyObject = this.parentNode;\n\t      var lineObject = propertyObject.parentNode.parentNode;\n\t      var propertyData = d3.select(propertyObject).datum();\n\t      var lineData = d3.select(lineObject).datum();\n\t\n\t      var currentDomainStart = self.timeline.x.domain()[0];\n\t      var mouse = d3.mouse(this);\n\t      var old_time = d.time;\n\t      var dx = self.timeline.x.invert(mouse[0]);\n\t      dx = dx.getTime();\n\t      dx = dx / 1000 - currentDomainStart / 1000;\n\t      dx = d.time + dx;\n\t\n\t      var selection = self.timeline.selectionManager.getSelection();\n\t      var selection_first_time = false;\n\t      var selection_last_time = false;\n\t      if (selection.length) {\n\t        selection_first_time = d3.select(selection[0]).datum().time;\n\t        selection_last_time = d3.select(selection[selection.length - 1]).datum().time;\n\t      }\n\t      selection = _.filter(selection, function (item) {\n\t        return item.isEqualNode(_this) === false;\n\t      });\n\t\n\t      var timeMatch = false;\n\t      if (sourceEvent.shiftKey) {\n\t        timeMatch = Utils.getClosestTime(tweenTime.data, dx, lineData.id, propertyData.name, tweenTime.timer);\n\t      }\n\t      if (timeMatch === false) {\n\t        timeMatch = dx;\n\t      }\n\t\n\t      d.time = timeMatch;\n\t      // Sort the keys of the current selected item.\n\t      propertyData.keys = Utils.sortKeys(propertyData.keys);\n\t      var time_offset = d.time - old_time;\n\t\n\t      var updateKeyItem = function (item) {\n\t        var itemPropertyObject = item.parentNode;\n\t        var itemPropertyData = d3.select(itemPropertyObject).datum();\n\t        var itemLineObject = itemPropertyObject.parentNode.parentNode;\n\t        var itemLineData = d3.select(itemLineObject).datum();\n\t        itemLineData._isDirty = true;\n\t        itemPropertyData.keys = Utils.sortKeys(itemPropertyData.keys);\n\t      };\n\t\n\t      var key_scale = false;\n\t      var is_first = false;\n\t      if (selection.length) {\n\t        if (sourceEvent.altKey && (selection_first_time != null) && (selection_last_time != null)) {\n\t          is_first = selection_first_time === old_time;\n\t          if (is_first) {\n\t            key_scale = (selection_last_time - d.time) / (selection_last_time - old_time);\n\t          } else {\n\t            key_scale = (d.time - selection_first_time) / (old_time - selection_first_time);\n\t          }\n\t        }\n\t\n\t        for (var i = 0; i < selection.length; i++) {\n\t          var item = selection[i];\n\t          data = d3.select(item).datum();\n\t          if (key_scale === false) {\n\t            data.time += time_offset;\n\t          } else {\n\t            if (is_first) {\n\t              data.time = selection_last_time - (selection_last_time - data.time) * key_scale;\n\t            } else {\n\t              data.time = selection_first_time + (data.time - selection_first_time) * key_scale;\n\t            }\n\t          }\n\t          updateKeyItem(item);\n\t        }\n\t      }\n\t\n\t      lineData._isDirty = true;\n\t      self.onKeyUpdated.dispatch();\n\t    };\n\t\n\t    var propValue = function (d) {\n\t      return d.keys;\n\t    };\n\t    var propKey = function (d) {\n\t      if (!d._id) {\n\t        d._id = Utils.guid();\n\t      }\n\t      return d._id;\n\t    };\n\t    var keys = properties.select(\".line-item__keys\").selectAll(\".key\").data(propValue, propKey);\n\t\n\t    // selectKey is triggered by dragstart event\n\t    var selectKey = function () {\n\t      var event = d3.event;\n\t      // with dragstart event the mousevent is is inside the event.sourcEvent\n\t      if (event.sourceEvent) {\n\t        event = event.sourceEvent;\n\t      }\n\t\n\t      var addToSelection = event.shiftKey;\n\t      // if element is already selectionned and we are on\n\t      // the dragstart event, we stop there since it is already selected.\n\t      if (d3.event.type && d3.event.type === \"dragstart\") {\n\t        if (d3.select(this).classed(\"key--selected\")) {\n\t          return;\n\t        }\n\t      }\n\t      self.timeline.selectionManager.select(this, addToSelection);\n\t    };\n\t\n\t    var dragend = function () {\n\t      self.timeline.editor.undoManager.addState();\n\t    };\n\t\n\t    var drag = d3.behavior.drag().origin(function (d) {\n\t      return d;\n\t    }).on(\"drag\", dragmove).on(\"dragstart\", selectKey).on(\"dragend\", dragend);\n\t\n\t    var key_grp = keys.enter().append(\"g\").attr(\"class\", \"key\")\n\t    // Use the unique id added in propKey above for the dom element id.\n\t    .attr(\"id\", function (d) {\n\t      return d._id;\n\t    }).on(\"mousedown\", function () {\n\t      // Don't trigger mousedown on linescontainer else\n\t      // it create the selection rectangle\n\t      d3.event.stopPropagation();\n\t    }).call(drag);\n\t\n\t    properties.selectAll(\".key\").attr(\"class\", function (d) {\n\t      var cls = \"key\";\n\t      // keep selected class\n\t      if (d3.select(this).classed(\"key--selected\")) {\n\t        cls += \" key--selected\";\n\t      }\n\t      if (d.ease) {\n\t        var ease = d.ease.split(\".\");\n\t        if (ease.length === 2) {\n\t          cls += \" \" + ease[1];\n\t        }\n\t      } else {\n\t        // If no easing specified, the it's the default Quad.easeOut\n\t        cls += \" easeOut\";\n\t      }\n\t      return cls;\n\t    });\n\t\n\t    var grp_linear = key_grp.append(\"g\").attr(\"class\", \"ease-linear\");\n\t    grp_linear.append(\"path\").attr(\"class\", \"key__shape-arrow\").attr(\"d\", \"M 0 -6 L 6 0 L 0 6\");\n\t    grp_linear.append(\"path\").attr(\"class\", \"key__shape-arrow\").attr(\"d\", \"M 0 -6 L -6 0 L 0 6\");\n\t\n\t    var grp_in = key_grp.append(\"g\").attr(\"class\", \"ease-in\");\n\t    grp_in.append(\"path\").attr(\"class\", \"key__shape-rect\").attr(\"d\", \"M 0 -6 L 0 6 L 4 5 L 1 0 L 4 -5\");\n\t    grp_in.append(\"path\").attr(\"class\", \"key__shape-arrow\").attr(\"d\", \"M 0 -6 L -6 0 L 0 6\");\n\t\n\t    var grp_out = key_grp.append(\"g\").attr(\"class\", \"ease-out\");\n\t    grp_out.append(\"path\").attr(\"class\", \"key__shape-rect\").attr(\"d\", \"M 0 -6 L 0 6 L -4 5 L -1 0 L -4 -5\");\n\t    grp_out.append(\"path\").attr(\"class\", \"key__shape-arrow\").attr(\"d\", \"M 0 -6 L 6 0 L 0 6\");\n\t\n\t    var grp_inout = key_grp.append(\"g\").attr(\"class\", \"ease-inout\");\n\t    grp_inout.append(\"circle\").attr(\"cx\", 0).attr(\"cy\", 0).attr(\"r\", 5);\n\t\n\t    keys.attr(\"transform\", function (d) {\n\t      var dx = self.timeline.x(d.time * 1000);\n\t      dx = parseInt(dx, 10);\n\t      var dy = 10;\n\t      return \"translate(\" + dx + \",\" + dy + \")\";\n\t    });\n\t\n\t    keys.exit().remove();\n\t  };\n\t\n\t  return Keys;\n\t})();\n\t\n\texports[\"default\"] = Keys;\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar Errors = (function () {\n\t  var Errors = function Errors(timeline) {\n\t    this.timeline = timeline;\n\t  };\n\t\n\t  Errors.prototype.render = function (properties) {\n\t    var self = this;\n\t    var subGrp = self.timeline.properties.subGrp;\n\t    var propertiesWithError = function (d) {\n\t      return d.errors != null;\n\t    };\n\t    // use insert with :first-child to prepend.\n\t    subGrp.insert(\"svg\", \":first-child\").attr(\"class\", \"line-item__errors\").attr(\"width\", window.innerWidth - self.timeline.label_position_x).attr(\"height\", self.timeline.lineHeight);\n\t\n\t    var errorsValue = function (d) {\n\t      return d.errors;\n\t    };\n\t    var errorTime = function (d) {\n\t      return d.time;\n\t    };\n\t\n\t    var errors = properties.filter(propertiesWithError).select(\".line-item__errors\").selectAll(\".error\").data(errorsValue, errorTime);\n\t\n\t    errors.enter().append(\"rect\").attr(\"class\", \"error\").attr(\"width\", 4).attr(\"height\", self.timeline.lineHeight - 1).attr(\"y\", \"1\");\n\t\n\t    properties.selectAll(\".error\").attr(\"x\", function (d) {\n\t      var dx;\n\t      dx = self.timeline.x(d.time * 1000);\n\t      return dx;\n\t    });\n\t\n\t    errors.exit().remove();\n\t  };\n\t\n\t  return Errors;\n\t})();\n\t\n\texports[\"default\"] = Errors;\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar Selection = (function () {\n\t  var Selection = function Selection(timeline, svg, margin) {\n\t    this.timeline = timeline;\n\t    this.svg = svg;\n\t    this.margin = margin;\n\t\n\t    this.onMouseUp = this.onMouseUp.bind(this);\n\t    this.init();\n\t  };\n\t\n\t  Selection.prototype.onMouseUp = function () {\n\t    this.svg.selectAll(\".selection\").remove();\n\t    // Enable again the default browser text selection.\n\t    $(\"body\").css({\n\t      \"user-select\": \"all\"\n\t    });\n\t  };\n\t\n\t  Selection.prototype.init = function () {\n\t    var self = this;\n\t    this.svg.on(\"mousedown\", function () {\n\t      var p = d3.mouse(this);\n\t      self.svg.append(\"rect\").attr({\n\t        \"class\": \"selection\",\n\t        x: p[0],\n\t        y: p[1],\n\t        width: 0,\n\t        height: 0\n\t      });\n\t      // Unselect items.\n\t      self.timeline.selectionManager.reset();\n\t      // Prevent default browser text selection.\n\t      $(\"body\").css({\n\t        \"user-select\": \"none\"\n\t      });\n\t    }).on(\"mousemove\", function () {\n\t      var s = self.svg.select(\".selection\");\n\t      if (s.empty()) {\n\t        return;\n\t      }\n\t      var p = d3.mouse(this);\n\t      var d = {\n\t        x: parseInt(s.attr(\"x\"), 10),\n\t        y: parseInt(s.attr(\"y\"), 10),\n\t        width: parseInt(s.attr(\"width\"), 10),\n\t        height: parseInt(s.attr(\"height\"), 10)\n\t      };\n\t      // Apply margin to mouse selection.\n\t      p[0] = Math.max(self.margin.left, p[0]);\n\t\n\t      var move = {\n\t        x: p[0] - d.x,\n\t        y: p[1] - d.y\n\t      };\n\t      if (move.x < 1 || move.x * 2 < d.width) {\n\t        d.x = p[0];\n\t        d.width -= move.x;\n\t      } else {\n\t        d.width = move.x;\n\t      }\n\t\n\t      if (move.y < 1 || move.y * 2 < d.height) {\n\t        d.y = p[1];\n\t        d.height -= move.y;\n\t      } else {\n\t        d.height = move.y;\n\t      }\n\t\n\t      s.attr(d);\n\t\n\t      // remove margins from selection\n\t      d.x -= self.margin.left;\n\t      var key_width = 6;\n\t\n\t      d.timeStart = self.timeline.x.invert(d.x - key_width).getTime() / 1000;\n\t      d.timeEnd = self.timeline.x.invert(d.x + d.width + key_width).getTime() / 1000;\n\t      var containerBounding = self.svg[0][0].getBoundingClientRect();\n\t\n\t      // deselect all previously selected items\n\t      d3.selectAll(\".key--selected\").classed(\"key--selected\", false);\n\t      self.timeline.selectionManager.reset();\n\t      var selection = [];\n\t      d3.selectAll(\".key\").each(function (state_data) {\n\t        var item_data = d3.select(this.parentNode.parentNode.parentNode).datum();\n\t        if (item_data.collapsed !== true) {\n\t          var itemBounding = d3.select(this)[0][0].getBoundingClientRect();\n\t          var y = itemBounding.top - containerBounding.top;\n\t          if (state_data.time >= d.timeStart && state_data.time <= d.timeEnd) {\n\t            // use or condition for top and bottom\n\t            if ((y >= d.y && y <= d.y + d.height) || (y + 10 >= d.y && y + 10 <= d.y + d.height)) {\n\t              d3.select(this).classed(\"key--selected\", true);\n\t              selection.push(this);\n\t            }\n\t          }\n\t        }\n\t      });\n\t      self.timeline.selectionManager.select(selection);\n\t    });\n\t    // Attach the mouseup event to window so that it catch it event if\n\t    // mouseup happen outside of the browser window.\n\t    $(window).on(\"mouseup\", this.onMouseUp);\n\t  };\n\t\n\t  return Selection;\n\t})();\n\t\n\texports[\"default\"] = Selection;\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar Signals = __webpack_require__(14);\n\tvar PropertyNumber = __webpack_require__(28)[\"default\"];\n\tvar PropertyColor = __webpack_require__(29)[\"default\"];\n\tvar PropertyTween = __webpack_require__(30)[\"default\"];\n\tvar Property = (function () {\n\t  var Property = function Property(editor, $el, domElement) {\n\t    this.editor = editor;\n\t    this.$el = $el;\n\t\n\t    this.timeline = editor.timeline;\n\t    this.timer = editor.timer;\n\t    this.selectionManager = editor.selectionManager;\n\t    this.keyAdded = new Signals.Signal();\n\t    this.items = [];\n\t    this.numberProp = false;\n\t    this.tweenProp = false;\n\t\n\t    var d3Object = d3.select(domElement);\n\t\n\t    var key_val = false;\n\t    var propertyObject = false;\n\t    var propertyData = false;\n\t    var lineObject = false;\n\t    var lineData = false;\n\t\n\t    if (d3Object.classed(\"key\")) {\n\t      propertyObject = domElement.parentNode;\n\t      lineObject = propertyObject.parentNode.parentNode;\n\t      lineData = d3.select(lineObject).datum();\n\t      propertyData = d3.select(propertyObject).datum();\n\t      key_val = d3Object.datum();\n\t    }\n\t\n\t    // click on bar\n\t    if (d3Object.classed(\"bar\")) {\n\t      lineData = d3Object.datum();\n\t    }\n\t\n\t    // click on bar label\n\t    if (d3Object.classed(\"line-label\")) {\n\t      domElement = domElement.parentNode;\n\t      d3Object = d3.select(domElement);\n\t      lineData = d3Object.datum();\n\t    }\n\t\n\t    // data and propertyData are defined on key select.\n\t    var property_name = false;\n\t    if (propertyData) {\n\t      property_name = propertyData.name;\n\t    }\n\t\n\t    // Get the property container.\n\t    var $container = this.getContainer(lineData);\n\t\n\t    var $tween_container = $container;\n\t\n\t    // Basic data, loop through properties.\n\t    for (var key in lineData.properties) {\n\t      var instance_prop = lineData.properties[key];\n\t      // show all properties or only 1 if we selected a key.\n\t      if (!property_name || instance_prop.name === property_name) {\n\t        var $grp_container = this.getGroupContainer(instance_prop, $container);\n\t        var numberProp = this.addNumberProperty(instance_prop, lineData, key_val, $grp_container);\n\t        this.items.push(numberProp);\n\t        if (instance_prop.name === property_name) {\n\t          $tween_container = $grp_container;\n\t        }\n\t      }\n\t    }\n\t\n\t    if (property_name) {\n\t      // Add tween select if we are editing a key.\n\t      var tweenProp = this.addTweenProperty(instance_prop, lineData, key_val, $tween_container, propertyData, domElement);\n\t      this.items.push(tweenProp);\n\t    }\n\t  };\n\t\n\t  Property.prototype.onKeyAdded = function () {\n\t    // propagate the event.\n\t    this.keyAdded.dispatch();\n\t  };\n\t\n\t  Property.prototype.getGroupContainer = function (instance_prop, $container) {\n\t    var $existing, $grp, grp_class;\n\t    if (!instance_prop.group) {\n\t      grp_class = \"property-grp--general\";\n\t      $existing = $container.find(\".\" + grp_class);\n\t      if ($existing.length) {\n\t        return $existing;\n\t      } else {\n\t        $grp = this.createGroupContainer(grp_class);\n\t        $container.append($grp);\n\t        return $grp;\n\t      }\n\t    } else {\n\t      // Replace all spaces to dash and make class lowercase\n\t      var group_name = instance_prop.group.replace(/\\s+/g, \"-\").toLowerCase();\n\t      grp_class = \"property-grp--\" + group_name;\n\t      $existing = $container.find(\".\" + grp_class);\n\t      if ($existing.length) {\n\t        return $existing;\n\t      } else {\n\t        $grp = this.createGroupContainer(grp_class, instance_prop.group);\n\t        $container.append($grp);\n\t        return $grp;\n\t      }\n\t    }\n\t  };\n\t\n\t  Property.prototype.createGroupContainer = function (grp_class, label) {\n\t    if (label === undefined) label = false;\n\t    var $grp = $(\"<div class=\\\"property-grp \" + grp_class + \"\\\"></div>\");\n\t    if (label) {\n\t      $grp.append(\"<h3 class=\\\"property-grp__title\\\">\" + label + \"</h3>\");\n\t    }\n\t    return $grp;\n\t  };\n\t\n\t  Property.prototype.getContainer = function (lineData) {\n\t    var $container = false;\n\t    if (lineData.id) {\n\t      $container = $(\"#property--\" + lineData.id);\n\t      if (!$container.length) {\n\t        $container = $container = $(\"<div class=\\\"properties__wrapper\\\" id=\\\"property--\" + lineData.id + \"\\\"></div>\");\n\t        this.$el.append($container);\n\t        if (lineData.label) {\n\t          $container.append(\"<h2 class=\\\"properties-editor__title\\\">\" + lineData.label + \"</h2>\");\n\t        }\n\t      }\n\t    }\n\t    if ($container === false) {\n\t      $container = $(\"<div class=\\\"properties__wrapper\\\" id=\\\"no-item\\\"></div>\");\n\t      this.$el.append($container);\n\t    }\n\t    return $container;\n\t  };\n\t\n\t  Property.prototype.addNumberProperty = function (instance_prop, lineData, key_val, $container) {\n\t    var propClass = PropertyNumber;\n\t    if (instance_prop.type && instance_prop.type === \"color\") {\n\t      propClass = PropertyColor;\n\t    }\n\t    var prop = new propClass(instance_prop, lineData, this.editor, key_val);\n\t    prop.keyAdded.add(this.onKeyAdded);\n\t    $container.append(prop.$el);\n\t    return prop;\n\t  };\n\t\n\t  Property.prototype.addTweenProperty = function (instance_prop, lineData, key_val, $container, propertyData, domElement) {\n\t    var _this = this;\n\t    var tween = new PropertyTween(instance_prop, lineData, this.editor, key_val, this.timeline);\n\t    $container.append(tween.$el);\n\t\n\t    // Add a remove key button\n\t    tween.$el.find(\"[data-action-remove]\").click(function (e) {\n\t      e.preventDefault();\n\t      var index = propertyData.keys.indexOf(key_val);\n\t      if (index > -1) {\n\t        propertyData.keys.splice(index, 1);\n\t        _this.editor.propertiesEditor.keyRemoved.dispatch(domElement);\n\t        return lineData._isDirty = true;\n\t      }\n\t    });\n\t    return tween;\n\t  };\n\t\n\t  Property.prototype.update = function () {\n\t    for (var i = 0; i < this.items.length; i++) {\n\t      var item = this.items[i];\n\t      item.update();\n\t    }\n\t  };\n\t\n\t  return Property;\n\t})();\n\t\n\texports[\"default\"] = Property;\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar H = __webpack_require__(37);\n\tmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"properties-editor\\\">\");t.b(\"\\n\" + i);t.b(\"  <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle-side\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"properties-editor__main\\\"></div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"properties-editor\\\">\\n  <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle-side\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\\n  <div class=\\\"properties-editor__main\\\"></div>\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {\"use strict\";\n\t\n\t/* FileSaver.js\n\t * A saveAs() FileSaver implementation.\n\t * 2014-08-29\n\t *\n\t * By Eli Grey, http://eligrey.com\n\t * License: X11/MIT\n\t *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n\t */\n\t\n\t/*global self */\n\t/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\n\t\n\t/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\n\t\n\tvar saveAs = saveAs\n\t// IE 10+ (native saveAs)\n\t || (typeof navigator !== \"undefined\" && navigator.msSaveOrOpenBlob && navigator.msSaveOrOpenBlob.bind(navigator))\n\t// Everyone else\n\t || (function (view) {\n\t  \"use strict\";\n\t  // IE <10 is explicitly unsupported\n\t  if (typeof navigator !== \"undefined\" && /MSIE [1-9]\\./.test(navigator.userAgent)) {\n\t    return;\n\t  }\n\t  var doc = view.document\n\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\n\t  , get_URL = function () {\n\t    return view.URL || view.webkitURL || view;\n\t  }, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\"), can_use_save_link = \"download\" in save_link, click = function (node) {\n\t    var event = doc.createEvent(\"MouseEvents\");\n\t    event.initMouseEvent(\"click\", true, false, view, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n\t    node.dispatchEvent(event);\n\t  }, webkit_req_fs = view.webkitRequestFileSystem, req_fs = view.requestFileSystem || webkit_req_fs || view.mozRequestFileSystem, throw_outside = function (ex) {\n\t    (view.setImmediate || view.setTimeout)(function () {\n\t      throw ex;\n\t    }, 0);\n\t  }, force_saveable_type = \"application/octet-stream\", fs_min_size = 0\n\t  // See https://code.google.com/p/chromium/issues/detail?id=375297#c7 for\n\t  // the reasoning behind the timeout and revocation flow\n\t  , arbitrary_revoke_timeout = 10, revoke = function (file) {\n\t    var revoker = function () {\n\t      if (typeof file === \"string\") {\n\t        // file is an object URL\n\t        get_URL().revokeObjectURL(file);\n\t      } else {\n\t        // file is a File\n\t        file.remove();\n\t      }\n\t    };\n\t    if (view.chrome) {\n\t      revoker();\n\t    } else {\n\t      setTimeout(revoker, arbitrary_revoke_timeout);\n\t    }\n\t  }, dispatch = function (filesaver, event_types, event) {\n\t    event_types = [].concat(event_types);\n\t    var i = event_types.length;\n\t    while (i--) {\n\t      var listener = filesaver[\"on\" + event_types[i]];\n\t      if (typeof listener === \"function\") {\n\t        try {\n\t          listener.call(filesaver, event || filesaver);\n\t        } catch (ex) {\n\t          throw_outside(ex);\n\t        }\n\t      }\n\t    }\n\t  }, FileSaver = function (blob, name) {\n\t    // First try a.download, then web filesystem, then object URLs\n\t    var filesaver = this, type = blob.type, blob_changed = false, object_url, target_view, dispatch_all = function () {\n\t      dispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n\t    }\n\t    // on any filesys errors revert to saving with object URLs\n\t    , fs_error = function () {\n\t      // don't create more object URLs than needed\n\t      if (blob_changed || !object_url) {\n\t        object_url = get_URL().createObjectURL(blob);\n\t      }\n\t      if (target_view) {\n\t        target_view.location.href = object_url;\n\t      } else {\n\t        var new_tab = view.open(object_url, \"_blank\");\n\t        if (new_tab == undefined && typeof safari !== \"undefined\") {\n\t          //Apple do not allow window.open, see http://bit.ly/1kZffRI\n\t          view.location.href = object_url;\n\t        }\n\t      }\n\t      filesaver.readyState = filesaver.DONE;\n\t      dispatch_all();\n\t      revoke(object_url);\n\t    }, abortable = function (func) {\n\t      return function () {\n\t        if (filesaver.readyState !== filesaver.DONE) {\n\t          return func.apply(this, arguments);\n\t        }\n\t      };\n\t    }, create_if_not_found = { create: true, exclusive: false }, slice;\n\t    filesaver.readyState = filesaver.INIT;\n\t    if (!name) {\n\t      name = \"download\";\n\t    }\n\t    if (can_use_save_link) {\n\t      object_url = get_URL().createObjectURL(blob);\n\t      save_link.href = object_url;\n\t      save_link.download = name;\n\t      click(save_link);\n\t      filesaver.readyState = filesaver.DONE;\n\t      dispatch_all();\n\t      revoke(object_url);\n\t      return;\n\t    }\n\t    // Object and web filesystem URLs have a problem saving in Google Chrome when\n\t    // viewed in a tab, so I force save with application/octet-stream\n\t    // http://code.google.com/p/chromium/issues/detail?id=91158\n\t    // Update: Google errantly closed 91158, I submitted it again:\n\t    // https://code.google.com/p/chromium/issues/detail?id=389642\n\t    if (view.chrome && type && type !== force_saveable_type) {\n\t      slice = blob.slice || blob.webkitSlice;\n\t      blob = slice.call(blob, 0, blob.size, force_saveable_type);\n\t      blob_changed = true;\n\t    }\n\t    // Since I can't be sure that the guessed media type will trigger a download\n\t    // in WebKit, I append .download to the filename.\n\t    // https://bugs.webkit.org/show_bug.cgi?id=65440\n\t    if (webkit_req_fs && name !== \"download\") {\n\t      name += \".download\";\n\t    }\n\t    if (type === force_saveable_type || webkit_req_fs) {\n\t      target_view = view;\n\t    }\n\t    if (!req_fs) {\n\t      fs_error();\n\t      return;\n\t    }\n\t    fs_min_size += blob.size;\n\t    req_fs(view.TEMPORARY, fs_min_size, abortable(function (fs) {\n\t      fs.root.getDirectory(\"saved\", create_if_not_found, abortable(function (dir) {\n\t        var save = function () {\n\t          dir.getFile(name, create_if_not_found, abortable(function (file) {\n\t            file.createWriter(abortable(function (writer) {\n\t              writer.onwriteend = function (event) {\n\t                target_view.location.href = file.toURL();\n\t                filesaver.readyState = filesaver.DONE;\n\t                dispatch(filesaver, \"writeend\", event);\n\t                revoke(file);\n\t              };\n\t              writer.onerror = function () {\n\t                var error = writer.error;\n\t                if (error.code !== error.ABORT_ERR) {\n\t                  fs_error();\n\t                }\n\t              };\n\t              \"writestart progress write abort\".split(\" \").forEach(function (event) {\n\t                writer[\"on\" + event] = filesaver[\"on\" + event];\n\t              });\n\t              writer.write(blob);\n\t              filesaver.abort = function () {\n\t                writer.abort();\n\t                filesaver.readyState = filesaver.DONE;\n\t              };\n\t              filesaver.readyState = filesaver.WRITING;\n\t            }), fs_error);\n\t          }), fs_error);\n\t        };\n\t        dir.getFile(name, { create: false }, abortable(function (file) {\n\t          // delete file if it already exists\n\t          file.remove();\n\t          save();\n\t        }), abortable(function (ex) {\n\t          if (ex.code === ex.NOT_FOUND_ERR) {\n\t            save();\n\t          } else {\n\t            fs_error();\n\t          }\n\t        }));\n\t      }), fs_error);\n\t    }), fs_error);\n\t  }, FS_proto = FileSaver.prototype, saveAs = function (blob, name) {\n\t    return new FileSaver(blob, name);\n\t  };\n\t  FS_proto.abort = function () {\n\t    var filesaver = this;\n\t    filesaver.readyState = filesaver.DONE;\n\t    dispatch(filesaver, \"abort\");\n\t  };\n\t  FS_proto.readyState = FS_proto.INIT = 0;\n\t  FS_proto.WRITING = 1;\n\t  FS_proto.DONE = 2;\n\t\n\t  FS_proto.error = FS_proto.onwritestart = FS_proto.onprogress = FS_proto.onwrite = FS_proto.onabort = FS_proto.onerror = FS_proto.onwriteend = null;\n\t\n\t  return saveAs;\n\t}(typeof self !== \"undefined\" && self || typeof window !== \"undefined\" && window || this.content));\n\t// `self` is undefined in Firefox for Android content script context\n\t// while `this` is nsIContentFrameMessageManager\n\t// with an attribute `content` that corresponds to the window\n\t\n\tif (typeof module !== \"undefined\" && module !== null) {\n\t  module.exports = saveAs;\n\t} else if ((\"function\" !== \"undefined\" && __webpack_require__(38) !== null) && (__webpack_require__(39) != null)) {\n\t  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t    return saveAs;\n\t  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t}\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(40)(module)))\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _extends = function (child, parent) {\n\t  child.prototype = Object.create(parent.prototype, {\n\t    constructor: {\n\t      value: child,\n\t      enumerable: false,\n\t      writable: true,\n\t      configurable: true\n\t    }\n\t  });\n\t  child.__proto__ = parent;\n\t};\n\t\n\tvar $ = __webpack_require__(13);\n\tvar PropertyBase = __webpack_require__(33)[\"default\"];\n\tvar DraggableNumber = __webpack_require__(31);\n\t\n\tvar tpl_property = __webpack_require__(34);\n\t\n\tvar PropertyNumber = (function (PropertyBase) {\n\t  var PropertyNumber =\n\t  // instance_property: The current property on the data object.\n\t  // lineData: The line data object.\n\t  function PropertyNumber(instance_property, lineData, editor, key_val) {\n\t    if (key_val === undefined) key_val = false;\n\t    PropertyBase.call(this, instance_property, lineData, editor, key_val);\n\t    this.onInputChange = this.onInputChange.bind(this);\n\t    this.$input = this.$el.find(\"input\");\n\t  };\n\t\n\t  _extends(PropertyNumber, PropertyBase);\n\t\n\t  PropertyNumber.prototype.getInputVal = function () {\n\t    return parseFloat(this.$el.find(\"input\").val());\n\t  };\n\t\n\t  PropertyNumber.prototype.render = function () {\n\t    var _this = this;\n\t    PropertyBase.prototype.render.call(this);\n\t    // By default assign the property default value\n\t    var val = this.getCurrentVal();\n\t\n\t    data = {\n\t      id: this.instance_property.name, // \"circleRadius\" instead of \"circle radius\"\n\t      label: this.instance_property.label || this.instance_property.name,\n\t      val: val\n\t    };\n\t\n\t    var view = tpl_property(data);\n\t    this.$el = $(view);\n\t    this.$el.find(\".property__key\").click(this.onKeyClick);\n\t\n\t    var $input = this.$el.find(\"input\");\n\t\n\t    var onChangeEnd = function () {\n\t      _this.editor.undoManager.addState();\n\t    };\n\t\n\t    var draggableOptions = {\n\t      changeCallback: function () {\n\t        return _this.onInputChange();\n\t      },\n\t      endCallback: function () {\n\t        return onChangeEnd();\n\t      }\n\t    };\n\t    // Set min & max if they are defined.\n\t    if (\"min\" in this.instance_property) {\n\t      draggableOptions.min = this.instance_property.min;\n\t    }\n\t    if (\"max\" in this.instance_property) {\n\t      draggableOptions.max = this.instance_property.max;\n\t    }\n\t\n\t    var draggable = new DraggableNumber($input.get(0), draggableOptions);\n\t    $input.data(\"draggable\", draggable);\n\t    $input.change(this.onInputChange);\n\t  };\n\t\n\t  PropertyNumber.prototype.update = function () {\n\t    PropertyBase.prototype.update.call(this);\n\t    var val = this.getCurrentVal();\n\t    var draggable = this.$input.data(\"draggable\");\n\t\n\t    if (draggable) {\n\t      draggable.set(val.toFixed(3));\n\t    } else {\n\t      this.$input.val(val.toFixed(3));\n\t    }\n\t  };\n\t\n\t  return PropertyNumber;\n\t})(PropertyBase);\n\t\n\texports[\"default\"] = PropertyNumber;\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _extends = function (child, parent) {\n\t  child.prototype = Object.create(parent.prototype, {\n\t    constructor: {\n\t      value: child,\n\t      enumerable: false,\n\t      writable: true,\n\t      configurable: true\n\t    }\n\t  });\n\t  child.__proto__ = parent;\n\t};\n\t\n\tvar $ = __webpack_require__(13);\n\t__webpack_require__(32);\n\tvar PropertyBase = __webpack_require__(33)[\"default\"];\n\t\n\t\n\tvar tpl_property = __webpack_require__(35);\n\t\n\tvar PropertyColor = (function (PropertyBase) {\n\t  var PropertyColor = function PropertyColor(instance_property, lineData, editor, key_val) {\n\t    if (key_val === undefined) key_val = false;\n\t    PropertyBase.call(this, instance_property, lineData, editor, key_val);\n\t    this.onInputChange = this.onInputChange.bind(this);\n\t    this.$input = this.$el.find(\"input\");\n\t  };\n\t\n\t  _extends(PropertyColor, PropertyBase);\n\t\n\t  PropertyColor.prototype.render = function () {\n\t    var _this = this;\n\t    PropertyBase.prototype.render.call(this);\n\t    // By default assign the property default value\n\t    var val = this.getCurrentVal();\n\t\n\t    data = {\n\t      id: this.instance_property.name, // \"circleRadius\" instead of \"circle radius\"\n\t      label: this.instance_property.label || this.instance_property.name,\n\t      val: val\n\t    };\n\t\n\t    var view = tpl_property(data);\n\t    this.$el = $(view);\n\t    this.$el.find(\".property__key\").click(this.onKeyClick);\n\t\n\t    var $input = this.$el.find(\"input\");\n\t\n\t    $input.spectrum({\n\t      allowEmpty: false,\n\t      showAlpha: true,\n\t      clickoutFiresChange: false,\n\t      preferredFormat: \"rgb\",\n\t      change: function () {\n\t        _this.editor.undoManager.addState();\n\t      },\n\t      move: function (color) {\n\t        if (color._a == 1) {\n\t          _this.$input.val(color.toHexString());\n\t        } else {\n\t          _this.$input.val(color.toRgbString());\n\t        }\n\t        _this.onInputChange();\n\t      }\n\t    });\n\t\n\t    $input.change(this.onInputChange);\n\t  };\n\t\n\t  PropertyColor.prototype.update = function () {\n\t    PropertyBase.prototype.update.call(this);\n\t    var val = this.getCurrentVal();\n\t    this.$input.val(val);\n\t    this.$input.spectrum(\"set\", val);\n\t  };\n\t\n\t  return PropertyColor;\n\t})(PropertyBase);\n\t\n\texports[\"default\"] = PropertyColor;\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar $ = __webpack_require__(13);\n\t\n\tvar tpl_property = __webpack_require__(36);\n\t\n\tvar PropertyTween = (function () {\n\t  var PropertyTween =\n\t  // instance_property: The current property on the data object.\n\t  // lineData: The line data object.\n\t  function PropertyTween(instance_property, lineData, editor, key_val, timeline) {\n\t    if (key_val === undefined) key_val = false;\n\t    this.instance_property = instance_property;\n\t    this.lineData = lineData;\n\t    this.editor = editor;\n\t    this.key_val = key_val;\n\t    this.timeline = timeline;\n\t\n\t    this.onChange = this.onChange.bind(this);\n\t\n\t    this.timer = this.editor.timer;\n\t    this.$time = false;\n\t    this.render();\n\t  };\n\t\n\t  PropertyTween.prototype.render = function () {\n\t    var _this = this;\n\t    var self = this;\n\t    if (!this.key_val.ease) {\n\t      this.key_val.ease = \"Quad.easeOut\";\n\t    }\n\t    var data = {\n\t      id: this.instance_property.name + \"_tween\",\n\t      val: this.key_val.ease,\n\t      time: this.key_val.time.toFixed(3),\n\t      options: [\"Linear.easeNone\"],\n\t      selected: function () {\n\t        if (this.toString() === self.key_val.ease) {\n\t          return \"selected\";\n\t        } else {\n\t          return \"\";\n\t        }\n\t      }\n\t    };\n\t\n\t    var tweens = [\"Quad\", \"Cubic\", \"Quart\", \"Quint\", \"Strong\"];\n\t    for (var i = 0; i < tweens.length; i++) {\n\t      var tween = tweens[i];\n\t      data.options.push(tween + \".easeOut\");\n\t      data.options.push(tween + \".easeIn\");\n\t      data.options.push(tween + \".easeInOut\");\n\t    }\n\t\n\t    this.$el = $(tpl_property(data));\n\t    this.$time = this.$el.find(\".property__key-time strong\");\n\t    this.$time.keypress(function (e) {\n\t      if (e.charCode == 13) {\n\t        // Enter\n\t        e.preventDefault();\n\t        _this.$time.blur();\n\t        _this.updateKeyTime(_this.$time.text());\n\t      }\n\t    });\n\t\n\t    this.$time.on(\"click\", function () {\n\t      return document.execCommand(\"selectAll\", false, null);\n\t    });\n\t    this.$el.find(\"select\").change(this.onChange);\n\t  };\n\t\n\t  PropertyTween.prototype.updateKeyTime = function (time) {\n\t    time = parseFloat(time);\n\t    if (isNaN(time)) {\n\t      time = this.key_val.time;\n\t    }\n\t    this.$time.text(time);\n\t    this.key_val.time = time;\n\t    this.onChange();\n\t  };\n\t\n\t  PropertyTween.prototype.onChange = function () {\n\t    var ease = this.$el.find(\"select\").val();\n\t    this.key_val.ease = ease;\n\t    this.editor.undoManager.addState();\n\t    this.lineData._isDirty = true;\n\t    this.timeline._isDirty = true;\n\t  };\n\t\n\t  PropertyTween.prototype.update = function () {\n\t    // todo: use mustache instead...\n\t    this.$time.html(this.key_val.time.toFixed(3));\n\t  };\n\t\n\t  return PropertyTween;\n\t})();\n\t\n\texports[\"default\"] = PropertyTween;\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_31__;\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_32__;\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar Signals = __webpack_require__(14);\n\tvar _ = __webpack_require__(1);\n\tvar Utils = __webpack_require__(9)[\"default\"];\n\tvar PropertyBase = (function () {\n\t  var PropertyBase =\n\t  // @instance_property: The current property on the data object.\n\t  // @lineData: The line data object.\n\t  function PropertyBase(instance_property, lineData, editor, key_val) {\n\t    if (key_val === undefined) key_val = false;\n\t    this.instance_property = instance_property;\n\t    this.lineData = lineData;\n\t    this.editor = editor;\n\t    this.key_val = key_val;\n\t\n\t    //this.update = this.update.bind(this);\n\t    this.onInputChange = this.onInputChange.bind(this);\n\t    this.onKeyClick = this.onKeyClick.bind(this);\n\t\n\t    this.timer = editor.timer;\n\t    this.keyAdded = new Signals.Signal();\n\t    this.render();\n\t\n\t    this.$key = this.$el.find(\".property__key\");\n\t  };\n\t\n\t  PropertyBase.prototype.onKeyClick = function (e) {\n\t    e.preventDefault();\n\t    var currentValue = this.getCurrentVal();\n\t    this.addKey(currentValue);\n\t  };\n\t\n\t  PropertyBase.prototype.getInputVal = function () {\n\t    return this.$el.find(\"input\").val();\n\t  };\n\t\n\t  PropertyBase.prototype.getCurrentVal = function () {\n\t    var val = this.instance_property.val;\n\t    var prop_name = this.instance_property.name;\n\t\n\t    // if we selected a key simply return it's value\n\t    if (this.key_val) {\n\t      return this.key_val.val;\n\t    }\n\t    if (this.lineData.values != null && this.lineData.values[prop_name]) {\n\t      return this.lineData.values[prop_name];\n\t    }\n\t    return val;\n\t  };\n\t\n\t  PropertyBase.prototype.onInputChange = function () {\n\t    var current_value = this.getInputVal();\n\t    var currentTime = this.timer.getCurrentTime() / 1000;\n\t    // if we selected a key simply get the time from it.\n\t    if (this.key_val) {\n\t      currentTime = this.key_val.time;\n\t    }\n\t\n\t    if (this.instance_property.keys && this.instance_property.keys.length) {\n\t      // Add a new key if there is no other key at same time\n\t      var current_key = _.find(this.instance_property.keys, function (key) {\n\t        return key.time == currentTime;\n\t      });\n\t\n\t      if (current_key) {\n\t        // if there is a key update it\n\t        current_key.val = current_value;\n\t      } else {\n\t        // add a new key\n\t        this.addKey(current_value);\n\t      }\n\t    } else {\n\t      // There is no keys, simply update the property value (for data saving)\n\t      this.instance_property.val = current_value;\n\t      // Also directly set the lineData value.\n\t      this.lineData.values[function (_val) {\n\t        return _val.instance_property.name();\n\t      }] = current_value;\n\t\n\t      // Simply update the custom object with new values.\n\t      if (this.lineData.object) {\n\t        currentTime = function (_val2) {\n\t          return _val2.timer.getCurrentTime();\n\t        } / 1000;\n\t        // Set the property on the instance object.\n\t        this.lineData.object.update(currentTime - this.lineData.start);\n\t      }\n\t    }\n\t\n\t    // Something changed, make the lineData dirty to rebuild things. d\n\t    return this.lineData._isDirty = true;\n\t  };\n\t\n\t  PropertyBase.prototype.getCurrentKey = function () {\n\t    var time = this.timer.getCurrentTime() / 1000;\n\t    if (!this.instance_property || !this.instance_property.keys) {\n\t      return false;\n\t    }\n\t    if (this.instance_property.keys.length === 0) {\n\t      return false;\n\t    }\n\t    for (var i = 0; i < this.instance_property.keys.length; i++) {\n\t      var key = this.instance_property.keys[i];\n\t      if (key.time === time) {\n\t        return key;\n\t      }\n\t    }\n\t    return false;\n\t  };\n\t\n\t  PropertyBase.prototype.addKey = function (val) {\n\t    var currentTime = this.timer.getCurrentTime() / 1000;\n\t    var key = {\n\t      time: currentTime,\n\t      val: val\n\t    };\n\t    this.instance_property.keys.push(key);\n\t    this.instance_property.keys = Utils.sortKeys(this.instance_property.keys);\n\t    this.lineData._isDirty = true;\n\t    this.keyAdded.dispatch();\n\t  };\n\t\n\t  PropertyBase.prototype.render = function () {\n\t    // current values are defined in @lineData.values\n\t    this.values = this.lineData.values != null ? this.lineData.values : {};\n\t  };\n\t\n\t  PropertyBase.prototype.update = function () {\n\t    var key = this.getCurrentKey();\n\t    this.$key.toggleClass(\"property__key--active\", key);\n\t  };\n\t\n\t  return PropertyBase;\n\t})();\n\t\n\texports[\"default\"] = PropertyBase;\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar H = __webpack_require__(37);\n\tmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--number\\\">\");t.b(\"\\n\" + i);t.b(\"  <button class=\\\"property__key\\\"></button>\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">\");t.b(t.v(t.f(\"label\",c,p,0)));t.b(\"</label>\");t.b(\"\\n\" + i);t.b(\"  <input type=\\\"number\\\" id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__input\\\" value=\\\"\");t.b(t.v(t.f(\"val\",c,p,0)));t.b(\"\\\" />\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--number\\\">\\n  <button class=\\\"property__key\\\"></button>\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">{{label}}</label>\\n  <input type=\\\"number\\\" id=\\\"{{id}}\\\" class=\\\"property__input\\\" value=\\\"{{val}}\\\" />\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar H = __webpack_require__(37);\n\tmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--number\\\">\");t.b(\"\\n\" + i);t.b(\"  <button class=\\\"property__key\\\"></button>\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">\");t.b(t.v(t.f(\"label\",c,p,0)));t.b(\"</label>\");t.b(\"\\n\" + i);t.b(\"  <input id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__input\\\" value=\\\"\");t.b(t.v(t.f(\"val\",c,p,0)));t.b(\"\\\" />\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--number\\\">\\n  <button class=\\\"property__key\\\"></button>\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">{{label}}</label>\\n  <input id=\\\"{{id}}\\\" class=\\\"property__input\\\" value=\\\"{{val}}\\\" />\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar H = __webpack_require__(37);\n\tmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--tween\\\">\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">easing</label>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"property__select\\\">\");t.b(\"\\n\" + i);t.b(\"    <div class=\\\"custom-select\\\">\");t.b(\"\\n\" + i);t.b(\"      <select id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\">\");t.b(\"\\n\" + i);if(t.s(t.f(\"options\",c,p,1),c,p,0,212,279,\"{{ }}\")){t.rs(c,p,function(c,p,t){t.b(\"        <option value=\\\"\");t.b(t.v(t.d(\".\",c,p,0)));t.b(\"\\\" \");t.b(t.v(t.f(\"selected\",c,p,0)));t.b(\">\");t.b(t.v(t.d(\".\",c,p,0)));t.b(\"</option>\");t.b(\"\\n\" + i);});c.pop();}t.b(\"      </select>\");t.b(\"\\n\" + i);t.b(\"    </div>\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\" + i);t.b(\"<div class=\\\"properties-editor__actions actions\\\">\");t.b(\"\\n\" + i);t.b(\"  <span class=\\\"property__key-time\\\">key at <strong class=\\\"property__key-input\\\" contenteditable=\\\"true\\\">\");t.b(t.v(t.f(\"time\",c,p,0)));t.b(\"</strong> seconds</span>\");t.b(\"\\n\" + i);t.b(\"  <a href=\\\"#\\\" class=\\\"actions__item\\\" data-action-remove>Remove key</a>\");t.b(\"\\n\" + i);t.b(\"</div>\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--tween\\\">\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">easing</label>\\n  <div class=\\\"property__select\\\">\\n    <div class=\\\"custom-select\\\">\\n      <select id=\\\"{{id}}\\\">\\n        {{#options}}\\n        <option value=\\\"{{.}}\\\" {{selected}}>{{.}}</option>\\n        {{/options}}\\n      </select>\\n    </div>\\n  </div>\\n</div>\\n<div class=\\\"properties-editor__actions actions\\\">\\n  <span class=\\\"property__key-time\\\">key at <strong class=\\\"property__key-input\\\" contenteditable=\\\"true\\\">{{time}}</strong> seconds</span>\\n  <a href=\\\"#\\\" class=\\\"actions__item\\\" data-action-remove>Remove key</a>\\n</div>\", H); return T.render.apply(T, arguments); };\n\n/***/ },\n/* 37 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\t/*\n\t *  Copyright 2011 Twitter, Inc.\n\t *  Licensed under the Apache License, Version 2.0 (the \"License\");\n\t *  you may not use this file except in compliance with the License.\n\t *  You may obtain a copy of the License at\n\t *\n\t *  http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t *  Unless required by applicable law or agreed to in writing, software\n\t *  distributed under the License is distributed on an \"AS IS\" BASIS,\n\t *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\t *  See the License for the specific language governing permissions and\n\t *  limitations under the License.\n\t */\n\t\n\t// This file is for use with Node.js. See dist/ for browser files.\n\t\n\tvar Hogan = __webpack_require__(41);\n\tHogan.Template = __webpack_require__(42).Template;\n\tHogan.template = Hogan.Template;\n\tmodule.exports = Hogan;\n\n/***/ },\n/* 38 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = function() { throw new Error(\"define cannot be used indirect\"); };\r\n\n\n/***/ },\n/* 39 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {module.exports = __webpack_amd_options__;\r\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, {}))\n\n/***/ },\n/* 40 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (module) {\n\t  if (!module.webpackPolyfill) {\n\t    module.deprecate = function () {};\n\t    module.paths = [];\n\t    // module.parent = undefined by default\n\t    module.children = [];\n\t    module.webpackPolyfill = 1;\n\t  }\n\t  return module;\n\t};\n\n/***/ },\n/* 41 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\t/*\n\t *  Copyright 2011 Twitter, Inc.\n\t *  Licensed under the Apache License, Version 2.0 (the \"License\");\n\t *  you may not use this file except in compliance with the License.\n\t *  You may obtain a copy of the License at\n\t *\n\t *  http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t *  Unless required by applicable law or agreed to in writing, software\n\t *  distributed under the License is distributed on an \"AS IS\" BASIS,\n\t *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\t *  See the License for the specific language governing permissions and\n\t *  limitations under the License.\n\t */\n\t\n\t(function (Hogan) {\n\t  // Setup regex  assignments\n\t  // remove whitespace according to Mustache spec\n\t  var rIsWhitespace = /\\S/, rQuot = /\\\"/g, rNewline = /\\n/g, rCr = /\\r/g, rSlash = /\\\\/g, rLineSep = /\\u2028/, rParagraphSep = /\\u2029/;\n\t\n\t  Hogan.tags = {\n\t    \"#\": 1, \"^\": 2, \"<\": 3, $: 4,\n\t    \"/\": 5, \"!\": 6, \">\": 7, \"=\": 8, _v: 9,\n\t    \"{\": 10, \"&\": 11, _t: 12\n\t  };\n\t\n\t  Hogan.scan = function scan(text, delimiters) {\n\t    var len = text.length, IN_TEXT = 0, IN_TAG_TYPE = 1, IN_TAG = 2, state = IN_TEXT, tagType = null, tag = null, buf = \"\", tokens = [], seenTag = false, i = 0, lineStart = 0, otag = \"{{\", ctag = \"}}\";\n\t\n\t    function addBuf() {\n\t      if (buf.length > 0) {\n\t        tokens.push({ tag: \"_t\", text: new String(buf) });\n\t        buf = \"\";\n\t      }\n\t    }\n\t\n\t    function lineIsWhitespace() {\n\t      var isAllWhitespace = true;\n\t      for (var j = lineStart; j < tokens.length; j++) {\n\t        isAllWhitespace = (Hogan.tags[tokens[j].tag] < Hogan.tags._v) || (tokens[j].tag == \"_t\" && tokens[j].text.match(rIsWhitespace) === null);\n\t        if (!isAllWhitespace) {\n\t          return false;\n\t        }\n\t      }\n\t\n\t      return isAllWhitespace;\n\t    }\n\t\n\t    function filterLine(haveSeenTag, noNewLine) {\n\t      addBuf();\n\t\n\t      if (haveSeenTag && lineIsWhitespace()) {\n\t        for (var j = lineStart, next; j < tokens.length; j++) {\n\t          if (tokens[j].text) {\n\t            if ((next = tokens[j + 1]) && next.tag == \">\") {\n\t              // set indent to token value\n\t              next.indent = tokens[j].text.toString();\n\t            }\n\t            tokens.splice(j, 1);\n\t          }\n\t        }\n\t      } else if (!noNewLine) {\n\t        tokens.push({ tag: \"\\n\" });\n\t      }\n\t\n\t      seenTag = false;\n\t      lineStart = tokens.length;\n\t    }\n\t\n\t    function changeDelimiters(text, index) {\n\t      var close = \"=\" + ctag, closeIndex = text.indexOf(close, index), delimiters = trim(text.substring(text.indexOf(\"=\", index) + 1, closeIndex)).split(\" \");\n\t\n\t      otag = delimiters[0];\n\t      ctag = delimiters[delimiters.length - 1];\n\t\n\t      return closeIndex + close.length - 1;\n\t    }\n\t\n\t    if (delimiters) {\n\t      delimiters = delimiters.split(\" \");\n\t      otag = delimiters[0];\n\t      ctag = delimiters[1];\n\t    }\n\t\n\t    for (i = 0; i < len; i++) {\n\t      if (state == IN_TEXT) {\n\t        if (tagChange(otag, text, i)) {\n\t          --i;\n\t          addBuf();\n\t          state = IN_TAG_TYPE;\n\t        } else {\n\t          if (text.charAt(i) == \"\\n\") {\n\t            filterLine(seenTag);\n\t          } else {\n\t            buf += text.charAt(i);\n\t          }\n\t        }\n\t      } else if (state == IN_TAG_TYPE) {\n\t        i += otag.length - 1;\n\t        tag = Hogan.tags[text.charAt(i + 1)];\n\t        tagType = tag ? text.charAt(i + 1) : \"_v\";\n\t        if (tagType == \"=\") {\n\t          i = changeDelimiters(text, i);\n\t          state = IN_TEXT;\n\t        } else {\n\t          if (tag) {\n\t            i++;\n\t          }\n\t          state = IN_TAG;\n\t        }\n\t        seenTag = i;\n\t      } else {\n\t        if (tagChange(ctag, text, i)) {\n\t          tokens.push({ tag: tagType, n: trim(buf), otag: otag, ctag: ctag,\n\t            i: (tagType == \"/\") ? seenTag - otag.length : i + ctag.length });\n\t          buf = \"\";\n\t          i += ctag.length - 1;\n\t          state = IN_TEXT;\n\t          if (tagType == \"{\") {\n\t            if (ctag == \"}}\") {\n\t              i++;\n\t            } else {\n\t              cleanTripleStache(tokens[tokens.length - 1]);\n\t            }\n\t          }\n\t        } else {\n\t          buf += text.charAt(i);\n\t        }\n\t      }\n\t    }\n\t\n\t    filterLine(seenTag, true);\n\t\n\t    return tokens;\n\t  };\n\t\n\t  function cleanTripleStache(token) {\n\t    if (token.n.substr(token.n.length - 1) === \"}\") {\n\t      token.n = token.n.substring(0, token.n.length - 1);\n\t    }\n\t  }\n\t\n\t  function trim(s) {\n\t    if (s.trim) {\n\t      return s.trim();\n\t    }\n\t\n\t    return s.replace(/^\\s*|\\s*$/g, \"\");\n\t  }\n\t\n\t  function tagChange(tag, text, index) {\n\t    if (text.charAt(index) != tag.charAt(0)) {\n\t      return false;\n\t    }\n\t\n\t    for (var i = 1, l = tag.length; i < l; i++) {\n\t      if (text.charAt(index + i) != tag.charAt(i)) {\n\t        return false;\n\t      }\n\t    }\n\t\n\t    return true;\n\t  }\n\t\n\t  // the tags allowed inside super templates\n\t  var allowedInSuper = { _t: true, \"\\n\": true, $: true, \"/\": true };\n\t\n\t  function buildTree(tokens, kind, stack, customTags) {\n\t    var instructions = [], opener = null, tail = null, token = null;\n\t\n\t    tail = stack[stack.length - 1];\n\t\n\t    while (tokens.length > 0) {\n\t      token = tokens.shift();\n\t\n\t      if (tail && tail.tag == \"<\" && !(token.tag in allowedInSuper)) {\n\t        throw new Error(\"Illegal content in < super tag.\");\n\t      }\n\t\n\t      if (Hogan.tags[token.tag] <= Hogan.tags.$ || isOpener(token, customTags)) {\n\t        stack.push(token);\n\t        token.nodes = buildTree(tokens, token.tag, stack, customTags);\n\t      } else if (token.tag == \"/\") {\n\t        if (stack.length === 0) {\n\t          throw new Error(\"Closing tag without opener: /\" + token.n);\n\t        }\n\t        opener = stack.pop();\n\t        if (token.n != opener.n && !isCloser(token.n, opener.n, customTags)) {\n\t          throw new Error(\"Nesting error: \" + opener.n + \" vs. \" + token.n);\n\t        }\n\t        opener.end = token.i;\n\t        return instructions;\n\t      } else if (token.tag == \"\\n\") {\n\t        token.last = (tokens.length == 0) || (tokens[0].tag == \"\\n\");\n\t      }\n\t\n\t      instructions.push(token);\n\t    }\n\t\n\t    if (stack.length > 0) {\n\t      throw new Error(\"missing closing tag: \" + stack.pop().n);\n\t    }\n\t\n\t    return instructions;\n\t  }\n\t\n\t  function isOpener(token, tags) {\n\t    for (var i = 0, l = tags.length; i < l; i++) {\n\t      if (tags[i].o == token.n) {\n\t        token.tag = \"#\";\n\t        return true;\n\t      }\n\t    }\n\t  }\n\t\n\t  function isCloser(close, open, tags) {\n\t    for (var i = 0, l = tags.length; i < l; i++) {\n\t      if (tags[i].c == close && tags[i].o == open) {\n\t        return true;\n\t      }\n\t    }\n\t  }\n\t\n\t  function stringifySubstitutions(obj) {\n\t    var items = [];\n\t    for (var key in obj) {\n\t      items.push(\"\\\"\" + esc(key) + \"\\\": function(c,p,t,i) {\" + obj[key] + \"}\");\n\t    }\n\t    return \"{ \" + items.join(\",\") + \" }\";\n\t  }\n\t\n\t  function stringifyPartials(codeObj) {\n\t    var partials = [];\n\t    for (var key in codeObj.partials) {\n\t      partials.push(\"\\\"\" + esc(key) + \"\\\":{name:\\\"\" + esc(codeObj.partials[key].name) + \"\\\", \" + stringifyPartials(codeObj.partials[key]) + \"}\");\n\t    }\n\t    return \"partials: {\" + partials.join(\",\") + \"}, subs: \" + stringifySubstitutions(codeObj.subs);\n\t  }\n\t\n\t  Hogan.stringify = function (codeObj, text, options) {\n\t    return \"{code: function (c,p,i) { \" + Hogan.wrapMain(codeObj.code) + \" },\" + stringifyPartials(codeObj) + \"}\";\n\t  };\n\t\n\t  var serialNo = 0;\n\t  Hogan.generate = function (tree, text, options) {\n\t    serialNo = 0;\n\t    var context = { code: \"\", subs: {}, partials: {} };\n\t    Hogan.walk(tree, context);\n\t\n\t    if (options.asString) {\n\t      return this.stringify(context, text, options);\n\t    }\n\t\n\t    return this.makeTemplate(context, text, options);\n\t  };\n\t\n\t  Hogan.wrapMain = function (code) {\n\t    return \"var t=this;t.b(i=i||\\\"\\\");\" + code + \"return t.fl();\";\n\t  };\n\t\n\t  Hogan.template = Hogan.Template;\n\t\n\t  Hogan.makeTemplate = function (codeObj, text, options) {\n\t    var template = this.makePartials(codeObj);\n\t    template.code = new Function(\"c\", \"p\", \"i\", this.wrapMain(codeObj.code));\n\t    return new this.template(template, text, this, options);\n\t  };\n\t\n\t  Hogan.makePartials = function (codeObj) {\n\t    var key, template = { subs: {}, partials: codeObj.partials, name: codeObj.name };\n\t    for (key in template.partials) {\n\t      template.partials[key] = this.makePartials(template.partials[key]);\n\t    }\n\t    for (key in codeObj.subs) {\n\t      template.subs[key] = new Function(\"c\", \"p\", \"t\", \"i\", codeObj.subs[key]);\n\t    }\n\t    return template;\n\t  };\n\t\n\t  function esc(s) {\n\t    return s.replace(rSlash, \"\\\\\\\\\").replace(rQuot, \"\\\\\\\"\").replace(rNewline, \"\\\\n\").replace(rCr, \"\\\\r\").replace(rLineSep, \"\\\\u2028\").replace(rParagraphSep, \"\\\\u2029\");\n\t  }\n\t\n\t  function chooseMethod(s) {\n\t    return (~s.indexOf(\".\")) ? \"d\" : \"f\";\n\t  }\n\t\n\t  function createPartial(node, context) {\n\t    var prefix = \"<\" + (context.prefix || \"\");\n\t    var sym = prefix + node.n + serialNo++;\n\t    context.partials[sym] = { name: node.n, partials: {} };\n\t    context.code += \"t.b(t.rp(\\\"\" + esc(sym) + \"\\\",c,p,\\\"\" + (node.indent || \"\") + \"\\\"));\";\n\t    return sym;\n\t  }\n\t\n\t  Hogan.codegen = {\n\t    \"#\": function (node, context) {\n\t      context.code += \"if(t.s(t.\" + chooseMethod(node.n) + \"(\\\"\" + esc(node.n) + \"\\\",c,p,1),\" + \"c,p,0,\" + node.i + \",\" + node.end + \",\\\"\" + node.otag + \" \" + node.ctag + \"\\\")){\" + \"t.rs(c,p,\" + \"function(c,p,t){\";\n\t      Hogan.walk(node.nodes, context);\n\t      context.code += \"});c.pop();}\";\n\t    },\n\t\n\t    \"^\": function (node, context) {\n\t      context.code += \"if(!t.s(t.\" + chooseMethod(node.n) + \"(\\\"\" + esc(node.n) + \"\\\",c,p,1),c,p,1,0,0,\\\"\\\")){\";\n\t      Hogan.walk(node.nodes, context);\n\t      context.code += \"};\";\n\t    },\n\t\n\t    \">\": createPartial,\n\t    \"<\": function (node, context) {\n\t      var ctx = { partials: {}, code: \"\", subs: {}, inPartial: true };\n\t      Hogan.walk(node.nodes, ctx);\n\t      var template = context.partials[createPartial(node, context)];\n\t      template.subs = ctx.subs;\n\t      template.partials = ctx.partials;\n\t    },\n\t\n\t    $: function (node, context) {\n\t      var ctx = { subs: {}, code: \"\", partials: context.partials, prefix: node.n };\n\t      Hogan.walk(node.nodes, ctx);\n\t      context.subs[node.n] = ctx.code;\n\t      if (!context.inPartial) {\n\t        context.code += \"t.sub(\\\"\" + esc(node.n) + \"\\\",c,p,i);\";\n\t      }\n\t    },\n\t\n\t    \"\\n\": function (node, context) {\n\t      context.code += write(\"\\\"\\\\n\\\"\" + (node.last ? \"\" : \" + i\"));\n\t    },\n\t\n\t    _v: function (node, context) {\n\t      context.code += \"t.b(t.v(t.\" + chooseMethod(node.n) + \"(\\\"\" + esc(node.n) + \"\\\",c,p,0)));\";\n\t    },\n\t\n\t    _t: function (node, context) {\n\t      context.code += write(\"\\\"\" + esc(node.text) + \"\\\"\");\n\t    },\n\t\n\t    \"{\": tripleStache,\n\t\n\t    \"&\": tripleStache\n\t  };\n\t\n\t  function tripleStache(node, context) {\n\t    context.code += \"t.b(t.t(t.\" + chooseMethod(node.n) + \"(\\\"\" + esc(node.n) + \"\\\",c,p,0)));\";\n\t  }\n\t\n\t  function write(s) {\n\t    return \"t.b(\" + s + \");\";\n\t  }\n\t\n\t  Hogan.walk = function (nodelist, context) {\n\t    var func;\n\t    for (var i = 0, l = nodelist.length; i < l; i++) {\n\t      func = Hogan.codegen[nodelist[i].tag];\n\t      func && func(nodelist[i], context);\n\t    }\n\t    return context;\n\t  };\n\t\n\t  Hogan.parse = function (tokens, text, options) {\n\t    options = options || {};\n\t    return buildTree(tokens, \"\", [], options.sectionTags || []);\n\t  };\n\t\n\t  Hogan.cache = {};\n\t\n\t  Hogan.cacheKey = function (text, options) {\n\t    return [text, !!options.asString, !!options.disableLambda, options.delimiters, !!options.modelGet].join(\"||\");\n\t  };\n\t\n\t  Hogan.compile = function (text, options) {\n\t    options = options || {};\n\t    var key = Hogan.cacheKey(text, options);\n\t    var template = this.cache[key];\n\t\n\t    if (template) {\n\t      var partials = template.partials;\n\t      for (var name in partials) {\n\t        delete partials[name].instance;\n\t      }\n\t      return template;\n\t    }\n\t\n\t    template = this.generate(this.parse(this.scan(text, options.delimiters), text, options), text, options);\n\t    return this.cache[key] = template;\n\t  };\n\t})(true ? exports : Hogan);\n\n/***/ },\n/* 42 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\t/*\n\t *  Copyright 2011 Twitter, Inc.\n\t *  Licensed under the Apache License, Version 2.0 (the \"License\");\n\t *  you may not use this file except in compliance with the License.\n\t *  You may obtain a copy of the License at\n\t *\n\t *  http://www.apache.org/licenses/LICENSE-2.0\n\t *\n\t *  Unless required by applicable law or agreed to in writing, software\n\t *  distributed under the License is distributed on an \"AS IS\" BASIS,\n\t *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\t *  See the License for the specific language governing permissions and\n\t *  limitations under the License.\n\t */\n\t\n\tvar Hogan = {};\n\t\n\t(function (Hogan) {\n\t  Hogan.Template = function (codeObj, text, compiler, options) {\n\t    codeObj = codeObj || {};\n\t    this.r = codeObj.code || this.r;\n\t    this.c = compiler;\n\t    this.options = options || {};\n\t    this.text = text || \"\";\n\t    this.partials = codeObj.partials || {};\n\t    this.subs = codeObj.subs || {};\n\t    this.buf = \"\";\n\t  };\n\t\n\t  Hogan.Template.prototype = {\n\t    // render: replaced by generated code.\n\t    r: function (context, partials, indent) {\n\t      return \"\";\n\t    },\n\t\n\t    // variable escaping\n\t    v: hoganEscape,\n\t\n\t    // triple stache\n\t    t: coerceToString,\n\t\n\t    render: function render(context, partials, indent) {\n\t      return this.ri([context], partials || {}, indent);\n\t    },\n\t\n\t    // render internal -- a hook for overrides that catches partials too\n\t    ri: function (context, partials, indent) {\n\t      return this.r(context, partials, indent);\n\t    },\n\t\n\t    // ensurePartial\n\t    ep: function (symbol, partials) {\n\t      var partial = this.partials[symbol];\n\t\n\t      // check to see that if we've instantiated this partial before\n\t      var template = partials[partial.name];\n\t      if (partial.instance && partial.base == template) {\n\t        return partial.instance;\n\t      }\n\t\n\t      if (typeof template == \"string\") {\n\t        if (!this.c) {\n\t          throw new Error(\"No compiler available.\");\n\t        }\n\t        template = this.c.compile(template, this.options);\n\t      }\n\t\n\t      if (!template) {\n\t        return null;\n\t      }\n\t\n\t      // We use this to check whether the partials dictionary has changed\n\t      this.partials[symbol].base = template;\n\t\n\t      if (partial.subs) {\n\t        // Make sure we consider parent template now\n\t        if (!partials.stackText) partials.stackText = {};\n\t        for (key in partial.subs) {\n\t          if (!partials.stackText[key]) {\n\t            partials.stackText[key] = (this.activeSub !== undefined && partials.stackText[this.activeSub]) ? partials.stackText[this.activeSub] : this.text;\n\t          }\n\t        }\n\t        template = createSpecializedPartial(template, partial.subs, partial.partials, this.stackSubs, this.stackPartials, partials.stackText);\n\t      }\n\t      this.partials[symbol].instance = template;\n\t\n\t      return template;\n\t    },\n\t\n\t    // tries to find a partial in the current scope and render it\n\t    rp: function (symbol, context, partials, indent) {\n\t      var partial = this.ep(symbol, partials);\n\t      if (!partial) {\n\t        return \"\";\n\t      }\n\t\n\t      return partial.ri(context, partials, indent);\n\t    },\n\t\n\t    // render a section\n\t    rs: function (context, partials, section) {\n\t      var tail = context[context.length - 1];\n\t\n\t      if (!isArray(tail)) {\n\t        section(context, partials, this);\n\t        return;\n\t      }\n\t\n\t      for (var i = 0; i < tail.length; i++) {\n\t        context.push(tail[i]);\n\t        section(context, partials, this);\n\t        context.pop();\n\t      }\n\t    },\n\t\n\t    // maybe start a section\n\t    s: function (val, ctx, partials, inverted, start, end, tags) {\n\t      var pass;\n\t\n\t      if (isArray(val) && val.length === 0) {\n\t        return false;\n\t      }\n\t\n\t      if (typeof val == \"function\") {\n\t        val = this.ms(val, ctx, partials, inverted, start, end, tags);\n\t      }\n\t\n\t      pass = !!val;\n\t\n\t      if (!inverted && pass && ctx) {\n\t        ctx.push((typeof val == \"object\") ? val : ctx[ctx.length - 1]);\n\t      }\n\t\n\t      return pass;\n\t    },\n\t\n\t    // find values with dotted names\n\t    d: function (key, ctx, partials, returnFound) {\n\t      var found, names = key.split(\".\"), val = this.f(names[0], ctx, partials, returnFound), doModelGet = this.options.modelGet, cx = null;\n\t\n\t      if (key === \".\" && isArray(ctx[ctx.length - 2])) {\n\t        val = ctx[ctx.length - 1];\n\t      } else {\n\t        for (var i = 1; i < names.length; i++) {\n\t          found = findInScope(names[i], val, doModelGet);\n\t          if (found !== undefined) {\n\t            cx = val;\n\t            val = found;\n\t          } else {\n\t            val = \"\";\n\t          }\n\t        }\n\t      }\n\t\n\t      if (returnFound && !val) {\n\t        return false;\n\t      }\n\t\n\t      if (!returnFound && typeof val == \"function\") {\n\t        ctx.push(cx);\n\t        val = this.mv(val, ctx, partials);\n\t        ctx.pop();\n\t      }\n\t\n\t      return val;\n\t    },\n\t\n\t    // find values with normal names\n\t    f: function (key, ctx, partials, returnFound) {\n\t      var val = false, v = null, found = false, doModelGet = this.options.modelGet;\n\t\n\t      for (var i = ctx.length - 1; i >= 0; i--) {\n\t        v = ctx[i];\n\t        val = findInScope(key, v, doModelGet);\n\t        if (val !== undefined) {\n\t          found = true;\n\t          break;\n\t        }\n\t      }\n\t\n\t      if (!found) {\n\t        return (returnFound) ? false : \"\";\n\t      }\n\t\n\t      if (!returnFound && typeof val == \"function\") {\n\t        val = this.mv(val, ctx, partials);\n\t      }\n\t\n\t      return val;\n\t    },\n\t\n\t    // higher order templates\n\t    ls: function (func, cx, partials, text, tags) {\n\t      var oldTags = this.options.delimiters;\n\t\n\t      this.options.delimiters = tags;\n\t      this.b(this.ct(coerceToString(func.call(cx, text)), cx, partials));\n\t      this.options.delimiters = oldTags;\n\t\n\t      return false;\n\t    },\n\t\n\t    // compile text\n\t    ct: function (text, cx, partials) {\n\t      if (this.options.disableLambda) {\n\t        throw new Error(\"Lambda features disabled.\");\n\t      }\n\t      return this.c.compile(text, this.options).render(cx, partials);\n\t    },\n\t\n\t    // template result buffering\n\t    b: function (s) {\n\t      this.buf += s;\n\t    },\n\t\n\t    fl: function () {\n\t      var r = this.buf;this.buf = \"\";return r;\n\t    },\n\t\n\t    // method replace section\n\t    ms: function (func, ctx, partials, inverted, start, end, tags) {\n\t      var textSource, cx = ctx[ctx.length - 1], result = func.call(cx);\n\t\n\t      if (typeof result == \"function\") {\n\t        if (inverted) {\n\t          return true;\n\t        } else {\n\t          textSource = (this.activeSub && this.subsText && this.subsText[this.activeSub]) ? this.subsText[this.activeSub] : this.text;\n\t          return this.ls(result, cx, partials, textSource.substring(start, end), tags);\n\t        }\n\t      }\n\t\n\t      return result;\n\t    },\n\t\n\t    // method replace variable\n\t    mv: function (func, ctx, partials) {\n\t      var cx = ctx[ctx.length - 1];\n\t      var result = func.call(cx);\n\t\n\t      if (typeof result == \"function\") {\n\t        return this.ct(coerceToString(result.call(cx)), cx, partials);\n\t      }\n\t\n\t      return result;\n\t    },\n\t\n\t    sub: function (name, context, partials, indent) {\n\t      var f = this.subs[name];\n\t      if (f) {\n\t        this.activeSub = name;\n\t        f(context, partials, this, indent);\n\t        this.activeSub = false;\n\t      }\n\t    }\n\t\n\t  };\n\t\n\t  //Find a key in an object\n\t  function findInScope(key, scope, doModelGet) {\n\t    var val;\n\t\n\t    if (scope && typeof scope == \"object\") {\n\t      if (scope[key] !== undefined) {\n\t        val = scope[key];\n\t\n\t        // try lookup with get for backbone or similar model data\n\t      } else if (doModelGet && scope.get && typeof scope.get == \"function\") {\n\t        val = scope.get(key);\n\t      }\n\t    }\n\t\n\t    return val;\n\t  }\n\t\n\t  function createSpecializedPartial(instance, subs, partials, stackSubs, stackPartials, stackText) {\n\t    function PartialTemplate() {};\n\t    PartialTemplate.prototype = instance;\n\t    function Substitutions() {};\n\t    Substitutions.prototype = instance.subs;\n\t    var key;\n\t    var partial = new PartialTemplate();\n\t    partial.subs = new Substitutions();\n\t    partial.subsText = {}; //hehe. substext.\n\t    partial.buf = \"\";\n\t\n\t    stackSubs = stackSubs || {};\n\t    partial.stackSubs = stackSubs;\n\t    partial.subsText = stackText;\n\t    for (key in subs) {\n\t      if (!stackSubs[key]) stackSubs[key] = subs[key];\n\t    }\n\t    for (key in stackSubs) {\n\t      partial.subs[key] = stackSubs[key];\n\t    }\n\t\n\t    stackPartials = stackPartials || {};\n\t    partial.stackPartials = stackPartials;\n\t    for (key in partials) {\n\t      if (!stackPartials[key]) stackPartials[key] = partials[key];\n\t    }\n\t    for (key in stackPartials) {\n\t      partial.partials[key] = stackPartials[key];\n\t    }\n\t\n\t    return partial;\n\t  }\n\t\n\t  var rAmp = /&/g, rLt = /</g, rGt = />/g, rApos = /\\'/g, rQuot = /\\\"/g, hChars = /[&<>\\\"\\']/;\n\t\n\t  function coerceToString(val) {\n\t    return String((val === null || val === undefined) ? \"\" : val);\n\t  }\n\t\n\t  function hoganEscape(str) {\n\t    str = coerceToString(str);\n\t    return hChars.test(str) ? str.replace(rAmp, \"&amp;\").replace(rLt, \"&lt;\").replace(rGt, \"&gt;\").replace(rApos, \"&#39;\").replace(rQuot, \"&quot;\") : str;\n\t  }\n\t\n\t  var isArray = Array.isArray || function (a) {\n\t    return Object.prototype.toString.call(a) === \"[object Array]\";\n\t  };\n\t})(true ? exports : Hogan);\n\n/***/ }\n/******/ ])\n});\n\n\n\n/** WEBPACK FOOTER **\n ** TweenTime.Editor.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a1a506e355ed2881dc77\n **/","var tpl_timeline = require('./templates/timeline.tpl.html');\nimport Timeline from './graph/Timeline';\nimport PropertiesEditor from './editor/PropertiesEditor';\nimport EditorMenu from './editor/EditorMenu';\nimport EditorControls from './editor/EditorControls';\nimport SelectionManager from './editor/SelectionManager';\nimport Exporter from './editor/Exporter';\nimport UndoManager from './editor/UndoManager';\n\nclass Editor {\n  constructor(tweenTime, options = {}) {\n    this.tweenTime = tweenTime;\n    this.options = options;\n    this.timer = this.tweenTime.timer;\n    this.lastTime = -1;\n\n    this.onKeyAdded = this.onKeyAdded.bind(this);\n    this.onKeyRemoved = this.onKeyRemoved.bind(this);\n\n    this.$timeline = $(tpl_timeline());\n    $('body').append(this.$timeline);\n    $('body').addClass('has-editor');\n\n    this.selectionManager = new SelectionManager(this.tweenTime);\n    this.exporter = new Exporter(this);\n    this.timeline = new Timeline(this, options);\n\n    this.propertiesEditor = new PropertiesEditor(this, this.selectionManager);\n    this.propertiesEditor.keyAdded.add(this.onKeyAdded);\n    this.propertiesEditor.keyRemoved.add(this.onKeyRemoved);\n\n    this.menu = new EditorMenu(this.tweenTime, this.$timeline, this);\n    if (this.options.onMenuCreated != null) {\n      this.options.onMenuCreated(this.$timeline.find('.timeline__menu'));\n    }\n\n    this.controls = new EditorControls(this.tweenTime, this.$timeline);\n    this.undoManager = new UndoManager(this);\n\n    // Will help resize the canvas to correct size (minus sidebar and timeline)\n    window.editorEnabled = true;\n    window.dispatchEvent(new Event('resize'));\n    window.requestAnimationFrame(() => this.update());\n  }\n\n  onKeyAdded() {\n    this.undoManager.addState();\n    this.render(false, true);\n  }\n\n  onKeyRemoved(item) {\n    this.selectionManager.removeItem(item);\n    this.undoManager.addState();\n    if (this.selectionManager.selection.length) {\n      this.selectionManager.triggerSelect();\n    }\n    this.render(false, true);\n  }\n\n  render(time = false, force = false) {\n    if (time === false) {\n      time = this.timer.time[0];\n    }\n    if (force) {\n      this.timeline._isDirty = true;\n    }\n    this.timeline.render(time, force);\n    this.controls.render(time, force);\n    this.propertiesEditor.render(time, force);\n  }\n\n  update() {\n    var time = this.timer.time[0];\n    var time_changed = this.lastTime === time ? false : true;\n\n    this.render(time, time_changed);\n    this.lastTime = this.timer.time[0];\n    window.requestAnimationFrame(() => this.update());\n  }\n}\n\nmodule.exports = Editor;\n\n\n\n/** WEBPACK FOOTER **\n ** ./Editor.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"_\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"lodash\"}\n ** module id = 1\n ** module chunks = 0 1\n **/","let d3 = require('d3');\n\nimport Utils from '../core/Utils';\nimport Header from './Header';\nimport TimeIndicator from './TimeIndicator';\nimport Items from './Items';\nimport KeysPreview from './KeysPreview';\nimport Properties from './Properties';\nimport Keys from './Keys';\nimport Errors from './Errors';\nimport Selection from './Selection';\n\nexport default class Timeline {\n  constructor(editor, options) {\n    this.editor = editor;\n    this.tweenTime = this.editor.tweenTime;\n    this.timer = this.tweenTime.timer;\n    this.selectionManager = this.editor.selectionManager;\n\n    this._isDirty = true;\n    this.timer = this.tweenTime.timer;\n    this.currentTime = this.timer.time; // used in timeindicator.\n\n    // Make the domain cover 20% of the totalDuation by default.\n    this.initialDomain = [];\n    this.initialDomain[0] = options.domainStart || 0;\n    this.initialDomain[1] = options.domainEnd || this.timer.totalDuration * 0.2;\n\n    // Adapt time to be greater or equal to domainStart.\n    if (this.initialDomain[0] > this.timer.getCurrentTime()) {\n      this.timer.time[0] = this.initialDomain[0];\n    }\n\n    var margin = {top: 6, right: 20, bottom: 0, left: 265};\n    this.margin = margin;\n\n    var width = window.innerWidth - margin.left - margin.right;\n    var height = 270 - margin.top - margin.bottom - 40;\n    this.lineHeight = 20;\n    this.label_position_x = -margin.left + 20;\n\n    this.x = d3.time.scale()\n      .domain(this.initialDomain)\n      .range([0, width]);\n\n    this.xAxis = d3.svg.axis()\n      .scale(this.x)\n      .orient(\"top\")\n      .tickSize(-height, 0)\n      .tickFormat(Utils.formatMinutes);\n\n    this.svg = d3.select('.timeline__main').append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", 600);\n\n    this.svgContainer = this.svg.append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    this.svgContainerTime = this.svg.append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",0)\");\n\n    this.linesContainer = this.svg.append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + (margin.top) + \")\");\n\n    this.header = new Header(this.timer, this.initialDomain, this.tweenTime, width, margin)\n    this.timeIndicator = new TimeIndicator(this, this.svgContainerTime);\n\n    this.selection = new Selection(this, this.svg, margin);\n\n    this.items = new Items(this, this.linesContainer);\n    this.items.onUpdate.add(this.onUpdate);\n    this.keysPreview = new KeysPreview(this, this.linesContainer);\n\n    this.properties = new Properties(this);\n    this.properties.onKeyAdded.add((newKey, keyContainer) => {\n      this._isDirty = true;\n      // render the timeline directly so that we can directly select\n      // the new key with it's domElement.\n      this.render(0, false);\n      this.keys.selectNewKey(newKey, keyContainer);\n    });\n    this.errors = new Errors(this);\n    this.keys = new Keys(this);\n    this.keys.onKeyUpdated.add(() => {this.onUpdate();});\n\n    this.xAxisGrid = d3.svg.axis()\n      .scale(this.x)\n      .ticks(100)\n      .tickSize(-this.items.dy, 0)\n      .tickFormat(\"\")\n      .orient(\"top\");\n\n    this.xGrid = this.svgContainer.append('g')\n      .attr('class', 'x axis grid')\n      .attr(\"transform\", \"translate(0,\" + margin.top + \")\")\n      .call(this.xAxisGrid);\n\n    this.xAxisElement = this.svgContainer.append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", \"translate(0,\" + margin.top + \")\")\n      .call(this.xAxis);\n\n    this.header.onBrush.add((extent) => {\n      this.x.domain(extent);\n      this.xGrid.call(this.xAxisGrid);\n      this.xAxisElement.call(this.xAxis);\n      this._isDirty = true;\n    });\n\n    // First render\n    window.requestAnimationFrame(() => {this.render();});\n\n    window.onresize = () => {\n      var INNER_WIDTH = window.innerWidth\n      var width = INNER_WIDTH - margin.left - margin.right\n      this.svg.attr(\"width\", width + margin.left + margin.right)\n      this.svg.selectAll('.timeline__right-mask')\n        .attr('width', INNER_WIDTH)\n      this.x.range([0, width])\n\n      this._isDirty = true\n      this.header.resize(INNER_WIDTH)\n      this.render()\n    };\n  }\n\n  onUpdate() {\n    this.editor.render(false, true);\n  }\n\n  render(time, time_changed) {\n    if (time_changed) {\n      // Update current domain when playing to keep time indicator in view.\n      var margin_ms = 16\n      if (this.timer.getCurrentTime() > this.initialDomain[1]) {\n        var domainLength = this.initialDomain[1] - this.initialDomain[0];\n        this.initialDomain[0] += domainLength - margin_ms;\n        this.initialDomain[1] += domainLength - margin_ms;\n        this.header.setDomain(this.initialDomain);\n      }\n      if (this.timer.getCurrentTime() < this.initialDomain[0]) {\n        var domainLength = this.initialDomain[1] - this.initialDomain[0];\n        this.initialDomain[0] = this.timer.getCurrentTime();\n        this.initialDomain[1] = this.initialDomain[0] + domainLength;\n        this.header.setDomain(this.initialDomain);\n      }\n    }\n\n    if (this._isDirty || time_changed) {\n      // Render header and time indicator everytime the time changed.\n      this.header.render();\n      this.timeIndicator.render();\n    }\n\n    if (this._isDirty) {\n      // No need to call this on each frames, but only on brush, key drag, ...\n      var bar = this.items.render();\n      this.keysPreview.render(bar);\n      var properties = this.properties.render(bar);\n      this.errors.render(properties);\n      this.keys.render(properties);\n      this._isDirty = false;\n\n      // Adapt the timeline height.\n      var height = Math.max(this.items.dy + 30, 230);\n      this.xAxis.tickSize(-height, 0);\n      this.xAxisGrid.tickSize(-height, 0);\n      this.xGrid.call(this.xAxisGrid);\n      this.xAxisElement.call(this.xAxis);\n      this.svg.attr(\"height\", height);\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Timeline.js\n **/","let $ = require('jquery');\nlet Signals = require('js-signals');\nimport Property from '../editor/Property';\n\nlet tpl_propertiesEditor = require('./../templates/propertiesEditor.tpl.html');\n\nexport default class PropertiesEditor {\n  constructor(editor) {\n    this.editor = editor;\n\n    this.render = this.render.bind(this);\n    this.addProperty = this.addProperty.bind(this);\n    this.onSelect = this.onSelect.bind(this);\n    this.onKeyAdded = this.onKeyAdded.bind(this);\n\n    this.timeline = this.editor.timeline;\n    this.timer = this.editor.timer;\n    this.selectionManager = editor.selectionManager;\n\n    this.$el = $(tpl_propertiesEditor());\n    this.$container = this.$el.find('.properties-editor__main');\n    // todo: rename keyAdded to updated\n    this.keyAdded = new Signals.Signal();\n    this.keyRemoved = new Signals.Signal();\n    this.items = [];\n\n    // Close properties by default.\n    $('body').addClass('properties-is-closed');\n    // Add the properties editor to the document.\n    $('body').append(this.$el);\n\n    this.selectionManager.onSelect.add(this.onSelect);\n\n    // Stop event propagation to no play by accident.\n    this.$el.keypress(function(e) {\n      return e.stopPropagation();\n    });\n  }\n\n  onKeyAdded() {\n    this.keyAdded.dispatch();\n  }\n\n  onSelect(domElement = false) {\n    this.items = [];\n    this.$container.empty();\n    if (domElement instanceof Array) {\n      for (var i = 0; i < domElement.length; i++) {\n        var element = domElement[i];\n        this.addProperty(element);\n      }\n    } else {\n      this.addProperty(domElement);\n    }\n\n    // When selecting anything, automatically display the properties editor.\n    if (this.items.length) {\n      $('body').removeClass('properties-is-closed');\n    }\n  }\n\n  addProperty(domElement) {\n    var prop = new Property(this.editor, this.$container, domElement);\n    prop.keyAdded.add(this.onKeyAdded);\n    this.items.push(prop);\n  }\n\n  render(time, time_changed) {\n    if (!time_changed) {\n      return;\n    }\n    for (var i = 0; i < this.items.length; i++) {\n      var prop = this.items[i];\n      prop.update();\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertiesEditor.js\n **/","let saveAs = require('../bower_components/FileSaver/FileSaver.js');\n\nexport default class EditorMenu {\n  constructor(tweenTime, $timeline, editor) {\n    this.tweenTime = tweenTime;\n    this.$timeline = $timeline;\n    this.editor = editor;\n    this.timer = this.tweenTime.timer;\n    this.initExport();\n    this.initToggle();\n  }\n\n  initToggle() {\n    var timelineClosed = false;\n    var $toggleLink = this.$timeline.find('[data-action=\"toggle\"]');\n    $toggleLink.click((e) => {\n      e.preventDefault();\n      timelineClosed = !timelineClosed;\n      $toggleLink.toggleClass('menu-item--toggle-up', timelineClosed);\n      $('body').toggleClass('timeline-is-closed', timelineClosed);\n      return window.dispatchEvent(new Event('resize'));\n    });\n    var $toggleLinkSide = $('.properties-editor').find('[data-action=\"toggle\"]');\n    $toggleLinkSide.click((e) => {\n      var propertiesClosed;\n      e.preventDefault();\n      propertiesClosed = !$('body').hasClass('properties-is-closed');\n      $('body').toggleClass('properties-is-closed', propertiesClosed);\n      return window.dispatchEvent(new Event('resize'));\n    });\n  }\n\n  initExport() {\n    var exporter = this.editor.exporter;\n    this.$timeline.find('[data-action=\"export\"]').click(function(e) {\n      e.preventDefault();\n      var data = exporter.getJSON();\n      var blob = new Blob([data], {\n        \"type\": \"text/json;charset=utf-8\"\n      });\n      saveAs(blob, 'data.json');\n    });\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./editor/EditorMenu.js\n **/","export default class EditorControls {\n  constructor(tweenTime, $timeline) {\n    this.tweenTime = tweenTime;\n    this.$timeline = $timeline;\n    this.timer = this.tweenTime.timer;\n    this.$time = this.$timeline.find('.control--time');\n    this.$time_end = this.$timeline.find('.control--time-end');\n    this.initControls();\n    this.$time_end.val(this.tweenTime.timer.getDuration());\n\n    $(document).keypress((e) => {\n      if (e.charCode == 32) {\n        // Space\n        this.playPause();\n      }\n    })\n  }\n\n  playPause() {\n    var $play_pause;\n    this.timer.toggle();\n    $play_pause = this.$timeline.find('.control--play-pause');\n    $play_pause.toggleClass('icon-pause', this.timer.is_playing);\n    $play_pause.toggleClass('icon-play', !this.timer.is_playing);\n  }\n\n  initControls() {\n    var $play_pause = this.$timeline.find('.control--play-pause');\n    $play_pause.click((e) => {\n      e.preventDefault();\n      this.playPause();\n    });\n    var $bt_first = this.$timeline.find('.control--first');\n    $bt_first.click((e) => {\n      e.preventDefault();\n      this.timer.seek([0]);\n    });\n    var $bt_last = this.$timeline.find('.control--last');\n    $bt_last.click((e) => {\n      e.preventDefault();\n      var total = this.tweenTime.getTotalDuration();\n      this.timer.seek([total * 1000]);\n    });\n    this.$time.change(() => {\n      var seconds = parseFloat(this.$time.val(), 10) * 1000;\n      this.timer.seek([seconds]);\n    });\n    this.$time_end.change(() => {\n      var seconds = parseFloat(this.$time_end.val(), 10);\n      this.timer.setDuration(seconds);\n    });\n  }\n\n  render(time, time_changed) {\n    if (time_changed) {\n      var seconds = time / 1000;\n      this.$time.val(seconds.toFixed(3));\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/EditorControls.js\n **/","let d3 = require('d3');\nlet Signals = require('js-signals');\n\nexport default class SelectionManager {\n  constructor(tweenTime) {\n    this.tweenTime = tweenTime;\n    this.selection = [];\n    this.onSelect = new Signals.Signal();\n  }\n\n  removeDuplicates() {\n    var result = [];\n    for (var i = 0; i < this.selection.length; i++) {\n      var item = this.selection[i];\n      var found = false;\n      for (var j = 0; j < result.length; j++) {\n        var item2 = result[j];\n        if (item.isEqualNode(item2)) {\n          found = true;\n          break;\n        }\n      }\n      if (found === false) {\n        result.push(item);\n      }\n    }\n    this.selection = result;\n  }\n\n  removeItem(item) {\n    var index = this.selection.indexOf(item);\n    if (index > -1) {\n      this.selection.splice(index, 1);\n    }\n  }\n\n  sortSelection() {\n    var compare = function(a, b) {\n      if (!a.__data__ || !b.__data__) {\n        return 0;\n      }\n      if (a.__data__.time < b.__data__.time) {\n        return -1;\n      }\n      if (a.__data__.time > b.__data__.time) {\n        return 1;\n      }\n      return 0;\n    };\n    this.selection = this.selection.sort(compare);\n  }\n\n  reset() {\n    this.selection = [];\n    this.highlightItems();\n    this.onSelect.dispatch(this.selection, false);\n  }\n\n  triggerSelect() {\n    this.onSelect.dispatch(this.selection, false);\n  }\n\n  select(item, addToSelection = false) {\n    if (!addToSelection) {\n      this.selection = [];\n    }\n    if (item instanceof Array) {\n      for (var i = 0; i < item.length; i++) {\n        var el = item[i];\n        this.selection.push(el);\n      }\n    }\n    else {\n      this.selection.push(item);\n    }\n\n    this.removeDuplicates();\n    this.highlightItems();\n    this.sortSelection();\n    this.onSelect.dispatch(this.selection, addToSelection);\n  }\n\n  getSelection() {\n    return this.selection;\n  }\n\n  highlightItems() {\n    d3.selectAll('.bar--selected').classed('bar--selected', false);\n    d3.selectAll('.key--selected').classed('key--selected', false);\n\n    for (var i = 0; i < this.selection.length; i++) {\n      var item = this.selection[i];\n      var d3item = d3.select(item);\n      if (d3item.classed('bar')) {\n        d3item.classed('bar--selected', true);\n      }\n      else if (d3item.classed('key')) {\n        d3item.classed('key--selected', true);\n      }\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/SelectionManager.js\n **/","export default class Exporter {\n  constructor (editor) {\n    this.editor = editor;\n  }\n\n  getData() {\n    var tweenTime = this.editor.tweenTime;\n    var domain = this.editor.timeline.x.domain();\n    var domain_start = domain[0];\n    var domain_end = domain[1];\n    return {\n      settings: {\n        time: tweenTime.timer.getCurrentTime(),\n        duration: tweenTime.timer.getDuration(),\n        domain: [domain_start.getTime(), domain_end.getTime()]\n      },\n      data: tweenTime.data\n    };\n  }\n\n  getJSON () {\n    var options = this.editor.options;\n    var json_replacer = function(key, val) {\n      // Disable all private properies from TweenMax/TimelineMax\n      if (key.indexOf('_') === 0) {\n        return undefined;\n      }\n      if (options.json_replacer != null) {\n        return options.json_replacer(key, val);\n      }\n      return val;\n    }\n\n    data = this.getData();\n    return JSON.stringify(data, json_replacer, 2);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/Exporter.js\n **/","let $ = require('jquery');\n\nexport default class UndoManager {\n  constructor(editor) {\n    this.editor = editor;\n    this.history_max = 100;\n    this.history = [];\n    this.current_index = 0;\n\n    // Add the initial state\n    this.addState();\n\n    $(document).keydown((e) => {\n      if (e.keyCode == 90) {\n        if (e.metaKey || e.ctrlKey) {\n          if (!e.shiftKey) {\n            // (command | ctrl) Z\n            this.undo();\n          }\n          else {\n            // (command | ctrl) shift Z\n            this.redo()\n          }\n        }\n      }\n    });\n  }\n\n  undo() {\n    // If there is no more history return\n    if (this.current_index <= 0) {\n      return false;\n    }\n    this.current_index -= 1;\n    this.setState(this.current_index);\n  }\n\n  redo() {\n    // Stop if there is no more things.\n    if (this.current_index >= this.history.length - 1) {\n      return false;\n    }\n    this.current_index += 1;\n    this.setState(this.current_index);\n  }\n\n  addState() {\n    var data = JSON.parse(this.editor.exporter.getJSON())\n\n    // if we did some undo before and then edit something,\n    // we want to remove all actions past the current index first.\n    if (this.current_index + 1 < this.history.length) {\n      this.history.splice(this.current_index + 1, this.history.length - 1);\n    }\n\n    this.history.push(data);\n\n    // Keep history to a max size by removing the first element if needed.\n    if (this.history.length > this.history_max) {\n      this.history.shift();\n    }\n\n    // Set the current index\n    this.current_index = this.history.length - 1;\n  }\n\n  setState(index) {\n    var state = this.history[index];\n    var data = state.data;\n    var tweenTime = this.editor.tweenTime;\n\n    // naively copy keys and values from previous state\n    for (var item_key = 0; item_key < data.length; item_key++) {\n      var item = data[item_key];\n      // if item is not defined copy it\n      if (!tweenTime.data[item_key]) {\n        tweenTime.data[item_key] = item;\n      }\n      else {\n        for (var prop_key = 0; prop_key < item.properties.length; prop_key++) {\n          var prop = item.properties[prop_key];\n          // if property is not defined copy it\n          if (!tweenTime.data[item_key].properties[prop_key]) {\n            tweenTime.data[item_key].properties[prop_key] = prop;\n          }\n          else {\n            // set property keys\n            var keys = tweenTime.data[item_key].properties[prop_key].keys;\n            for (var key_key = 0; key_key < prop.keys.length; key_key++) {\n              var key = prop.keys[key_key];\n              if (!keys[key_key]) {\n                keys[key_key] = key;\n              }\n              else {\n                keys[key_key].time = key.time;\n                keys[key_key].val = key.val;\n                keys[key_key].ease = key.ease;\n              }\n            }\n          }\n        }\n      }\n\n      tweenTime.data[item_key]._isDirty = true;\n    }\n    this.editor.render(false, true);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/UndoManager.js\n **/","export default class Utils {\n  static formatMinutes(d) {\n    // convert milliseconds to seconds\n    d = d / 1000;\n    var hours = Math.floor(d / 3600);\n    var minutes = Math.floor((d - (hours * 3600)) / 60);\n    var seconds = d - (minutes * 60);\n    var output = seconds + \"s\";\n    if (minutes) {\n      output = minutes + \"m \" + output;\n    }\n    if (hours) {\n      output = hours + \"h \" + output;\n    }\n    return output;\n  }\n\n  static getClosestTime(data, time, objectId = false, property_name = false, timer = false, tolerance = 0.1) {\n    if (timer) {\n      var timer_time = timer.getCurrentTime() / 1000;\n      if (Math.abs(timer_time - time) <= tolerance) {\n        return timer_time;\n      }\n    }\n\n    if (objectId || property_name) {\n      for (var i = 0; i < data.length; i++) {\n        var item = data[i];\n        // Don't match item with itself, but allow property to match item start/end.\n        if (item.id != objectId || property_name) {\n          // First check start & end.\n          if (Math.abs(item.start - time) <= tolerance) {\n            return item.start\n          }\n\n          if (Math.abs(item.end - time) <= tolerance) {\n            return item.end\n          }\n        }\n\n        // Test properties keys\n        for (var j = 0; j < item.properties.length; j++) {\n          var prop = item.properties[j];\n          // Don't match property with itself.\n          if (prop.keys && (item.id != objectId || prop.name != property_name)) {\n            for (var k = 0; k < prop.keys; k++) {\n              var key = prop.keys[k];\n              if (Math.abs(key.time - time) <= tolerance) {\n                return key.time;\n              }\n            }\n          }\n        }\n      }\n    }\n    return false;\n  }\n\n  static getPreviousKey(keys, time) {\n    var prevKey = false;\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      if (key.time < time) {\n        prevKey = key;\n      }\n      else {\n        return prevKey;\n      }\n    }\n    return prevKey;\n  }\n\n  static sortKeys(keys) {\n    var compare = function (a, b) {\n      if (a.time < b.time) {\n        return -1;\n      }\n      if (a.time > b.time) {\n        return 1;\n      }\n      return 0;\n    }\n    return keys.sort(compare);\n  }\n\n  static guid() {\n    var s4 = function() {\n      return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n    }\n    return s4() + s4() + \"-\" + s4() + \"-\" + s4() + \"-\" + s4() + \"-\" + s4() + s4() + s4();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./core/Utils.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_12__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"d3\"\n ** module id = 12\n ** module chunks = 1\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_13__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"$\",\"commonjs\":\"jquery\",\"commonjs2\":\"jquery\",\"amd\":\"jquery\"}\n ** module id = 13\n ** module chunks = 1\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_14__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"signals\",\"commonjs\":\"./signals\",\"amd\":\"signals\"}\n ** module id = 14\n ** module chunks = 0 1\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"timeline\\\">\");t.b(\"\\n\" + i);t.b(\"  <nav class=\\\"timeline__menu\\\">\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"menu-item\\\" data-action=\\\"export\\\">Export</a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\");t.b(\"\\n\" + i);t.b(\"  </nav>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__controls controls\\\">\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--first icon-first\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--play-pause icon-play\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <a href=\\\"#\\\" class=\\\"control control--last icon-last\\\"></a>\");t.b(\"\\n\" + i);t.b(\"    <input type=\\\"text\\\" class=\\\"control control--input control--time\\\" /> <span class=\\\"control__time-separator\\\">/</span> <input type=\\\"text\\\" class=\\\"control control--input control--time-end\\\" />\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__header\\\">\");t.b(\"\\n\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"timeline__main\\\">\");t.b(\"\\n\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"timeline\\\">\\n  <nav class=\\\"timeline__menu\\\">\\n    <a href=\\\"#\\\" class=\\\"menu-item\\\" data-action=\\\"export\\\">Export</a>\\n    <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\\n  </nav>\\n  <div class=\\\"timeline__controls controls\\\">\\n    <a href=\\\"#\\\" class=\\\"control control--first icon-first\\\"></a>\\n    <a href=\\\"#\\\" class=\\\"control control--play-pause icon-play\\\"></a>\\n    <a href=\\\"#\\\" class=\\\"control control--last icon-last\\\"></a>\\n    <input type=\\\"text\\\" class=\\\"control control--input control--time\\\" /> <span class=\\\"control__time-separator\\\">/</span> <input type=\\\"text\\\" class=\\\"control control--input control--time-end\\\" />\\n  </div>\\n  <div class=\\\"timeline__header\\\">\\n\\n  </div>\\n  <div class=\\\"timeline__main\\\">\\n\\n  </div>\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/timeline.tpl.html\n ** module id = 16\n ** module chunks = 1\n **/","let d3 = require('d3');\n\nlet Signals = require('js-signals');\nimport Utils from '../core/Utils';\n\nexport default class Header {\n  constructor(timer, initialDomain, tweenTime, width, margin) {\n    this.timer = timer;\n    this.initialDomain = initialDomain;\n    this.tweenTime = tweenTime;\n\n    this.onBrush = new Signals.Signal();\n    this.margin = {top: 10, right: 20, bottom: 0, left: margin.left};\n    this.height = 50 - this.margin.top - this.margin.bottom + 20;\n\n    this.currentTime = this.timer.time;\n    this.x = d3.time.scale().range([0, width]);\n    this.x.domain([0, this.timer.totalDuration]);\n\n    // Same as this.x from timeline\n    this.xDisplayed = d3.time.scale().range([0, width]);\n    this.xDisplayed.domain(this.initialDomain);\n\n    this.xAxis = d3.svg.axis()\n      .scale(this.x)\n      .orient(\"top\")\n      .tickSize(-5, 0)\n      .tickFormat(Utils.formatMinutes);\n\n    this.svg = d3.select('.timeline__header').append(\"svg\")\n      .attr(\"width\", width + this.margin.left + this.margin.right)\n      .attr(\"height\", 56);\n\n    this.svgContainer = this.svg.append(\"g\")\n      .attr(\"transform\", \"translate(\" + this.margin.left + \",\" + this.margin.top + \")\");\n\n    this.createBrushHandle();\n    this.createTimeHandle();\n    this.timer.durationChanged.add(this.onDurationChanged);\n  }\n\n  adaptDomainToDuration(domain, seconds) {\n    var ms = seconds * 1000;\n    var new_domain = [domain[0], domain[1]];\n    // Make the domain smaller or equal to ms.\n    new_domain[0] = Math.min(new_domain[0], ms);\n    new_domain[1] = Math.min(new_domain[1], ms);\n    // Should not go below 0.\n    new_domain[0] = Math.max(new_domain[0], 0);\n\n    return new_domain;\n  }\n\n  setDomain() {\n    this.brush.x(this.x).extent(this.initialDomain);\n    this.svgContainer.select('.brush').call(this.brush);\n    // Same as onBrush\n    this.onBrush.dispatch(this.initialDomain);\n    this.render();\n    this.xDisplayed.domain(this.initialDomain);\n  }\n\n  onDurationChanged(seconds) {\n    this.x.domain([0, this.timer.totalDuration]);\n    this.xAxisElement.call(this.xAxis);\n    this.initialDomain = this.adaptDomainToDuration(this.initialDomain, seconds);\n    this.setDomain(this.initialDomain);\n  }\n\n  createBrushHandle() {\n    this.xAxisElement = this.svgContainer.append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", \"translate(0,\" + (this.margin.top + 7) + \")\")\n      .call(this.xAxis);\n\n    var onBrush = () => {\n      var extent0 = this.brush.extent()\n      // Get domain as milliseconds and not date.\n      var start = extent0[0].getTime()\n      var end = extent0[1].getTime()\n      // Set the initial domain.\n      this.initialDomain[0] = start\n      this.initialDomain[1] = end\n      this.setDomain(this.initialDomain)\n    }\n\n    this.brush = d3.svg.brush()\n      .x(this.x)\n      .extent(this.initialDomain)\n      .on(\"brush\", onBrush);\n\n    this.gBrush = this.svgContainer.append(\"g\")\n      .attr(\"class\", \"brush\")\n      .call(this.brush)\n      .selectAll(\"rect\")\n      .attr('height', 20);\n  }\n\n  render() {\n    var timeSelection = this.svgContainer.selectAll('.time-indicator');\n    timeSelection.attr('transform', 'translate(' + (this.xDisplayed(this.currentTime[0])) + ', 25)');\n  }\n\n  createTimeHandle() {\n    var self = this;\n\n    var dragTimeMove = function() {\n      var event = d3.event.sourceEvent;\n      event.stopPropagation();\n      var tweenTime = self.tweenTime;\n      var event_x = event.x != null ? event.x : event.clientX;\n      var dx = self.xDisplayed.invert(event_x - self.margin.left);\n      dx = dx.getTime();\n      dx = Math.max(0, dx);\n\n      var timeMatch = false;\n      if (event.shiftKey) {\n        time = dx / 1000;\n        timeMatch = Utils.getClosestTime(tweenTime.data, time, '---non-existant');\n        if (timeMatch !== false) {\n          timeMatch = timeMatch * 1000;\n        }\n      }\n      if (timeMatch === false) {\n        timeMatch = dx;\n      }\n      self.timer.seek([timeMatch]);\n    }\n\n    var dragTime = d3.behavior.drag()\n      .origin(function(d) {\n        return d;\n      })\n      .on(\"drag\", dragTimeMove);\n\n    var timeSelection = this.svgContainer.selectAll('.time-indicator').data(this.currentTime);\n\n    timeSelection.enter().append('rect')\n      .attr('x', 0)\n      .attr('y', 20)\n      .attr('width', self.xDisplayed(self.timer.totalDuration))\n      .attr('height', 50)\n      .attr('fill-opacity', 0)\n      .on('click', function() {\n        var mouse = d3.mouse(this)\n        var dx = self.xDisplayed.invert(mouse[0])\n        dx = dx.getTime()\n        dx = Math.max(0, dx)\n        self.timer.seek([dx])\n      });\n\n    var timeGrp = timeSelection.enter().append(\"g\")\n      .attr('class', \"time-indicator\")\n      .attr(\"transform\", \"translate(-0.5,\" + 30 + \")\")\n      .call(dragTime);\n\n    timeGrp.append('rect')\n      .attr('class', 'time-indicator__line')\n      .attr('x', -0.5)\n      .attr('y', 0)\n      .attr('width', 1)\n      .attr('height', 1000);\n\n    timeGrp.append('path')\n      .attr('class', 'time-indicator__handle')\n      .attr('d', 'M -5 -3 L -5 5 L 0 10 L 5 5 L 5 -3 L -5 -3');\n\n    // Mask time indicator\n    // todo: remove the mask.\n    this.svgContainer.append(\"rect\")\n      .attr(\"class\", \"graph-mask\")\n      .attr(\"x\", -self.margin.left)\n      .attr(\"y\", -self.margin.top)\n      .attr(\"width\", self.margin.left - 5)\n      .attr(\"height\", self.height);\n  }\n\n  resize(width) {\n    width = width - this.margin.left - this.margin.right;\n    this.svg.attr(\"width\", width + this.margin.left + this.margin.right);\n\n    this.x.range([0, width]);\n    this.xDisplayed.range([0, width]);\n    this.xAxisElement.call(this.xAxis);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Header.js\n **/","export default class TimeIndicator {\n  constructor(timeline, container) {\n    this.timeline = timeline;\n    this.container = container;\n    this.timeSelection = this.container.selectAll('.time-indicator').data(this.timeline.currentTime)\n    var timeGrp = this.timeSelection.enter().append(\"svg\")\n      .attr('class', \"time-indicator timeline__right-mask\")\n      .attr('width', window.innerWidth - this.timeline.label_position_x)\n      .attr('height', 442);\n\n    this.timeSelection = timeGrp.append('rect')\n      .attr('class', 'time-indicator__line')\n      .attr('x', -1)\n      .attr('y', -this.timeline.margin.top - 5)\n      .attr('width', 1)\n      .attr('height', 1000);\n  }\n\n  render() {\n    this.timeSelection = this.container.selectAll('.time-indicator rect');\n    this.timeSelection.attr('x', this.timeline.x(this.timeline.currentTime[0]) - 0.5);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/TimeIndicator.js\n **/","let d3 = require('d3');\nlet Signals = require('js-signals');\nlet _ = require('lodash');\nimport Utils from '../core/Utils';\n\nexport default class Items {\n  constructor(timeline, container) {\n    this.timeline = timeline;\n    this.container = container;\n    this.dy = 10 + this.timeline.margin.top;\n    this.onUpdate = new Signals.Signal();\n  }\n\n  render() {\n    var self = this\n    var tweenTime = self.timeline.tweenTime\n\n    var selectBar = function() {\n      self.timeline.selectionManager.select(this);\n    }\n\n    var dragmove = function(d) {\n      var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n      var diff = (dx - d.start);\n      d.start += diff;\n      d.end += diff;\n      if (d.properties) {\n        for (var prop_key = 0; prop_key < d.properties.length; prop_key++) {\n          var prop = d.properties[prop_key];\n          for (var i = 0; i < prop.keys.length; i++) {\n            var key = prop.keys[i];\n            key.time += diff;\n          }\n        }\n      }\n      d._isDirty = true;\n      self.onUpdate.dispatch();\n    }\n\n    var dragmoveLeft = function(d) {\n      d3.event.sourceEvent.stopPropagation();\n      var sourceEvent = d3.event.sourceEvent;\n      var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n      var timeMatch = false;\n      if (sourceEvent.shiftKey) {\n        timeMatch = Utils.getClosestTime(tweenTime.data, dx, d.id, false, tweenTime.timer);\n      }\n      if (!timeMatch) {\n        var diff = dx - d.start;\n        timeMatch = d.start + diff;\n      }\n      d.start = timeMatch;\n      d._isDirty = true;\n      self.onUpdate.dispatch();\n    }\n\n    var dragmoveRight = function(d) {\n      d3.event.sourceEvent.stopPropagation();\n      var sourceEvent = d3.event.sourceEvent;\n      var dx = self.timeline.x.invert(d3.event.x).getTime() / 1000;\n      var timeMatch = false;\n      if (sourceEvent.shiftKey) {\n        timeMatch = Utils.getClosestTime(tweenTime.data, dx, false, false, tweenTime.timer);\n      }\n      if (!timeMatch) {\n        var diff = dx - d.end;\n        timeMatch = d.end + diff;\n      }\n      d.end = timeMatch;\n      d._isDirty = true;\n      self.onUpdate.dispatch();\n    }\n\n    var dragLeft = d3.behavior.drag()\n      .origin(function() {\n        var t = d3.select(this)\n        return {x: t.attr('x'), y: t.attr('y')};\n      })\n      .on(\"drag\", dragmoveLeft);\n\n    var dragRight = d3.behavior.drag()\n      .origin(function() {\n        var t = d3.select(this)\n        return {x: t.attr('x'), y: t.attr('y')};\n      })\n      .on(\"drag\", dragmoveRight);\n\n    var drag = d3.behavior.drag()\n      .origin(function() {\n        var t = d3.select(this)\n        return {x: t.attr('x'), y: t.attr('y')};\n      })\n      .on(\"drag\", dragmove);\n\n    var bar_border = 1\n    var bar = this.container.selectAll(\".line-grp\")\n      .data(this.timeline.tweenTime.data, (d) => {return d.id;});\n\n    var barEnter = bar.enter()\n      .append('g').attr('class', 'line-grp');\n\n    var barContainerRight = barEnter.append('svg')\n      .attr('class', 'timeline__right-mask')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight);\n\n    barContainerRight.append(\"rect\")\n      .attr(\"class\", \"bar\")\n      // Add a unique id for SelectionManager.removeDuplicates\n      .attr('id', () => {return Utils.guid();})\n      .attr(\"y\", 3)\n      .attr(\"height\", 14);\n\n    barContainerRight.append(\"rect\")\n      .attr(\"class\", \"bar-anchor bar-anchor--left\")\n      .attr(\"y\", 2)\n      .attr(\"height\", 16)\n      .attr(\"width\", 6)\n      .call(dragLeft);\n\n    barContainerRight.append(\"rect\")\n      .attr(\"class\", \"bar-anchor bar-anchor--right\")\n      .attr(\"y\", 2)\n      .attr(\"height\", 16)\n      .attr(\"width\", 6)\n      .call(dragRight);\n\n    self.dy = 10 + this.timeline.margin.top;\n    bar.attr(\"transform\", function(d) {\n      var y = self.dy\n      self.dy += self.timeline.lineHeight;\n      if (!d.collapsed) {\n        var numProperties = 0;\n        if (d.properties) {\n          var visibleProperties = _.filter(d.properties, function(prop) {\n            return prop.keys.length;\n          });\n          numProperties = visibleProperties.length;\n        }\n        self.dy += numProperties * self.timeline.lineHeight;\n      }\n      return \"translate(0,\" + y + \")\";\n    });\n\n    var barWithStartAndEnd = function(d) {\n      if ((d.start != null) && (d.end != null)) {\n        return true;\n      }\n      return false;\n    }\n\n    bar.selectAll('.bar-anchor--left')\n      .filter(barWithStartAndEnd)\n      .attr(\"x\", (d) => {return self.timeline.x(d.start * 1000) - 1;})\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      });\n\n    bar.selectAll('.bar-anchor--right')\n      .filter(barWithStartAndEnd)\n      .attr(\"x\", (d) => {return self.timeline.x(d.end * 1000) - 1;})\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation()\n      });\n\n    bar.selectAll('.bar')\n      .filter(barWithStartAndEnd)\n      .attr(\"x\", (d) => {return self.timeline.x(d.start * 1000) + bar_border;})\n      .attr(\"width\", function(d) {\n        return Math.max(0, (self.timeline.x(d.end) - self.timeline.x(d.start)) * 1000 - bar_border)\n      })\n      .call(drag)\n      .on(\"click\", selectBar)\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation()\n      });\n\n    barEnter.append(\"text\")\n      .attr(\"class\", \"line-label\")\n      .attr(\"x\", self.timeline.label_position_x + 10)\n      .attr(\"y\", 16)\n      .text((d) => {return d.label;})\n      .on('click', selectBar)\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      })\n\n    var self = this\n    barEnter.append(\"text\")\n      .attr(\"class\", \"line__toggle\")\n      .attr(\"x\", self.timeline.label_position_x - 10)\n      .attr(\"y\", 16)\n      .on('click', function(d) {\n        d.collapsed = !d.collapsed;\n        self.onUpdate.dispatch();\n      });\n\n    bar.selectAll(\".line__toggle\").text(function(d) {\n      if (d.collapsed) {\n        return \"▸\";\n      } else {\n        return \"▾\";\n      }\n    });\n\n    barEnter.append(\"line\")\n      .attr(\"class\", 'line-separator')\n      .attr(\"x1\", -self.timeline.margin.left)\n      .attr(\"x2\", self.timeline.x(self.timeline.timer.totalDuration + 100))\n      .attr(\"y1\", self.timeline.lineHeight)\n      .attr(\"y2\", self.timeline.lineHeight);\n\n    bar.exit().remove();\n\n    return bar;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Items.js\n **/","let d3 = require('d3');\n\nexport default class KeysPreview {\n  constructor(timeline, container) {\n    this.timeline = timeline;\n    this.container = container;\n  }\n\n  render(bar) {\n    var self = this;\n\n    var propVal = function(d) {\n      if (d.properties) {\n        return d.properties;\n      } else {\n        return [];\n      }\n    };\n    var propKey = function(d) {\n      return d.name;\n    };\n\n    var properties = bar.selectAll('.keys-preview').data(propVal, propKey);\n\n    properties.enter()\n      .append('svg')\n      .attr(\"class\", 'keys-preview timeline__right-mask')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight);\n\n    var setItemStyle = function() {\n      var item = d3.select(this.parentNode.parentNode);\n      var bar_data = item.datum();\n      if (bar_data.collapsed === true) {\n        return \"\";\n      }\n      // Show only when item is collapsed\n      return \"display: none;\";\n    }\n\n    properties.selectAll('.key--preview')\n      .attr(\"style\", setItemStyle);\n\n    var keyValue = function(d) {\n      return d.keys;\n    };\n    var keyKey = function(d) {\n      return d.time;\n    };\n    var keys = properties.selectAll('.key--preview').data(keyValue, keyKey);\n\n    keys.enter()\n      .append('path')\n      .attr('class', 'key--preview')\n      .attr(\"style\", setItemStyle)\n      .attr('d', 'M 0 -4 L 4 0 L 0 4 L -4 0');\n\n    keys.attr('transform', function(d) {\n        var dx = self.timeline.x(d.time * 1000);\n        dx = parseInt(dx, 10);\n        var dy = 11;\n        return \"translate(\" + dx + \",\" + dy + \")\";\n      });\n\n    keys.exit().remove();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/KeysPreview.js\n **/","let d3 = require('d3');\nlet Signals = require('js-signals');\nimport Utils from '../core/Utils';\n\nexport default class Properties {\n  constructor(timeline) {\n    this.timeline = timeline;\n    this.onKeyAdded = new Signals.Signal()\n    this.subGrp = false\n  }\n\n  render(bar) {\n    var self = this;\n\n    var propVal = function(d) {\n      if (d.properties) {\n        return d.properties;\n      } else {\n        return [];\n      }\n    };\n    var propKey = function(d) {\n      return d.name;\n    };\n    var visibleProperties = function(d) {\n      return d.keys.length;\n    };\n\n    var properties = bar.selectAll('.line-item').data(propVal, propKey);\n\n    var subGrp = properties.enter()\n      .append('g')\n      .filter(visibleProperties)\n      .attr(\"class\", 'line-item');\n\n    // Save subGrp in a variable for use in Errors.coffee\n    self.subGrp = subGrp;\n\n    properties.filter(visibleProperties)\n      .attr (\"transform\", function(d, i) {\n        var sub_height = (i + 1) * self.timeline.lineHeight;\n        return \"translate(0,\" + sub_height + \")\";\n      });\n\n    subGrp.append('rect')\n      .attr('class', 'click-handler click-handler--property')\n      .attr('x', 0)\n      .attr('y', 0)\n      .attr('width', self.timeline.x(self.timeline.timer.totalDuration + 100))\n      .attr('height', self.timeline.lineHeight)\n      .on('dblclick', (d) => {\n        var lineObject = this.parentNode.parentNode;\n        var lineValue = d3.select(lineObject).datum();\n        var def = d[\"default\"] ? d[\"default\"] : 0;\n        var mouse = d3.mouse(this);\n        var dx = self.timeline.x.invert(mouse[0]);\n        dx = dx.getTime() / 1000;\n        var prevKey = Utils.getPreviousKey(d.keys, dx);\n        // set the value to match the previous key if we found one\n        if (prevKey) {\n          def = prevKey.val;\n        }\n        var newKey = {\n          time: dx,\n          val: def\n        };\n        d.keys.push(newKey);\n        // Sort the keys for tweens creation\n        d.keys = Utils.sortKeys(d.keys);\n\n        lineValue._isDirty = true;\n        keyContainer = this.parentNode;\n        self.onKeyAdded.dispatch(newKey, keyContainer);\n      });\n\n    // Mask\n    subGrp.append('svg')\n      .attr('class','line-item__keys timeline__right-mask')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight)\n      .attr('fill', '#f00');\n\n    subGrp.append('text')\n      .attr(\"class\", \"line-label line-label--small\")\n      .attr(\"x\", self.timeline.label_position_x + 10)\n      .attr(\"y\", 15)\n      .text(function(d) {\n        return d.name;\n      });\n\n    subGrp.append(\"line\")\n      .attr(\"class\", 'line-separator--secondary')\n      .attr(\"x1\", -self.timeline.margin.left)\n      .attr(\"x2\", self.timeline.x(self.timeline.timer.totalDuration + 100))\n      .attr(\"y1\", self.timeline.lineHeight)\n      .attr(\"y2\", self.timeline.lineHeight);\n\n    bar.selectAll('.line-item').attr('display', function() {\n        var lineObject = this.parentNode;\n        var lineValue = d3.select(lineObject).datum();\n        if (!lineValue.collapsed) {\n          return \"block\";\n        } else {\n          return \"none\";\n        }\n      });\n\n    return properties;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Properties.js\n **/","let d3 = require('d3');\nlet Signals = require('js-signals');\nimport Utils from '../core/Utils';\nlet _ = require('lodash');\n\nexport default class Keys {\n  constructor(timeline) {\n    this.timeline = timeline;\n    this.onKeyUpdated = new Signals.Signal();\n  }\n\n  selectNewKey(data, container) {\n    var self = this\n    var key = d3.select(container).selectAll('.key').filter(function(item) {\n      return item.time === data.time;\n    });\n    if (key.length) {\n      d3.selectAll('.key--selected').classed('key--selected', false);\n      key.classed('key--selected', true);\n      key = key[0][0];\n      self.timeline.selectionManager.select(key);\n    }\n  }\n\n  render(properties) {\n    var self = this;\n    var tweenTime = self.timeline.tweenTime;\n\n    var dragmove = function(d) {\n      var sourceEvent = d3.event.sourceEvent;\n      var propertyObject = this.parentNode;\n      var lineObject = propertyObject.parentNode.parentNode;\n      var propertyData = d3.select(propertyObject).datum();\n      var lineData = d3.select(lineObject).datum();\n\n      var currentDomainStart = self.timeline.x.domain()[0];\n      var mouse = d3.mouse(this);\n      var old_time = d.time;\n      var dx = self.timeline.x.invert(mouse[0]);\n      dx = dx.getTime();\n      dx = dx / 1000 - currentDomainStart / 1000;\n      dx = d.time + dx;\n\n      var selection = self.timeline.selectionManager.getSelection();\n      var selection_first_time = false;\n      var selection_last_time = false;\n      if (selection.length) {\n        selection_first_time = d3.select(selection[0]).datum().time;\n        selection_last_time = d3.select(selection[selection.length - 1]).datum().time;\n      }\n      selection = _.filter(selection, (item) => {return item.isEqualNode(this) === false;})\n\n      var timeMatch = false\n      if (sourceEvent.shiftKey) {\n        timeMatch = Utils.getClosestTime(tweenTime.data, dx, lineData.id, propertyData.name, tweenTime.timer);\n      }\n      if (timeMatch === false) {\n        timeMatch = dx;\n      }\n\n      d.time = timeMatch;\n      // Sort the keys of the current selected item.\n      propertyData.keys = Utils.sortKeys(propertyData.keys);\n      var time_offset = d.time - old_time;\n\n      var updateKeyItem = function(item) {\n        var itemPropertyObject = item.parentNode;\n        var itemPropertyData = d3.select(itemPropertyObject).datum();\n        var itemLineObject = itemPropertyObject.parentNode.parentNode;\n        var itemLineData = d3.select(itemLineObject).datum();\n        itemLineData._isDirty = true;\n        itemPropertyData.keys = Utils.sortKeys(itemPropertyData.keys);\n      }\n\n      var key_scale = false;\n      var is_first = false;\n      if (selection.length) {\n        if (sourceEvent.altKey && (selection_first_time != null) && (selection_last_time != null)) {\n          is_first = selection_first_time === old_time;\n          if (is_first) {\n            key_scale = (selection_last_time - d.time) / (selection_last_time - old_time);\n          } else {\n            key_scale = (d.time - selection_first_time) / (old_time - selection_first_time);\n          }\n        }\n\n        for (var i = 0; i < selection.length; i++) {\n          var item = selection[i];\n          data = d3.select(item).datum();\n          if (key_scale === false) {\n            data.time += time_offset;\n          } else {\n            if (is_first) {\n              data.time = selection_last_time - (selection_last_time - data.time) * key_scale;\n            } else {\n              data.time = selection_first_time + (data.time - selection_first_time) * key_scale;\n            }\n          }\n          updateKeyItem(item);\n        }\n      }\n\n      lineData._isDirty = true;\n      self.onKeyUpdated.dispatch();\n    }\n\n    var propValue = function(d) {\n      return d.keys;\n    };\n    var propKey = function(d) {\n      if (!d._id) {\n        d._id = Utils.guid();\n      }\n      return d._id;\n    };\n    var keys = properties.select('.line-item__keys').selectAll('.key').data(propValue, propKey);\n\n    // selectKey is triggered by dragstart event\n    var selectKey = function() {\n      var event = d3.event;\n      // with dragstart event the mousevent is is inside the event.sourcEvent\n      if (event.sourceEvent) {\n        event = event.sourceEvent;\n      }\n\n      var addToSelection = event.shiftKey;\n      // if element is already selectionned and we are on\n      // the dragstart event, we stop there since it is already selected.\n      if (d3.event.type && d3.event.type === \"dragstart\") {\n        if (d3.select(this).classed('key--selected')) {\n          return;\n        }\n      }\n      self.timeline.selectionManager.select(this, addToSelection);\n    }\n\n    var dragend = function() {\n      self.timeline.editor.undoManager.addState();\n    }\n\n    var drag = d3.behavior.drag()\n      .origin((d) => {return d;})\n      .on(\"drag\", dragmove)\n      .on(\"dragstart\", selectKey)\n      .on(\"dragend\", dragend);\n\n    var key_grp = keys.enter()\n      .append('g')\n      .attr('class', 'key')\n      // Use the unique id added in propKey above for the dom element id.\n      .attr('id', (d) => {return d._id;})\n      .on('mousedown', function() {\n        // Don't trigger mousedown on linescontainer else\n        // it create the selection rectangle\n        d3.event.stopPropagation();\n      })\n      .call(drag);\n\n    properties.selectAll('.key')\n      .attr('class', function(d) {\n        var cls = 'key'\n        // keep selected class\n        if (d3.select(this).classed('key--selected')) {\n          cls += \" key--selected\";\n        }\n        if (d.ease) {\n          var ease = d.ease.split('.');\n          if (ease.length === 2) {\n            cls += \" \" + ease[1];\n          }\n        } else {\n          // If no easing specified, the it's the default Quad.easeOut\n          cls += ' easeOut';\n        }\n        return cls;\n      });\n\n    var grp_linear = key_grp.append('g')\n      .attr('class', 'ease-linear');\n    grp_linear.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L 6 0 L 0 6');\n    grp_linear.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L -6 0 L 0 6');\n\n    var grp_in = key_grp.append('g')\n      .attr('class', 'ease-in');\n    grp_in.append('path')\n      .attr('class', 'key__shape-rect')\n      .attr('d', 'M 0 -6 L 0 6 L 4 5 L 1 0 L 4 -5');\n    grp_in.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L -6 0 L 0 6');\n\n    var grp_out = key_grp.append('g')\n      .attr('class', 'ease-out');\n    grp_out.append('path')\n      .attr('class', 'key__shape-rect')\n      .attr('d', 'M 0 -6 L 0 6 L -4 5 L -1 0 L -4 -5');\n    grp_out.append('path')\n      .attr('class', 'key__shape-arrow')\n      .attr('d', 'M 0 -6 L 6 0 L 0 6');\n\n    var grp_inout = key_grp.append('g')\n      .attr('class', 'ease-inout');\n    grp_inout.append('circle')\n      .attr('cx', 0)\n      .attr('cy', 0)\n      .attr('r', 5);\n\n    keys.attr('transform', function(d) {\n      var dx = self.timeline.x(d.time * 1000);\n      dx = parseInt(dx, 10);\n      var dy = 10;\n      return \"translate(\" + dx + \",\" + dy + \")\";\n    });\n\n    keys.exit().remove();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Keys.js\n **/","export default class Errors {\n  constructor(timeline) {\n    this.timeline = timeline;\n  }\n\n  render(properties) {\n    var self = this;\n    var subGrp = self.timeline.properties.subGrp\n    var propertiesWithError = function(d) {\n      return d.errors != null;\n    };\n    // use insert with :first-child to prepend.\n    subGrp.insert('svg', ':first-child')\n      .attr('class','line-item__errors')\n      .attr('width', window.innerWidth - self.timeline.label_position_x)\n      .attr('height', self.timeline.lineHeight);\n\n    var errorsValue = function(d) {\n      return d.errors;\n    };\n    var errorTime = function(d) {\n      return d.time;\n    };\n\n    var errors = properties.filter(propertiesWithError)\n      .select('.line-item__errors').selectAll('.error')\n      .data(errorsValue, errorTime);\n\n    errors.enter().append('rect')\n      .attr('class', 'error')\n      .attr('width', 4)\n      .attr('height', self.timeline.lineHeight - 1)\n      .attr('y', '1');\n\n    properties.selectAll('.error').attr('x', function(d) {\n      var dx;\n      dx = self.timeline.x(d.time * 1000);\n      return dx;\n    });\n\n    errors.exit().remove();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Errors.js\n **/","export default class Selection {\n  constructor(timeline, svg, margin) {\n    this.timeline = timeline;\n    this.svg = svg;\n    this.margin = margin;\n\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.init();\n  }\n\n  onMouseUp() {\n    this.svg.selectAll('.selection').remove();\n    // Enable again the default browser text selection.\n    $('body').css({\n      'user-select': 'all'\n    });\n  }\n\n  init() {\n    var self = this;\n    this.svg.on(\"mousedown\", function() {\n      var p = d3.mouse(this);\n      self.svg.append('rect')\n        .attr({\n          class: 'selection',\n          x: p[0],\n          y: p[1],\n          width: 0,\n          height: 0\n        });\n      // Unselect items.\n      self.timeline.selectionManager.reset();\n      // Prevent default browser text selection.\n      $('body').css({\n        'user-select': 'none'\n      });\n    }).on(\"mousemove\", function() {\n      var s = self.svg.select('.selection')\n      if (s.empty()) {\n        return;\n      }\n      var p = d3.mouse(this);\n      var d = {\n        x: parseInt(s.attr('x'), 10),\n        y: parseInt(s.attr('y'), 10),\n        width: parseInt(s.attr('width'), 10),\n        height: parseInt(s.attr('height'), 10)\n      };\n      // Apply margin to mouse selection.\n      p[0] = Math.max(self.margin.left, p[0]);\n\n      var move = {\n        x: p[0] - d.x,\n        y: p[1] - d.y\n      };\n      if (move.x < 1 || move.x * 2 < d.width) {\n        d.x = p[0];\n        d.width -= move.x;\n      } else {\n        d.width = move.x;\n      }\n\n      if (move.y < 1 || move.y * 2 < d.height) {\n        d.y = p[1];\n        d.height -= move.y;\n      } else {\n        d.height = move.y;\n      }\n\n      s.attr(d);\n\n      // remove margins from selection\n      d.x -= self.margin.left;\n      var key_width = 6;\n\n      d.timeStart = self.timeline.x.invert(d.x - key_width).getTime() / 1000;\n      d.timeEnd = self.timeline.x.invert(d.x + d.width + key_width).getTime() / 1000;\n      var containerBounding = self.svg[0][0].getBoundingClientRect();\n\n      // deselect all previously selected items\n      d3.selectAll('.key--selected').classed('key--selected', false);\n      self.timeline.selectionManager.reset();\n      var selection = [];\n      d3.selectAll('.key').each( function(state_data) {\n        var item_data = d3.select(this.parentNode.parentNode.parentNode).datum()\n        if (item_data.collapsed !== true) {\n          var itemBounding = d3.select(this)[0][0].getBoundingClientRect();\n          var y = itemBounding.top - containerBounding.top;\n          if (state_data.time >= d.timeStart && state_data.time <= d.timeEnd) {\n            // use or condition for top and bottom\n            if ((y >= d.y && y <= d.y + d.height) || (y + 10 >= d.y && y + 10 <= d.y + d.height)) {\n              d3.select(this).classed('key--selected', true);\n              selection.push(this);\n            }\n          }\n        }\n      });\n      self.timeline.selectionManager.select(selection);\n    });\n    // Attach the mouseup event to window so that it catch it event if\n    // mouseup happen outside of the browser window.\n    $(window).on(\"mouseup\", this.onMouseUp);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./graph/Selection.js\n **/","let Signals = require('js-signals');\nimport PropertyNumber from './PropertyNumber';\nimport PropertyColor from './PropertyColor';\nimport PropertyTween from './PropertyTween';\n\nexport default class Property {\n  constructor(editor, $el, domElement) {\n    this.editor = editor;\n    this.$el = $el;\n\n    this.timeline = editor.timeline;\n    this.timer = editor.timer;\n    this.selectionManager = editor.selectionManager;\n    this.keyAdded = new Signals.Signal();\n    this.items = [];\n    this.numberProp = false;\n    this.tweenProp = false;\n\n    var d3Object = d3.select(domElement);\n\n    var key_val = false;\n    var propertyObject = false;\n    var propertyData = false;\n    var lineObject = false;\n    var lineData = false;\n\n    if (d3Object.classed('key')) {\n      propertyObject = domElement.parentNode;\n      lineObject = propertyObject.parentNode.parentNode;\n      lineData = d3.select(lineObject).datum();\n      propertyData = d3.select(propertyObject).datum();\n      key_val = d3Object.datum();\n    }\n\n    // click on bar\n    if (d3Object.classed('bar')) {\n      lineData = d3Object.datum();\n    }\n\n    // click on bar label\n    if (d3Object.classed('line-label')) {\n      domElement = domElement.parentNode;\n      d3Object = d3.select(domElement);\n      lineData = d3Object.datum();\n    }\n\n    // data and propertyData are defined on key select.\n    var property_name = false;\n    if (propertyData) {\n      property_name = propertyData.name;\n    }\n\n    // Get the property container.\n    var $container = this.getContainer(lineData);\n\n    var $tween_container = $container;\n\n    // Basic data, loop through properties.\n    for (var key in lineData.properties) {\n      var instance_prop = lineData.properties[key];\n      // show all properties or only 1 if we selected a key.\n      if (!property_name || instance_prop.name === property_name) {\n        var $grp_container = this.getGroupContainer(instance_prop, $container);\n        var numberProp = this.addNumberProperty(instance_prop, lineData, key_val, $grp_container);\n        this.items.push(numberProp);\n        if (instance_prop.name === property_name) {\n          $tween_container = $grp_container;\n        }\n      }\n    }\n\n    if (property_name) {\n      // Add tween select if we are editing a key.\n      var tweenProp = this.addTweenProperty(instance_prop, lineData, key_val, $tween_container, propertyData, domElement);\n      this.items.push(tweenProp);\n    }\n  }\n\n  onKeyAdded() {\n    // propagate the event.\n    this.keyAdded.dispatch();\n  }\n\n  getGroupContainer(instance_prop, $container) {\n    var $existing, $grp, grp_class;\n    if (!instance_prop.group) {\n      grp_class = 'property-grp--general';\n      $existing = $container.find('.' + grp_class);\n      if ($existing.length) {\n        return $existing;\n      } else {\n        $grp = this.createGroupContainer(grp_class);\n        $container.append($grp);\n        return $grp;\n      }\n    } else {\n      // Replace all spaces to dash and make class lowercase\n      var group_name = instance_prop.group.replace(/\\s+/g, '-').toLowerCase();\n      grp_class = 'property-grp--' + group_name;\n      $existing = $container.find('.' + grp_class);\n      if ($existing.length) {\n        return $existing;\n      } else {\n        $grp = this.createGroupContainer(grp_class, instance_prop.group);\n        $container.append($grp);\n        return $grp;\n      }\n    }\n  }\n\n  createGroupContainer(grp_class, label = false) {\n    var $grp = $('<div class=\"property-grp ' + grp_class + '\"></div>');\n    if (label) {\n      $grp.append('<h3 class=\"property-grp__title\">' + label + '</h3>');\n    }\n    return $grp;\n  }\n\n  getContainer(lineData) {\n    var $container = false;\n    if (lineData.id) {\n      $container = $('#property--' + lineData.id);\n      if (!$container.length) {\n        $container = $container = $('<div class=\"properties__wrapper\" id=\"property--' + lineData.id + '\"></div>');\n        this.$el.append($container);\n        if (lineData.label) {\n          $container.append('<h2 class=\"properties-editor__title\">' + lineData.label + '</h2>');\n        }\n      }\n    }\n    if ($container === false) {\n      $container = $('<div class=\"properties__wrapper\" id=\"no-item\"></div>');\n      this.$el.append($container);\n    }\n    return $container;\n  }\n\n  addNumberProperty(instance_prop, lineData, key_val, $container) {\n    var propClass = PropertyNumber;\n    if (instance_prop.type && instance_prop.type === 'color') {\n      propClass = PropertyColor;\n    }\n    var prop = new propClass(instance_prop, lineData, this.editor, key_val);\n    prop.keyAdded.add(this.onKeyAdded);\n    $container.append(prop.$el);\n    return prop;\n  }\n\n  addTweenProperty(instance_prop, lineData, key_val, $container, propertyData, domElement) {\n    var tween = new PropertyTween(instance_prop, lineData, this.editor, key_val, this.timeline);\n    $container.append(tween.$el);\n\n    // Add a remove key button\n    tween.$el.find('[data-action-remove]').click((e) => {\n      e.preventDefault();\n      var index = propertyData.keys.indexOf(key_val);\n      if (index > -1) {\n        propertyData.keys.splice(index, 1);\n        this.editor.propertiesEditor.keyRemoved.dispatch(domElement);\n        return lineData._isDirty = true;\n      }\n    })\n    return tween;\n  }\n\n  update() {\n    for (var i = 0; i < this.items.length; i++) {\n      var item = this.items[i];\n      item.update();\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/Property.js\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"properties-editor\\\">\");t.b(\"\\n\" + i);t.b(\"  <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle-side\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"properties-editor__main\\\"></div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"properties-editor\\\">\\n  <a href=\\\"#\\\" class=\\\"menu-item menu-item--toggle-side\\\" data-action=\\\"toggle\\\"><i class=\\\"icon-toggle\\\"></i></a>\\n  <div class=\\\"properties-editor__main\\\"></div>\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertiesEditor.tpl.html\n ** module id = 26\n ** module chunks = 1\n **/","/* FileSaver.js\n * A saveAs() FileSaver implementation.\n * 2014-08-29\n *\n * By Eli Grey, http://eligrey.com\n * License: X11/MIT\n *   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n */\n\n/*global self */\n/*jslint bitwise: true, indent: 4, laxbreak: true, laxcomma: true, smarttabs: true, plusplus: true */\n\n/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */\n\nvar saveAs = saveAs\n  // IE 10+ (native saveAs)\n  || (typeof navigator !== \"undefined\" &&\n      navigator.msSaveOrOpenBlob && navigator.msSaveOrOpenBlob.bind(navigator))\n  // Everyone else\n  || (function(view) {\n\t\"use strict\";\n\t// IE <10 is explicitly unsupported\n\tif (typeof navigator !== \"undefined\" &&\n\t    /MSIE [1-9]\\./.test(navigator.userAgent)) {\n\t\treturn;\n\t}\n\tvar\n\t\t  doc = view.document\n\t\t  // only get URL when necessary in case Blob.js hasn't overridden it yet\n\t\t, get_URL = function() {\n\t\t\treturn view.URL || view.webkitURL || view;\n\t\t}\n\t\t, save_link = doc.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\")\n\t\t, can_use_save_link = \"download\" in save_link\n\t\t, click = function(node) {\n\t\t\tvar event = doc.createEvent(\"MouseEvents\");\n\t\t\tevent.initMouseEvent(\n\t\t\t\t\"click\", true, false, view, 0, 0, 0, 0, 0\n\t\t\t\t, false, false, false, false, 0, null\n\t\t\t);\n\t\t\tnode.dispatchEvent(event);\n\t\t}\n\t\t, webkit_req_fs = view.webkitRequestFileSystem\n\t\t, req_fs = view.requestFileSystem || webkit_req_fs || view.mozRequestFileSystem\n\t\t, throw_outside = function(ex) {\n\t\t\t(view.setImmediate || view.setTimeout)(function() {\n\t\t\t\tthrow ex;\n\t\t\t}, 0);\n\t\t}\n\t\t, force_saveable_type = \"application/octet-stream\"\n\t\t, fs_min_size = 0\n\t\t// See https://code.google.com/p/chromium/issues/detail?id=375297#c7 for\n\t\t// the reasoning behind the timeout and revocation flow\n\t\t, arbitrary_revoke_timeout = 10\n\t\t, revoke = function(file) {\n\t\t\tvar revoker = function() {\n\t\t\t\tif (typeof file === \"string\") { // file is an object URL\n\t\t\t\t\tget_URL().revokeObjectURL(file);\n\t\t\t\t} else { // file is a File\n\t\t\t\t\tfile.remove();\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (view.chrome) {\n\t\t\t\trevoker();\n\t\t\t} else {\n\t\t\t\tsetTimeout(revoker, arbitrary_revoke_timeout);\n\t\t\t}\n\t\t}\n\t\t, dispatch = function(filesaver, event_types, event) {\n\t\t\tevent_types = [].concat(event_types);\n\t\t\tvar i = event_types.length;\n\t\t\twhile (i--) {\n\t\t\t\tvar listener = filesaver[\"on\" + event_types[i]];\n\t\t\t\tif (typeof listener === \"function\") {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlistener.call(filesaver, event || filesaver);\n\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\tthrow_outside(ex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t, FileSaver = function(blob, name) {\n\t\t\t// First try a.download, then web filesystem, then object URLs\n\t\t\tvar\n\t\t\t\t  filesaver = this\n\t\t\t\t, type = blob.type\n\t\t\t\t, blob_changed = false\n\t\t\t\t, object_url\n\t\t\t\t, target_view\n\t\t\t\t, dispatch_all = function() {\n\t\t\t\t\tdispatch(filesaver, \"writestart progress write writeend\".split(\" \"));\n\t\t\t\t}\n\t\t\t\t// on any filesys errors revert to saving with object URLs\n\t\t\t\t, fs_error = function() {\n\t\t\t\t\t// don't create more object URLs than needed\n\t\t\t\t\tif (blob_changed || !object_url) {\n\t\t\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\t\t}\n\t\t\t\t\tif (target_view) {\n\t\t\t\t\t\ttarget_view.location.href = object_url;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar new_tab = view.open(object_url, \"_blank\");\n\t\t\t\t\t\tif (new_tab == undefined && typeof safari !== \"undefined\") {\n\t\t\t\t\t\t\t//Apple do not allow window.open, see http://bit.ly/1kZffRI\n\t\t\t\t\t\t\tview.location.href = object_url\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\tdispatch_all();\n\t\t\t\t\trevoke(object_url);\n\t\t\t\t}\n\t\t\t\t, abortable = function(func) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tif (filesaver.readyState !== filesaver.DONE) {\n\t\t\t\t\t\t\treturn func.apply(this, arguments);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t, create_if_not_found = {create: true, exclusive: false}\n\t\t\t\t, slice\n\t\t\t;\n\t\t\tfilesaver.readyState = filesaver.INIT;\n\t\t\tif (!name) {\n\t\t\t\tname = \"download\";\n\t\t\t}\n\t\t\tif (can_use_save_link) {\n\t\t\t\tobject_url = get_URL().createObjectURL(blob);\n\t\t\t\tsave_link.href = object_url;\n\t\t\t\tsave_link.download = name;\n\t\t\t\tclick(save_link);\n\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\tdispatch_all();\n\t\t\t\trevoke(object_url);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Object and web filesystem URLs have a problem saving in Google Chrome when\n\t\t\t// viewed in a tab, so I force save with application/octet-stream\n\t\t\t// http://code.google.com/p/chromium/issues/detail?id=91158\n\t\t\t// Update: Google errantly closed 91158, I submitted it again:\n\t\t\t// https://code.google.com/p/chromium/issues/detail?id=389642\n\t\t\tif (view.chrome && type && type !== force_saveable_type) {\n\t\t\t\tslice = blob.slice || blob.webkitSlice;\n\t\t\t\tblob = slice.call(blob, 0, blob.size, force_saveable_type);\n\t\t\t\tblob_changed = true;\n\t\t\t}\n\t\t\t// Since I can't be sure that the guessed media type will trigger a download\n\t\t\t// in WebKit, I append .download to the filename.\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=65440\n\t\t\tif (webkit_req_fs && name !== \"download\") {\n\t\t\t\tname += \".download\";\n\t\t\t}\n\t\t\tif (type === force_saveable_type || webkit_req_fs) {\n\t\t\t\ttarget_view = view;\n\t\t\t}\n\t\t\tif (!req_fs) {\n\t\t\t\tfs_error();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfs_min_size += blob.size;\n\t\t\treq_fs(view.TEMPORARY, fs_min_size, abortable(function(fs) {\n\t\t\t\tfs.root.getDirectory(\"saved\", create_if_not_found, abortable(function(dir) {\n\t\t\t\t\tvar save = function() {\n\t\t\t\t\t\tdir.getFile(name, create_if_not_found, abortable(function(file) {\n\t\t\t\t\t\t\tfile.createWriter(abortable(function(writer) {\n\t\t\t\t\t\t\t\twriter.onwriteend = function(event) {\n\t\t\t\t\t\t\t\t\ttarget_view.location.href = file.toURL();\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\t\t\tdispatch(filesaver, \"writeend\", event);\n\t\t\t\t\t\t\t\t\trevoke(file);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\twriter.onerror = function() {\n\t\t\t\t\t\t\t\t\tvar error = writer.error;\n\t\t\t\t\t\t\t\t\tif (error.code !== error.ABORT_ERR) {\n\t\t\t\t\t\t\t\t\t\tfs_error();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\"writestart progress write abort\".split(\" \").forEach(function(event) {\n\t\t\t\t\t\t\t\t\twriter[\"on\" + event] = filesaver[\"on\" + event];\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\twriter.write(blob);\n\t\t\t\t\t\t\t\tfilesaver.abort = function() {\n\t\t\t\t\t\t\t\t\twriter.abort();\n\t\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.DONE;\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tfilesaver.readyState = filesaver.WRITING;\n\t\t\t\t\t\t\t}), fs_error);\n\t\t\t\t\t\t}), fs_error);\n\t\t\t\t\t};\n\t\t\t\t\tdir.getFile(name, {create: false}, abortable(function(file) {\n\t\t\t\t\t\t// delete file if it already exists\n\t\t\t\t\t\tfile.remove();\n\t\t\t\t\t\tsave();\n\t\t\t\t\t}), abortable(function(ex) {\n\t\t\t\t\t\tif (ex.code === ex.NOT_FOUND_ERR) {\n\t\t\t\t\t\t\tsave();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfs_error();\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}), fs_error);\n\t\t\t}), fs_error);\n\t\t}\n\t\t, FS_proto = FileSaver.prototype\n\t\t, saveAs = function(blob, name) {\n\t\t\treturn new FileSaver(blob, name);\n\t\t}\n\t;\n\tFS_proto.abort = function() {\n\t\tvar filesaver = this;\n\t\tfilesaver.readyState = filesaver.DONE;\n\t\tdispatch(filesaver, \"abort\");\n\t};\n\tFS_proto.readyState = FS_proto.INIT = 0;\n\tFS_proto.WRITING = 1;\n\tFS_proto.DONE = 2;\n\n\tFS_proto.error =\n\tFS_proto.onwritestart =\n\tFS_proto.onprogress =\n\tFS_proto.onwrite =\n\tFS_proto.onabort =\n\tFS_proto.onerror =\n\tFS_proto.onwriteend =\n\t\tnull;\n\n\treturn saveAs;\n}(\n\t   typeof self !== \"undefined\" && self\n\t|| typeof window !== \"undefined\" && window\n\t|| this.content\n));\n// `self` is undefined in Firefox for Android content script context\n// while `this` is nsIContentFrameMessageManager\n// with an attribute `content` that corresponds to the window\n\nif (typeof module !== \"undefined\" && module !== null) {\n  module.exports = saveAs;\n} else if ((typeof define !== \"undefined\" && define !== null) && (define.amd != null)) {\n  define([], function() {\n    return saveAs;\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./bower_components/FileSaver/FileSaver.js\n **/","let $ = require('jquery');\nimport PropertyBase from './PropertyBase';\nlet DraggableNumber = require('draggable-number.js');\n\nlet tpl_property = require('../templates/propertyNumber.tpl.html');\n\nexport default class PropertyNumber extends PropertyBase {\n  // instance_property: The current property on the data object.\n  // lineData: The line data object.\n  constructor(instance_property, lineData, editor, key_val = false) {\n    super(instance_property, lineData, editor, key_val);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.$input = this.$el.find('input');\n  }\n\n  getInputVal() {\n    return parseFloat(this.$el.find('input').val());\n  }\n\n  render() {\n    super();\n    // By default assign the property default value\n    var val = this.getCurrentVal();\n\n    data = {\n      id: this.instance_property.name, // \"circleRadius\" instead of \"circle radius\"\n      label: this.instance_property.label || this.instance_property.name,\n      val: val\n    };\n\n    var view = tpl_property(data);\n    this.$el = $(view);\n    this.$el.find('.property__key').click(this.onKeyClick)\n\n    var $input = this.$el.find('input');\n\n    var onChangeEnd = () => {\n      this.editor.undoManager.addState();\n    }\n\n    var draggableOptions = {\n      changeCallback: () => this.onInputChange(),\n      endCallback: () => onChangeEnd()\n    };\n    // Set min & max if they are defined.\n    if ('min' in this.instance_property) {\n      draggableOptions.min = this.instance_property.min;\n    }\n    if ('max' in this.instance_property) {\n      draggableOptions.max = this.instance_property.max;\n    }\n\n    var draggable = new DraggableNumber($input.get(0), draggableOptions);\n    $input.data('draggable', draggable);\n    $input.change(this.onInputChange);\n  }\n\n  update() {\n    super();\n    var val = this.getCurrentVal();\n    var draggable = this.$input.data('draggable');\n\n    if (draggable) {\n      draggable.set(val.toFixed(3));\n    }\n    else {\n      this.$input.val(val.toFixed(3));\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyNumber.js\n **/","let $ = require('jquery');\nrequire('spectrum');\nimport PropertyBase from './PropertyBase';\n\nlet tpl_property = require('../templates/propertyColor.tpl.html');\n\nexport default class PropertyColor extends PropertyBase {\n  constructor(instance_property, lineData, editor, key_val = false) {\n    super(instance_property, lineData, editor, key_val);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.$input = this.$el.find('input');\n  }\n\n  render() {\n    super();\n    // By default assign the property default value\n    var val = this.getCurrentVal();\n\n    data = {\n      id: this.instance_property.name, // \"circleRadius\" instead of \"circle radius\"\n      label: this.instance_property.label || this.instance_property.name,\n      val: val\n    }\n\n    var view = tpl_property(data);\n    this.$el = $(view);\n    this.$el.find('.property__key').click(this.onKeyClick);\n\n    var $input = this.$el.find('input');\n\n    $input.spectrum({\n      allowEmpty: false,\n      showAlpha: true,\n      clickoutFiresChange: false,\n      preferredFormat: \"rgb\",\n      change: () => {\n        this.editor.undoManager.addState();\n      },\n      move: (color) => {\n        if (color._a == 1) {\n          this.$input.val(color.toHexString());\n        }\n        else {\n          this.$input.val(color.toRgbString());\n        }\n        this.onInputChange()\n      }\n    })\n\n    $input.change(this.onInputChange);\n  }\n\n  update() {\n    super();\n    var val = this.getCurrentVal();\n    this.$input.val(val);\n    this.$input.spectrum('set', val);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyColor.js\n **/","let $ = require('jquery');\n\nlet tpl_property = require('../templates/propertyTween.tpl.html');\n\nexport default class PropertyTween {\n  // instance_property: The current property on the data object.\n  // lineData: The line data object.\n  constructor(instance_property, lineData, editor, key_val = false, timeline) {\n    this.instance_property = instance_property;\n    this.lineData = lineData;\n    this.editor = editor;\n    this.key_val = key_val;\n    this.timeline = timeline;\n\n    this.onChange = this.onChange.bind(this);\n\n    this.timer = this.editor.timer;\n    this.$time = false;\n    this.render();\n  }\n\n  render() {\n    var self = this;\n    if (!this.key_val.ease) {\n      this.key_val.ease = \"Quad.easeOut\";\n    }\n    var data = {\n      id: this.instance_property.name + \"_tween\",\n      val: this.key_val.ease,\n      time: this.key_val.time.toFixed(3),\n      options: ['Linear.easeNone'],\n      selected: function() {\n        if (this.toString() === self.key_val.ease) {\n          return 'selected';\n        } else {\n          return '';\n        }\n      }\n    };\n\n    var tweens = [\"Quad\", \"Cubic\", \"Quart\", \"Quint\", \"Strong\"];\n    for (var i = 0; i < tweens.length; i++) {\n      var tween = tweens[i];\n      data.options.push(tween + \".easeOut\");\n      data.options.push(tween + \".easeIn\");\n      data.options.push(tween + \".easeInOut\");\n    }\n\n    this.$el = $(tpl_property(data));\n    this.$time = this.$el.find('.property__key-time strong');\n    this.$time.keypress((e) => {\n      if (e.charCode == 13) {\n        // Enter\n        e.preventDefault();\n        this.$time.blur();\n        this.updateKeyTime(this.$time.text());\n      }\n    })\n\n    this.$time.on('click', () => document.execCommand('selectAll', false, null));\n    this.$el.find('select').change(this.onChange);\n  }\n\n  updateKeyTime(time) {\n    time = parseFloat(time);\n    if (isNaN(time)) {\n      time = this.key_val.time;\n    }\n    this.$time.text(time);\n    this.key_val.time = time;\n    this.onChange();\n  }\n\n  onChange() {\n    var ease = this.$el.find('select').val();\n    this.key_val.ease = ease;\n    this.editor.undoManager.addState();\n    this.lineData._isDirty = true;\n    this.timeline._isDirty = true;\n  }\n\n  update() {\n    // todo: use mustache instead...\n    this.$time.html(this.key_val.time.toFixed(3));\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyTween.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_31__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"DraggableNumber\",\"commonjs\":\"DraggableNumber\",\"commonjs2\":\"DraggableNumber\",\"amd\":\"DraggableNumber\"}\n ** module id = 31\n ** module chunks = 1\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_32__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"spectrum\"\n ** module id = 32\n ** module chunks = 1\n **/","let Signals = require('js-signals');\nlet _ = require('lodash');\nimport Utils from '../core/Utils';\n\nexport default class PropertyBase {\n  // @instance_property: The current property on the data object.\n  // @lineData: The line data object.\n  constructor(instance_property, lineData, editor, key_val = false) {\n    this.instance_property = instance_property;\n    this.lineData = lineData;\n    this.editor = editor;\n    this.key_val = key_val;\n\n    //this.update = this.update.bind(this);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.onKeyClick = this.onKeyClick.bind(this);\n\n    this.timer = editor.timer;\n    this.keyAdded = new Signals.Signal();\n    this.render();\n\n    this.$key = this.$el.find('.property__key');\n  }\n\n  onKeyClick(e) {\n    e.preventDefault();\n    var currentValue = this.getCurrentVal();\n    this.addKey(currentValue);\n  }\n\n  getInputVal() {\n    return this.$el.find('input').val();\n  }\n\n  getCurrentVal() {\n    var val = this.instance_property.val;\n    var prop_name = this.instance_property.name;\n\n    // if we selected a key simply return it's value\n    if (this.key_val) {\n      return this.key_val.val;\n    }\n    if (this.lineData.values != null && this.lineData.values[prop_name]) {\n      return this.lineData.values[prop_name];\n    }\n    return val;\n  }\n\n  onInputChange() {\n    var current_value = this.getInputVal();\n    var currentTime = this.timer.getCurrentTime() / 1000;\n    // if we selected a key simply get the time from it.\n    if (this.key_val) {\n      currentTime = this.key_val.time;\n    }\n\n    if (this.instance_property.keys && this.instance_property.keys.length) {\n      // Add a new key if there is no other key at same time\n      var current_key = _.find(this.instance_property.keys, (key) => key.time == currentTime)\n\n      if (current_key) {\n        // if there is a key update it\n        current_key.val = current_value;\n      }\n      else {\n        // add a new key\n        this.addKey(current_value);\n      }\n    }\n    else {\n      // There is no keys, simply update the property value (for data saving)\n      this.instance_property.val = current_value;\n      // Also directly set the lineData value.\n      this.lineData.values[@instance_property.name] = current_value;\n\n      // Simply update the custom object with new values.\n      if (this.lineData.object) {\n        currentTime = @timer.getCurrentTime() / 1000;\n        // Set the property on the instance object.\n        this.lineData.object.update(currentTime - this.lineData.start);\n      }\n    }\n\n    // Something changed, make the lineData dirty to rebuild things. d\n    return this.lineData._isDirty = true;\n  }\n\n  getCurrentKey() {\n    var time = this.timer.getCurrentTime() / 1000;\n    if (!this.instance_property || !this.instance_property.keys) {\n      return false;\n    }\n    if (this.instance_property.keys.length === 0) {\n      return false;\n    }\n    for (var i = 0; i < this.instance_property.keys.length; i++) {\n      var key = this.instance_property.keys[i];\n      if (key.time === time) {\n        return key;\n      }\n    }\n    return false\n  }\n\n  addKey(val) {\n    var currentTime = this.timer.getCurrentTime() / 1000;\n    var key = {\n      time: currentTime,\n      val: val\n    };\n    this.instance_property.keys.push(key);\n    this.instance_property.keys = Utils.sortKeys(this.instance_property.keys);\n    this.lineData._isDirty = true;\n    this.keyAdded.dispatch();\n  }\n\n  render() {\n    // current values are defined in @lineData.values\n    this.values = this.lineData.values != null ? this.lineData.values : {};\n  }\n\n  update() {\n    var key = this.getCurrentKey();\n    this.$key.toggleClass('property__key--active', key);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./editor/PropertyBase.js\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--number\\\">\");t.b(\"\\n\" + i);t.b(\"  <button class=\\\"property__key\\\"></button>\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">\");t.b(t.v(t.f(\"label\",c,p,0)));t.b(\"</label>\");t.b(\"\\n\" + i);t.b(\"  <input type=\\\"number\\\" id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__input\\\" value=\\\"\");t.b(t.v(t.f(\"val\",c,p,0)));t.b(\"\\\" />\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--number\\\">\\n  <button class=\\\"property__key\\\"></button>\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">{{label}}</label>\\n  <input type=\\\"number\\\" id=\\\"{{id}}\\\" class=\\\"property__input\\\" value=\\\"{{val}}\\\" />\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertyNumber.tpl.html\n ** module id = 34\n ** module chunks = 1\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--number\\\">\");t.b(\"\\n\" + i);t.b(\"  <button class=\\\"property__key\\\"></button>\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">\");t.b(t.v(t.f(\"label\",c,p,0)));t.b(\"</label>\");t.b(\"\\n\" + i);t.b(\"  <input id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__input\\\" value=\\\"\");t.b(t.v(t.f(\"val\",c,p,0)));t.b(\"\\\" />\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--number\\\">\\n  <button class=\\\"property__key\\\"></button>\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">{{label}}</label>\\n  <input id=\\\"{{id}}\\\" class=\\\"property__input\\\" value=\\\"{{val}}\\\" />\\n</div>\\n\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertyColor.tpl.html\n ** module id = 35\n ** module chunks = 1\n **/","var H = require(\"hogan.js\");\nmodule.exports = function() { var T = new H.Template({code: function (c,p,i) { var t=this;t.b(i=i||\"\");t.b(\"<div class=\\\"property property--tween\\\">\");t.b(\"\\n\" + i);t.b(\"  <label for=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\" class=\\\"property__label\\\">easing</label>\");t.b(\"\\n\" + i);t.b(\"  <div class=\\\"property__select\\\">\");t.b(\"\\n\" + i);t.b(\"    <div class=\\\"custom-select\\\">\");t.b(\"\\n\" + i);t.b(\"      <select id=\\\"\");t.b(t.v(t.f(\"id\",c,p,0)));t.b(\"\\\">\");t.b(\"\\n\" + i);if(t.s(t.f(\"options\",c,p,1),c,p,0,212,279,\"{{ }}\")){t.rs(c,p,function(c,p,t){t.b(\"        <option value=\\\"\");t.b(t.v(t.d(\".\",c,p,0)));t.b(\"\\\" \");t.b(t.v(t.f(\"selected\",c,p,0)));t.b(\">\");t.b(t.v(t.d(\".\",c,p,0)));t.b(\"</option>\");t.b(\"\\n\" + i);});c.pop();}t.b(\"      </select>\");t.b(\"\\n\" + i);t.b(\"    </div>\");t.b(\"\\n\" + i);t.b(\"  </div>\");t.b(\"\\n\" + i);t.b(\"</div>\");t.b(\"\\n\" + i);t.b(\"<div class=\\\"properties-editor__actions actions\\\">\");t.b(\"\\n\" + i);t.b(\"  <span class=\\\"property__key-time\\\">key at <strong class=\\\"property__key-input\\\" contenteditable=\\\"true\\\">\");t.b(t.v(t.f(\"time\",c,p,0)));t.b(\"</strong> seconds</span>\");t.b(\"\\n\" + i);t.b(\"  <a href=\\\"#\\\" class=\\\"actions__item\\\" data-action-remove>Remove key</a>\");t.b(\"\\n\" + i);t.b(\"</div>\");return t.fl(); },partials: {}, subs: {  }}, \"<div class=\\\"property property--tween\\\">\\n  <label for=\\\"{{id}}\\\" class=\\\"property__label\\\">easing</label>\\n  <div class=\\\"property__select\\\">\\n    <div class=\\\"custom-select\\\">\\n      <select id=\\\"{{id}}\\\">\\n        {{#options}}\\n        <option value=\\\"{{.}}\\\" {{selected}}>{{.}}</option>\\n        {{/options}}\\n      </select>\\n    </div>\\n  </div>\\n</div>\\n<div class=\\\"properties-editor__actions actions\\\">\\n  <span class=\\\"property__key-time\\\">key at <strong class=\\\"property__key-input\\\" contenteditable=\\\"true\\\">{{time}}</strong> seconds</span>\\n  <a href=\\\"#\\\" class=\\\"actions__item\\\" data-action-remove>Remove key</a>\\n</div>\", H); return T.render.apply(T, arguments); };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./templates/propertyTween.tpl.html\n ** module id = 36\n ** module chunks = 1\n **/","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n// This file is for use with Node.js. See dist/ for browser files.\n\nvar Hogan = require('./compiler');\nHogan.Template = require('./template').Template;\nHogan.template = Hogan.Template;\nmodule.exports = Hogan;\n\n\n\n/** WEBPACK FOOTER **\n ** /Users/david/Sites/TweenTime/~/hogan.js/lib/hogan.js\n **/","module.exports = function() { throw new Error(\"define cannot be used indirect\"); };\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/amd-define.js\n ** module id = 38\n ** module chunks = 1\n **/","module.exports = __webpack_amd_options__;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/amd-options.js\n ** module id = 39\n ** module chunks = 1\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** (webpack)/buildin/module.js\n **/","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n(function (Hogan) {\n  // Setup regex  assignments\n  // remove whitespace according to Mustache spec\n  var rIsWhitespace = /\\S/,\n      rQuot = /\\\"/g,\n      rNewline =  /\\n/g,\n      rCr = /\\r/g,\n      rSlash = /\\\\/g,\n      rLineSep = /\\u2028/,\n      rParagraphSep = /\\u2029/;\n\n  Hogan.tags = {\n    '#': 1, '^': 2, '<': 3, '$': 4,\n    '/': 5, '!': 6, '>': 7, '=': 8, '_v': 9,\n    '{': 10, '&': 11, '_t': 12\n  };\n\n  Hogan.scan = function scan(text, delimiters) {\n    var len = text.length,\n        IN_TEXT = 0,\n        IN_TAG_TYPE = 1,\n        IN_TAG = 2,\n        state = IN_TEXT,\n        tagType = null,\n        tag = null,\n        buf = '',\n        tokens = [],\n        seenTag = false,\n        i = 0,\n        lineStart = 0,\n        otag = '{{',\n        ctag = '}}';\n\n    function addBuf() {\n      if (buf.length > 0) {\n        tokens.push({tag: '_t', text: new String(buf)});\n        buf = '';\n      }\n    }\n\n    function lineIsWhitespace() {\n      var isAllWhitespace = true;\n      for (var j = lineStart; j < tokens.length; j++) {\n        isAllWhitespace =\n          (Hogan.tags[tokens[j].tag] < Hogan.tags['_v']) ||\n          (tokens[j].tag == '_t' && tokens[j].text.match(rIsWhitespace) === null);\n        if (!isAllWhitespace) {\n          return false;\n        }\n      }\n\n      return isAllWhitespace;\n    }\n\n    function filterLine(haveSeenTag, noNewLine) {\n      addBuf();\n\n      if (haveSeenTag && lineIsWhitespace()) {\n        for (var j = lineStart, next; j < tokens.length; j++) {\n          if (tokens[j].text) {\n            if ((next = tokens[j+1]) && next.tag == '>') {\n              // set indent to token value\n              next.indent = tokens[j].text.toString()\n            }\n            tokens.splice(j, 1);\n          }\n        }\n      } else if (!noNewLine) {\n        tokens.push({tag:'\\n'});\n      }\n\n      seenTag = false;\n      lineStart = tokens.length;\n    }\n\n    function changeDelimiters(text, index) {\n      var close = '=' + ctag,\n          closeIndex = text.indexOf(close, index),\n          delimiters = trim(\n            text.substring(text.indexOf('=', index) + 1, closeIndex)\n          ).split(' ');\n\n      otag = delimiters[0];\n      ctag = delimiters[delimiters.length - 1];\n\n      return closeIndex + close.length - 1;\n    }\n\n    if (delimiters) {\n      delimiters = delimiters.split(' ');\n      otag = delimiters[0];\n      ctag = delimiters[1];\n    }\n\n    for (i = 0; i < len; i++) {\n      if (state == IN_TEXT) {\n        if (tagChange(otag, text, i)) {\n          --i;\n          addBuf();\n          state = IN_TAG_TYPE;\n        } else {\n          if (text.charAt(i) == '\\n') {\n            filterLine(seenTag);\n          } else {\n            buf += text.charAt(i);\n          }\n        }\n      } else if (state == IN_TAG_TYPE) {\n        i += otag.length - 1;\n        tag = Hogan.tags[text.charAt(i + 1)];\n        tagType = tag ? text.charAt(i + 1) : '_v';\n        if (tagType == '=') {\n          i = changeDelimiters(text, i);\n          state = IN_TEXT;\n        } else {\n          if (tag) {\n            i++;\n          }\n          state = IN_TAG;\n        }\n        seenTag = i;\n      } else {\n        if (tagChange(ctag, text, i)) {\n          tokens.push({tag: tagType, n: trim(buf), otag: otag, ctag: ctag,\n                       i: (tagType == '/') ? seenTag - otag.length : i + ctag.length});\n          buf = '';\n          i += ctag.length - 1;\n          state = IN_TEXT;\n          if (tagType == '{') {\n            if (ctag == '}}') {\n              i++;\n            } else {\n              cleanTripleStache(tokens[tokens.length - 1]);\n            }\n          }\n        } else {\n          buf += text.charAt(i);\n        }\n      }\n    }\n\n    filterLine(seenTag, true);\n\n    return tokens;\n  }\n\n  function cleanTripleStache(token) {\n    if (token.n.substr(token.n.length - 1) === '}') {\n      token.n = token.n.substring(0, token.n.length - 1);\n    }\n  }\n\n  function trim(s) {\n    if (s.trim) {\n      return s.trim();\n    }\n\n    return s.replace(/^\\s*|\\s*$/g, '');\n  }\n\n  function tagChange(tag, text, index) {\n    if (text.charAt(index) != tag.charAt(0)) {\n      return false;\n    }\n\n    for (var i = 1, l = tag.length; i < l; i++) {\n      if (text.charAt(index + i) != tag.charAt(i)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  // the tags allowed inside super templates\n  var allowedInSuper = {'_t': true, '\\n': true, '$': true, '/': true};\n\n  function buildTree(tokens, kind, stack, customTags) {\n    var instructions = [],\n        opener = null,\n        tail = null,\n        token = null;\n\n    tail = stack[stack.length - 1];\n\n    while (tokens.length > 0) {\n      token = tokens.shift();\n\n      if (tail && tail.tag == '<' && !(token.tag in allowedInSuper)) {\n        throw new Error('Illegal content in < super tag.');\n      }\n\n      if (Hogan.tags[token.tag] <= Hogan.tags['$'] || isOpener(token, customTags)) {\n        stack.push(token);\n        token.nodes = buildTree(tokens, token.tag, stack, customTags);\n      } else if (token.tag == '/') {\n        if (stack.length === 0) {\n          throw new Error('Closing tag without opener: /' + token.n);\n        }\n        opener = stack.pop();\n        if (token.n != opener.n && !isCloser(token.n, opener.n, customTags)) {\n          throw new Error('Nesting error: ' + opener.n + ' vs. ' + token.n);\n        }\n        opener.end = token.i;\n        return instructions;\n      } else if (token.tag == '\\n') {\n        token.last = (tokens.length == 0) || (tokens[0].tag == '\\n');\n      }\n\n      instructions.push(token);\n    }\n\n    if (stack.length > 0) {\n      throw new Error('missing closing tag: ' + stack.pop().n);\n    }\n\n    return instructions;\n  }\n\n  function isOpener(token, tags) {\n    for (var i = 0, l = tags.length; i < l; i++) {\n      if (tags[i].o == token.n) {\n        token.tag = '#';\n        return true;\n      }\n    }\n  }\n\n  function isCloser(close, open, tags) {\n    for (var i = 0, l = tags.length; i < l; i++) {\n      if (tags[i].c == close && tags[i].o == open) {\n        return true;\n      }\n    }\n  }\n\n  function stringifySubstitutions(obj) {\n    var items = [];\n    for (var key in obj) {\n      items.push('\"' + esc(key) + '\": function(c,p,t,i) {' + obj[key] + '}');\n    }\n    return \"{ \" + items.join(\",\") + \" }\";\n  }\n\n  function stringifyPartials(codeObj) {\n    var partials = [];\n    for (var key in codeObj.partials) {\n      partials.push('\"' + esc(key) + '\":{name:\"' + esc(codeObj.partials[key].name) + '\", ' + stringifyPartials(codeObj.partials[key]) + \"}\");\n    }\n    return \"partials: {\" + partials.join(\",\") + \"}, subs: \" + stringifySubstitutions(codeObj.subs);\n  }\n\n  Hogan.stringify = function(codeObj, text, options) {\n    return \"{code: function (c,p,i) { \" + Hogan.wrapMain(codeObj.code) + \" },\" + stringifyPartials(codeObj) +  \"}\";\n  }\n\n  var serialNo = 0;\n  Hogan.generate = function(tree, text, options) {\n    serialNo = 0;\n    var context = { code: '', subs: {}, partials: {} };\n    Hogan.walk(tree, context);\n\n    if (options.asString) {\n      return this.stringify(context, text, options);\n    }\n\n    return this.makeTemplate(context, text, options);\n  }\n\n  Hogan.wrapMain = function(code) {\n    return 'var t=this;t.b(i=i||\"\");' + code + 'return t.fl();';\n  }\n\n  Hogan.template = Hogan.Template;\n\n  Hogan.makeTemplate = function(codeObj, text, options) {\n    var template = this.makePartials(codeObj);\n    template.code = new Function('c', 'p', 'i', this.wrapMain(codeObj.code));\n    return new this.template(template, text, this, options);\n  }\n\n  Hogan.makePartials = function(codeObj) {\n    var key, template = {subs: {}, partials: codeObj.partials, name: codeObj.name};\n    for (key in template.partials) {\n      template.partials[key] = this.makePartials(template.partials[key]);\n    }\n    for (key in codeObj.subs) {\n      template.subs[key] = new Function('c', 'p', 't', 'i', codeObj.subs[key]);\n    }\n    return template;\n  }\n\n  function esc(s) {\n    return s.replace(rSlash, '\\\\\\\\')\n            .replace(rQuot, '\\\\\\\"')\n            .replace(rNewline, '\\\\n')\n            .replace(rCr, '\\\\r')\n            .replace(rLineSep, '\\\\u2028')\n            .replace(rParagraphSep, '\\\\u2029');\n  }\n\n  function chooseMethod(s) {\n    return (~s.indexOf('.')) ? 'd' : 'f';\n  }\n\n  function createPartial(node, context) {\n    var prefix = \"<\" + (context.prefix || \"\");\n    var sym = prefix + node.n + serialNo++;\n    context.partials[sym] = {name: node.n, partials: {}};\n    context.code += 't.b(t.rp(\"' +  esc(sym) + '\",c,p,\"' + (node.indent || '') + '\"));';\n    return sym;\n  }\n\n  Hogan.codegen = {\n    '#': function(node, context) {\n      context.code += 'if(t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),' +\n                      'c,p,0,' + node.i + ',' + node.end + ',\"' + node.otag + \" \" + node.ctag + '\")){' +\n                      't.rs(c,p,' + 'function(c,p,t){';\n      Hogan.walk(node.nodes, context);\n      context.code += '});c.pop();}';\n    },\n\n    '^': function(node, context) {\n      context.code += 'if(!t.s(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,1),c,p,1,0,0,\"\")){';\n      Hogan.walk(node.nodes, context);\n      context.code += '};';\n    },\n\n    '>': createPartial,\n    '<': function(node, context) {\n      var ctx = {partials: {}, code: '', subs: {}, inPartial: true};\n      Hogan.walk(node.nodes, ctx);\n      var template = context.partials[createPartial(node, context)];\n      template.subs = ctx.subs;\n      template.partials = ctx.partials;\n    },\n\n    '$': function(node, context) {\n      var ctx = {subs: {}, code: '', partials: context.partials, prefix: node.n};\n      Hogan.walk(node.nodes, ctx);\n      context.subs[node.n] = ctx.code;\n      if (!context.inPartial) {\n        context.code += 't.sub(\"' + esc(node.n) + '\",c,p,i);';\n      }\n    },\n\n    '\\n': function(node, context) {\n      context.code += write('\"\\\\n\"' + (node.last ? '' : ' + i'));\n    },\n\n    '_v': function(node, context) {\n      context.code += 't.b(t.v(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n    },\n\n    '_t': function(node, context) {\n      context.code += write('\"' + esc(node.text) + '\"');\n    },\n\n    '{': tripleStache,\n\n    '&': tripleStache\n  }\n\n  function tripleStache(node, context) {\n    context.code += 't.b(t.t(t.' + chooseMethod(node.n) + '(\"' + esc(node.n) + '\",c,p,0)));';\n  }\n\n  function write(s) {\n    return 't.b(' + s + ');';\n  }\n\n  Hogan.walk = function(nodelist, context) {\n    var func;\n    for (var i = 0, l = nodelist.length; i < l; i++) {\n      func = Hogan.codegen[nodelist[i].tag];\n      func && func(nodelist[i], context);\n    }\n    return context;\n  }\n\n  Hogan.parse = function(tokens, text, options) {\n    options = options || {};\n    return buildTree(tokens, '', [], options.sectionTags || []);\n  }\n\n  Hogan.cache = {};\n\n  Hogan.cacheKey = function(text, options) {\n    return [text, !!options.asString, !!options.disableLambda, options.delimiters, !!options.modelGet].join('||');\n  }\n\n  Hogan.compile = function(text, options) {\n    options = options || {};\n    var key = Hogan.cacheKey(text, options);\n    var template = this.cache[key];\n\n    if (template) {\n      var partials = template.partials;\n      for (var name in partials) {\n        delete partials[name].instance;\n      }\n      return template;\n    }\n\n    template = this.generate(this.parse(this.scan(text, options.delimiters), text, options), text, options);\n    return this.cache[key] = template;\n  }\n})(typeof exports !== 'undefined' ? exports : Hogan);\n\n\n\n/** WEBPACK FOOTER **\n ** /Users/david/Sites/TweenTime/~/hogan.js/lib/compiler.js\n **/","/*\n *  Copyright 2011 Twitter, Inc.\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\nvar Hogan = {};\n\n(function (Hogan) {\n  Hogan.Template = function (codeObj, text, compiler, options) {\n    codeObj = codeObj || {};\n    this.r = codeObj.code || this.r;\n    this.c = compiler;\n    this.options = options || {};\n    this.text = text || '';\n    this.partials = codeObj.partials || {};\n    this.subs = codeObj.subs || {};\n    this.buf = '';\n  }\n\n  Hogan.Template.prototype = {\n    // render: replaced by generated code.\n    r: function (context, partials, indent) { return ''; },\n\n    // variable escaping\n    v: hoganEscape,\n\n    // triple stache\n    t: coerceToString,\n\n    render: function render(context, partials, indent) {\n      return this.ri([context], partials || {}, indent);\n    },\n\n    // render internal -- a hook for overrides that catches partials too\n    ri: function (context, partials, indent) {\n      return this.r(context, partials, indent);\n    },\n\n    // ensurePartial\n    ep: function(symbol, partials) {\n      var partial = this.partials[symbol];\n\n      // check to see that if we've instantiated this partial before\n      var template = partials[partial.name];\n      if (partial.instance && partial.base == template) {\n        return partial.instance;\n      }\n\n      if (typeof template == 'string') {\n        if (!this.c) {\n          throw new Error(\"No compiler available.\");\n        }\n        template = this.c.compile(template, this.options);\n      }\n\n      if (!template) {\n        return null;\n      }\n\n      // We use this to check whether the partials dictionary has changed\n      this.partials[symbol].base = template;\n\n      if (partial.subs) {\n        // Make sure we consider parent template now\n        if (!partials.stackText) partials.stackText = {};\n        for (key in partial.subs) {\n          if (!partials.stackText[key]) {\n            partials.stackText[key] = (this.activeSub !== undefined && partials.stackText[this.activeSub]) ? partials.stackText[this.activeSub] : this.text;\n          }\n        }\n        template = createSpecializedPartial(template, partial.subs, partial.partials,\n          this.stackSubs, this.stackPartials, partials.stackText);\n      }\n      this.partials[symbol].instance = template;\n\n      return template;\n    },\n\n    // tries to find a partial in the current scope and render it\n    rp: function(symbol, context, partials, indent) {\n      var partial = this.ep(symbol, partials);\n      if (!partial) {\n        return '';\n      }\n\n      return partial.ri(context, partials, indent);\n    },\n\n    // render a section\n    rs: function(context, partials, section) {\n      var tail = context[context.length - 1];\n\n      if (!isArray(tail)) {\n        section(context, partials, this);\n        return;\n      }\n\n      for (var i = 0; i < tail.length; i++) {\n        context.push(tail[i]);\n        section(context, partials, this);\n        context.pop();\n      }\n    },\n\n    // maybe start a section\n    s: function(val, ctx, partials, inverted, start, end, tags) {\n      var pass;\n\n      if (isArray(val) && val.length === 0) {\n        return false;\n      }\n\n      if (typeof val == 'function') {\n        val = this.ms(val, ctx, partials, inverted, start, end, tags);\n      }\n\n      pass = !!val;\n\n      if (!inverted && pass && ctx) {\n        ctx.push((typeof val == 'object') ? val : ctx[ctx.length - 1]);\n      }\n\n      return pass;\n    },\n\n    // find values with dotted names\n    d: function(key, ctx, partials, returnFound) {\n      var found,\n          names = key.split('.'),\n          val = this.f(names[0], ctx, partials, returnFound),\n          doModelGet = this.options.modelGet,\n          cx = null;\n\n      if (key === '.' && isArray(ctx[ctx.length - 2])) {\n        val = ctx[ctx.length - 1];\n      } else {\n        for (var i = 1; i < names.length; i++) {\n          found = findInScope(names[i], val, doModelGet);\n          if (found !== undefined) {\n            cx = val;\n            val = found;\n          } else {\n            val = '';\n          }\n        }\n      }\n\n      if (returnFound && !val) {\n        return false;\n      }\n\n      if (!returnFound && typeof val == 'function') {\n        ctx.push(cx);\n        val = this.mv(val, ctx, partials);\n        ctx.pop();\n      }\n\n      return val;\n    },\n\n    // find values with normal names\n    f: function(key, ctx, partials, returnFound) {\n      var val = false,\n          v = null,\n          found = false,\n          doModelGet = this.options.modelGet;\n\n      for (var i = ctx.length - 1; i >= 0; i--) {\n        v = ctx[i];\n        val = findInScope(key, v, doModelGet);\n        if (val !== undefined) {\n          found = true;\n          break;\n        }\n      }\n\n      if (!found) {\n        return (returnFound) ? false : \"\";\n      }\n\n      if (!returnFound && typeof val == 'function') {\n        val = this.mv(val, ctx, partials);\n      }\n\n      return val;\n    },\n\n    // higher order templates\n    ls: function(func, cx, partials, text, tags) {\n      var oldTags = this.options.delimiters;\n\n      this.options.delimiters = tags;\n      this.b(this.ct(coerceToString(func.call(cx, text)), cx, partials));\n      this.options.delimiters = oldTags;\n\n      return false;\n    },\n\n    // compile text\n    ct: function(text, cx, partials) {\n      if (this.options.disableLambda) {\n        throw new Error('Lambda features disabled.');\n      }\n      return this.c.compile(text, this.options).render(cx, partials);\n    },\n\n    // template result buffering\n    b: function(s) { this.buf += s; },\n\n    fl: function() { var r = this.buf; this.buf = ''; return r; },\n\n    // method replace section\n    ms: function(func, ctx, partials, inverted, start, end, tags) {\n      var textSource,\n          cx = ctx[ctx.length - 1],\n          result = func.call(cx);\n\n      if (typeof result == 'function') {\n        if (inverted) {\n          return true;\n        } else {\n          textSource = (this.activeSub && this.subsText && this.subsText[this.activeSub]) ? this.subsText[this.activeSub] : this.text;\n          return this.ls(result, cx, partials, textSource.substring(start, end), tags);\n        }\n      }\n\n      return result;\n    },\n\n    // method replace variable\n    mv: function(func, ctx, partials) {\n      var cx = ctx[ctx.length - 1];\n      var result = func.call(cx);\n\n      if (typeof result == 'function') {\n        return this.ct(coerceToString(result.call(cx)), cx, partials);\n      }\n\n      return result;\n    },\n\n    sub: function(name, context, partials, indent) {\n      var f = this.subs[name];\n      if (f) {\n        this.activeSub = name;\n        f(context, partials, this, indent);\n        this.activeSub = false;\n      }\n    }\n\n  };\n\n  //Find a key in an object\n  function findInScope(key, scope, doModelGet) {\n    var val;\n\n    if (scope && typeof scope == 'object') {\n\n      if (scope[key] !== undefined) {\n        val = scope[key];\n\n      // try lookup with get for backbone or similar model data\n      } else if (doModelGet && scope.get && typeof scope.get == 'function') {\n        val = scope.get(key);\n      }\n    }\n\n    return val;\n  }\n\n  function createSpecializedPartial(instance, subs, partials, stackSubs, stackPartials, stackText) {\n    function PartialTemplate() {};\n    PartialTemplate.prototype = instance;\n    function Substitutions() {};\n    Substitutions.prototype = instance.subs;\n    var key;\n    var partial = new PartialTemplate();\n    partial.subs = new Substitutions();\n    partial.subsText = {};  //hehe. substext.\n    partial.buf = '';\n\n    stackSubs = stackSubs || {};\n    partial.stackSubs = stackSubs;\n    partial.subsText = stackText;\n    for (key in subs) {\n      if (!stackSubs[key]) stackSubs[key] = subs[key];\n    }\n    for (key in stackSubs) {\n      partial.subs[key] = stackSubs[key];\n    }\n\n    stackPartials = stackPartials || {};\n    partial.stackPartials = stackPartials;\n    for (key in partials) {\n      if (!stackPartials[key]) stackPartials[key] = partials[key];\n    }\n    for (key in stackPartials) {\n      partial.partials[key] = stackPartials[key];\n    }\n\n    return partial;\n  }\n\n  var rAmp = /&/g,\n      rLt = /</g,\n      rGt = />/g,\n      rApos = /\\'/g,\n      rQuot = /\\\"/g,\n      hChars = /[&<>\\\"\\']/;\n\n  function coerceToString(val) {\n    return String((val === null || val === undefined) ? '' : val);\n  }\n\n  function hoganEscape(str) {\n    str = coerceToString(str);\n    return hChars.test(str) ?\n      str\n        .replace(rAmp, '&amp;')\n        .replace(rLt, '&lt;')\n        .replace(rGt, '&gt;')\n        .replace(rApos, '&#39;')\n        .replace(rQuot, '&quot;') :\n      str;\n  }\n\n  var isArray = Array.isArray || function(a) {\n    return Object.prototype.toString.call(a) === '[object Array]';\n  };\n\n})(typeof exports !== 'undefined' ? exports : Hogan);\n\n\n\n/** WEBPACK FOOTER **\n ** /Users/david/Sites/TweenTime/~/hogan.js/lib/template.js\n **/"],"sourceRoot":""}